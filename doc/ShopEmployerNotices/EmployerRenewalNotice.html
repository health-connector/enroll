<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ShopEmployerNotices::EmployerRenewalNotice
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ShopEmployerNotices::EmployerRenewalNotice";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo;
    <span class='title'>ShopEmployerNotices</span>
     &raquo; 
    <span class="title">EmployerRenewalNotice</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ShopEmployerNotices::EmployerRenewalNotice
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">ShopEmployerNotice</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ShopEmployerNotice</li>
          
            <li class="next">ShopEmployerNotices::EmployerRenewalNotice</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/notices/shop_employer_notices/employer_renewal_notice.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#append_data-instance_method" title="#append_data (instance method)">#<strong>append_data</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#conversion_attachment-instance_method" title="#conversion_attachment (instance method)">#<strong>conversion_attachment</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_secure_inbox_message-instance_method" title="#create_secure_inbox_message (instance method)">#<strong>create_secure_inbox_message</strong>(notice)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deliver-instance_method" title="#deliver (instance method)">#<strong>deliver</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="append_data-instance_method">
  
    #<strong>append_data</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37
38
39
40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/notices/shop_employer_notices/employer_renewal_notice.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_append_data'>append_data</span>
  <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="../PlanYear.html" title="PlanYear (class)">PlanYear</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../PlanYear.html#RENEWING-constant" title="PlanYear::RENEWING (constant)">RENEWING</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../PdfTemplates.html" title="PdfTemplates (module)">PdfTemplates</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../PdfTemplates/PlanYear.html" title="PdfTemplates::PlanYear (class)">PlanYear</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbrace'>{</span>
        <span class='symbol'>:open_enrollment_end_on</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span><span class='comma'>,</span>
        <span class='symbol'>:start_on</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span>
        <span class='symbol'>:carrier_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_reference_plan'>reference_plan</span><span class='period'>.</span><span class='id identifier rubyid_carrier_profile'>carrier_profile</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span>
      <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="conversion_attachment-instance_method">
  
    #<strong>conversion_attachment</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/notices/shop_employer_notices/employer_renewal_notice.rb', line 44</span>

<span class='kw'>def</span> <span class='id identifier rubyid_conversion_attachment'>conversion_attachment</span>
  <span class='id identifier rubyid_join_pdfs'>join_pdfs</span> <span class='lbracket'>[</span><span class='id identifier rubyid_notice_path'>notice_path</span><span class='comma'>,</span> <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lib/pdf_templates</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>conversion_employer_attachment.pdf</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_secure_inbox_message-instance_method">
  
    #<strong>create_secure_inbox_message</strong>(notice)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/notices/shop_employer_notices/employer_renewal_notice.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_secure_inbox_message'>create_secure_inbox_message</span><span class='lparen'>(</span><span class='id identifier rubyid_notice'>notice</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>corrected</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This notice is a corrected version of the original &#39;Group Renewal Available&#39; notice you previously received. The original notice listed two different open enrollment end dates.
            This notice confirms your latest possible open enrollment end date is the 13th of the month prior to your plan year start date. Please contact </span><span class='embexpr_beg'>#{</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;s call center at </span><span class='embexpr_beg'>#{</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_contact_center'>contact_center</span><span class='period'>.</span><span class='id identifier rubyid_phone_number'>phone_number</span><span class='embexpr_end'>}</span><span class='tstring_content'> [TTY: 711] with any questions.&lt;br&gt;&lt;/br&gt;You can download the notice by clicking this link </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_application'>application</span><span class='period'>.</span><span class='id identifier rubyid_routes'>routes</span><span class='period'>.</span><span class='id identifier rubyid_url_helpers'>url_helpers</span><span class='period'>.</span><span class='id identifier rubyid_authorized_document_download_path'>authorized_document_download_path</span><span class='lparen'>(</span><span class='id identifier rubyid_recipient'>recipient</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span>
              <span class='id identifier rubyid_recipient'>recipient</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>documents</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>?content_type=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;filename=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^0-9a-z]</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>.pdf&amp;disposition=inline</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> target=&#39;_blank&#39;&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_subject'>subject</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CORRECTED: Open Enrollment End Date - Group Renewal Available</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;br&gt;You can download the notice by clicking this link </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_application'>application</span><span class='period'>.</span><span class='id identifier rubyid_routes'>routes</span><span class='period'>.</span><span class='id identifier rubyid_url_helpers'>url_helpers</span><span class='period'>.</span><span class='id identifier rubyid_authorized_document_download_path'>authorized_document_download_path</span><span class='lparen'>(</span><span class='id identifier rubyid_recipient'>recipient</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span>
              <span class='id identifier rubyid_recipient'>recipient</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>documents</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>?content_type=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;filename=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^0-9a-z]</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>.pdf&amp;disposition=inline</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> target=&#39;_blank&#39;&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_subject'>subject</span> <span class='op'>=</span> <span class='id identifier rubyid_notice'>notice</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_recipient'>recipient</span><span class='period'>.</span><span class='id identifier rubyid_inbox'>inbox</span><span class='period'>.</span><span class='id identifier rubyid_messages'>messages</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='label'>subject:</span> <span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span> <span class='label'>body:</span> <span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='label'>from:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deliver-instance_method">
  
    #<strong>deliver</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/notices/shop_employer_notices/employer_renewal_notice.rb', line 3</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deliver'>deliver</span>
  <span class='id identifier rubyid_build'>build</span>
  <span class='id identifier rubyid_append_data'>append_data</span>
  <span class='id identifier rubyid_generate_pdf_notice'>generate_pdf_notice</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_converting?'>is_converting?</span>
    <span class='id identifier rubyid_conversion_attachment'>conversion_attachment</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_attach_envelope'>attach_envelope</span>
  <span class='id identifier rubyid_upload_and_send_secure_message'>upload_and_send_secure_message</span>
  <span class='id identifier rubyid_send_generic_notice_alert'>send_generic_notice_alert</span>
  <span class='id identifier rubyid_send_generic_notice_alert_to_broker_and_ga'>send_generic_notice_alert_to_broker_and_ga</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Oct 11 09:50:50 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.2.3).
</div>

    </div>
  </body>
</html>