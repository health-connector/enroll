<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: PlanYear
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "PlanYear";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo;
    
    
    <span class="title">PlanYear</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: PlanYear
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">PlanYear</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>AASM, Acapi::Notifiers, Concerns::Observable, <span class='object_link'><a href="Config/AcaModelConcern.html" title="Config::AcaModelConcern (module)">Config::AcaModelConcern</a></span>, <span class='object_link'><a href="Config/BankHolidaysHelper.html" title="Config::BankHolidaysHelper (module)">Config::BankHolidaysHelper</a></span>, <span class='object_link'><a href="ModelEvents/PlanYear.html" title="ModelEvents::PlanYear (module)">ModelEvents::PlanYear</a></span>, Mongoid::Document, Mongoid::Timestamps, <span class='object_link'><a href="ScheduledEventService.html" title="ScheduledEventService (module)">ScheduledEventService</a></span>, <span class='object_link'><a href="SetCurrentUser.html" title="SetCurrentUser (module)">SetCurrentUser</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/plan_year.rb</dd>
  </dl>
  
</div>


  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="PUBLISHED-constant" class="">PUBLISHED =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>published</span><span class='words_sep'> </span><span class='tstring_content'>enrolling</span><span class='words_sep'> </span><span class='tstring_content'>enrolled</span><span class='words_sep'> </span><span class='tstring_content'>active</span><span class='words_sep'> </span><span class='tstring_content'>suspended</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="RENEWING-constant" class="">RENEWING =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>renewing_draft</span><span class='words_sep'> </span><span class='tstring_content'>renewing_published</span><span class='words_sep'> </span><span class='tstring_content'>renewing_enrolling</span><span class='words_sep'> </span><span class='tstring_content'>renewing_enrolled</span><span class='words_sep'> </span><span class='tstring_content'>renewing_publish_pending</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="RENEWING_PUBLISHED_STATE-constant" class="">RENEWING_PUBLISHED_STATE =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>renewing_published</span><span class='words_sep'> </span><span class='tstring_content'>renewing_enrolling</span><span class='words_sep'> </span><span class='tstring_content'>renewing_enrolled</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="DRAFT_STATES-constant" class="">DRAFT_STATES =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>draft</span><span class='words_sep'> </span><span class='tstring_content'>renewing_draft</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="INELIGIBLE_FOR_EXPORT_STATES-constant" class="">INELIGIBLE_FOR_EXPORT_STATES =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>draft</span><span class='words_sep'> </span><span class='tstring_content'>publish_pending</span><span class='words_sep'> </span><span class='tstring_content'>eligibility_review</span><span class='words_sep'> </span><span class='tstring_content'>published_invalid</span><span class='words_sep'> </span><span class='tstring_content'>canceled</span><span class='words_sep'> </span><span class='tstring_content'>renewing_draft</span><span class='words_sep'> </span><span class='tstring_content'>suspended</span><span class='words_sep'> </span><span class='tstring_content'>application_ineligible</span><span class='words_sep'> </span><span class='tstring_content'>renewing_application_ineligible</span><span class='words_sep'> </span><span class='tstring_content'>renewing_canceled</span><span class='words_sep'> </span><span class='tstring_content'>conversion_expired</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="OPEN_ENROLLMENT_STATE-constant" class="">OPEN_ENROLLMENT_STATE =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>enrolling</span><span class='words_sep'> </span><span class='tstring_content'>renewing_enrolling</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="INITIAL_ENROLLING_STATE-constant" class="">INITIAL_ENROLLING_STATE =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>publish_pending</span><span class='words_sep'> </span><span class='tstring_content'>eligibility_review</span><span class='words_sep'> </span><span class='tstring_content'>published</span><span class='words_sep'> </span><span class='tstring_content'>published_invalid</span><span class='words_sep'> </span><span class='tstring_content'>enrolling</span><span class='words_sep'> </span><span class='tstring_content'>enrolled</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="INITIAL_ELIGIBLE_STATE-constant" class="">INITIAL_ELIGIBLE_STATE =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>published</span><span class='words_sep'> </span><span class='tstring_content'>enrolling</span><span class='words_sep'> </span><span class='tstring_content'>enrolled</span><span class='words_sep'>)</span></pre></dd>
    
  </dl>



  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="ModelEvents/PlanYear.html" title="ModelEvents::PlanYear (module)">ModelEvents::PlanYear</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ModelEvents/PlanYear.html#DATA_CHANGE_EVENTS-constant" title="ModelEvents::PlanYear::DATA_CHANGE_EVENTS (constant)">ModelEvents::PlanYear::DATA_CHANGE_EVENTS</a></span>, <span class='object_link'><a href="ModelEvents/PlanYear.html#REGISTERED_EVENTS-constant" title="ModelEvents::PlanYear::REGISTERED_EVENTS (constant)">ModelEvents::PlanYear::REGISTERED_EVENTS</a></span></p>





  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#calculate_open_enrollment_date-class_method" title="calculate_open_enrollment_date (class method)">.<strong>calculate_open_enrollment_date</strong>(start_on)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#calculate_start_on_dates-class_method" title="calculate_start_on_dates (class method)">.<strong>calculate_start_on_dates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#calculate_start_on_options-class_method" title="calculate_start_on_options (class method)">.<strong>calculate_start_on_options</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_start_on-class_method" title="check_start_on (class method)">.<strong>check_start_on</strong>(start_on)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrollment_quiet_period-class_method" title="enrollment_quiet_period (class method)">.<strong>enrollment_quiet_period</strong>(start_on:, open_enrollment_end_on: nil, is_renewing: false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find-class_method" title="find (class method)">.<strong>find</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first_banking_date_after-class_method" title="first_banking_date_after (class method)">.<strong>first_banking_date_after</strong>(date_value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first_banking_date_prior-class_method" title="first_banking_date_prior (class method)">.<strong>first_banking_date_prior</strong>(date_value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>TODO - add holidays.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initial_quiet_period_end-class_method" title="initial_quiet_period_end (class method)">.<strong>initial_quiet_period_end</strong>(start_on)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#map_binder_payment_due_date_by_start_on-class_method" title="map_binder_payment_due_date_by_start_on (class method)">.<strong>map_binder_payment_due_date_by_start_on</strong>(start_on)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_enrollment_start_period_with_offset-class_method" title="open_enrollment_start_period_with_offset (class method)">.<strong>open_enrollment_start_period_with_offset</strong>(date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#renewal_quiet_period_end-class_method" title="renewal_quiet_period_end (class method)">.<strong>renewal_quiet_period_end</strong>(start_on)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shop_enrollment_timetable-class_method" title="shop_enrollment_timetable (class method)">.<strong>shop_enrollment_timetable</strong>(new_effective_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#accept_application-instance_method" title="#accept_application (instance method)">#<strong>accept_application</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#additional_required_participants_count-instance_method" title="#additional_required_participants_count (instance method)">#<strong>additional_required_participants_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#adjust_open_enrollment_date-instance_method" title="#adjust_open_enrollment_date (instance method)">#<strong>adjust_open_enrollment_date</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#application_eligibility_warnings-instance_method" title="#application_eligibility_warnings (instance method)">#<strong>application_eligibility_warnings</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Check plan year application for regulatory compliance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#application_errors-instance_method" title="#application_errors (instance method)">#<strong>application_errors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Check plan year for violations of model integrity relative to publishing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#application_warnings-instance_method" title="#application_warnings (instance method)">#<strong>application_warnings</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigned_census_employees-instance_method" title="#assigned_census_employees (instance method)">#<strong>assigned_census_employees</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigned_census_employees_without_owner-instance_method" title="#assigned_census_employees_without_owner (instance method)">#<strong>assigned_census_employees_without_owner</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#benefit_group_ids-instance_method" title="#benefit_group_ids (instance method)">#<strong>benefit_group_ids</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#binder_paid%3F-instance_method" title="#binder_paid? (instance method)">#<strong>binder_paid?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#calc_active_health_assignments_for-instance_method" title="#calc_active_health_assignments_for (instance method)">#<strong>calc_active_health_assignments_for</strong>(employee_pool)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_be_migrated%3F-instance_method" title="#can_be_migrated? (instance method)">#<strong>can_be_migrated?</strong>  &#x21d2; Boolean </a>
    

    
      (also: #external_plan_year?)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Checks for external plan year.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cancel_application-instance_method" title="#cancel_application (instance method)">#<strong>cancel_application</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cancel_employee_enrollments-instance_method" title="#cancel_employee_enrollments (instance method)">#<strong>cancel_employee_enrollments</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cancel_enrollments-instance_method" title="#cancel_enrollments (instance method)">#<strong>cancel_enrollments</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#carriers_offered-instance_method" title="#carriers_offered (instance method)">#<strong>carriers_offered</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#coverage_period_contains%3F-instance_method" title="#coverage_period_contains? (instance method)">#<strong>coverage_period_contains?</strong>(compare_date)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#covered-instance_method" title="#covered (instance method)">#<strong>covered</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#covered_count-instance_method" title="#covered_count (instance method)">#<strong>covered_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#decline_application-instance_method" title="#decline_application (instance method)">#<strong>decline_application</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_benefit_group-instance_method" title="#default_benefit_group (instance method)">#<strong>default_benefit_group</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_renewal_benefit_group-instance_method" title="#default_renewal_benefit_group (instance method)">#<strong>default_renewal_benefit_group</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dental_carriers_offered-instance_method" title="#dental_carriers_offered (instance method)">#<strong>dental_carriers_offered</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deny_enrollment-instance_method" title="#deny_enrollment (instance method)">#<strong>deny_enrollment</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#due_date_for_publish-instance_method" title="#due_date_for_publish (instance method)">#<strong>due_date_for_publish</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#editable%3F-instance_method" title="#editable? (instance method)">#<strong>editable?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eligible_for_export%3F-instance_method" title="#eligible_for_export? (instance method)">#<strong>eligible_for_export?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eligible_to_enroll-instance_method" title="#eligible_to_enroll (instance method)">#<strong>eligible_to_enroll</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>All active employees present on the roster with benefit groups belonging to
this plan year.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eligible_to_enroll_count-instance_method" title="#eligible_to_enroll_count (instance method)">#<strong>eligible_to_enroll_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#employee_participation_percent-instance_method" title="#employee_participation_percent (instance method)">#<strong>employee_participation_percent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#employee_participation_percent_based_on_summary-instance_method" title="#employee_participation_percent_based_on_summary (instance method)">#<strong>employee_participation_percent_based_on_summary</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#employees_are_matchable%3F-instance_method" title="#employees_are_matchable? (instance method)">#<strong>employees_are_matchable?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#end_on=-instance_method" title="#end_on= (instance method)">#<strong>end_on=</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrolled-instance_method" title="#enrolled (instance method)">#<strong>enrolled</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Any employee who selected or waived coverage.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrolled_bga_for_ce-instance_method" title="#enrolled_bga_for_ce (instance method)">#<strong>enrolled_bga_for_ce</strong>(ce)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrolled_by_bga-instance_method" title="#enrolled_by_bga (instance method)">#<strong>enrolled_by_bga</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrollment_errors-instance_method" title="#enrollment_errors (instance method)">#<strong>enrollment_errors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine enrollment composition compliance with HBX-defined guards.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrollment_quiet_period-instance_method" title="#enrollment_quiet_period (instance method)">#<strong>enrollment_quiet_period</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrollment_ratio-instance_method" title="#enrollment_ratio (instance method)">#<strong>enrollment_ratio</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ensure_benefit_group_is_valid-instance_method" title="#ensure_benefit_group_is_valid (instance method)">#<strong>ensure_benefit_group_is_valid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#estimate_group_size%3F-instance_method" title="#estimate_group_size? (instance method)">#<strong>estimate_group_size?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#filter_active_enrollments_by_date-instance_method" title="#filter_active_enrollments_by_date (instance method)">#<strong>filter_active_enrollments_by_date</strong>(date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_census_employees-instance_method" title="#find_census_employees (instance method)">#<strong>find_census_employees</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_renewal_history%3F-instance_method" title="#has_renewal_history? (instance method)">#<strong>has_renewal_history?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hbx_enrollments-instance_method" title="#hbx_enrollments (instance method)">#<strong>hbx_enrollments</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hbx_enrollments_by_month-instance_method" title="#hbx_enrollments_by_month (instance method)">#<strong>hbx_enrollments_by_month</strong>(date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_application_eligible%3F-instance_method" title="#is_application_eligible? (instance method)">#<strong>is_application_eligible?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_application_invalid%3F-instance_method" title="#is_application_invalid? (instance method)">#<strong>is_application_invalid?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_application_period_ended%3F-instance_method" title="#is_application_period_ended? (instance method)">#<strong>is_application_period_ended?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_application_unpublishable%3F-instance_method" title="#is_application_unpublishable? (instance method)">#<strong>is_application_unpublishable?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_application_valid%3F-instance_method" title="#is_application_valid? (instance method)">#<strong>is_application_valid?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_before_start%3F-instance_method" title="#is_before_start? (instance method)">#<strong>is_before_start?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_eligible_to_match_census_employees%3F-instance_method" title="#is_eligible_to_match_census_employees? (instance method)">#<strong>is_eligible_to_match_census_employees?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_enrollment_valid%3F-instance_method" title="#is_enrollment_valid? (instance method)">#<strong>is_enrollment_valid?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_offering_dental%3F-instance_method" title="#is_offering_dental? (instance method)">#<strong>is_offering_dental?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_open_enrollment_closed%3F-instance_method" title="#is_open_enrollment_closed? (instance method)">#<strong>is_open_enrollment_closed?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_publish_date_valid%3F-instance_method" title="#is_publish_date_valid? (instance method)">#<strong>is_publish_date_valid?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_published%3F-instance_method" title="#is_published? (instance method)">#<strong>is_published?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_renewing%3F-instance_method" title="#is_renewing? (instance method)">#<strong>is_renewing?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_within_review_period%3F-instance_method" title="#is_within_review_period? (instance method)">#<strong>is_within_review_period?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_workflow_state_transition-instance_method" title="#latest_workflow_state_transition (instance method)">#<strong>latest_workflow_state_transition</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#link_census_employees-instance_method" title="#link_census_employees (instance method)">#<strong>link_census_employees</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#minimum_employer_contribution-instance_method" title="#minimum_employer_contribution (instance method)">#<strong>minimum_employer_contribution</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#minimum_enrolled_count-instance_method" title="#minimum_enrolled_count (instance method)">#<strong>minimum_enrolled_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#no_documents_uploaded%3F-instance_method" title="#no_documents_uploaded? (instance method)">#<strong>no_documents_uploaded?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#non_business_owner_enrolled-instance_method" title="#non_business_owner_enrolled (instance method)">#<strong>non_business_owner_enrolled</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Employees who selected or waived and are not owners or direct family
members of owners.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_enrollment_completed%3F-instance_method" title="#open_enrollment_completed? (instance method)">#<strong>open_enrollment_completed?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_enrollment_contains%3F-instance_method" title="#open_enrollment_contains? (instance method)">#<strong>open_enrollment_contains?</strong>(compare_date)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_enrollment_date_errors-instance_method" title="#open_enrollment_date_errors (instance method)">#<strong>open_enrollment_date_errors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_enrollment_end_on=-instance_method" title="#open_enrollment_end_on= (instance method)">#<strong>open_enrollment_end_on=</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_enrollment_start_on=-instance_method" title="#open_enrollment_start_on= (instance method)">#<strong>open_enrollment_start_on=</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_enrollment_start_period_with_offset-instance_method" title="#open_enrollment_start_period_with_offset (instance method)">#<strong>open_enrollment_start_period_with_offset</strong>(date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#overlapping_published_plan_year%3F-instance_method" title="#overlapping_published_plan_year? (instance method)">#<strong>overlapping_published_plan_year?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#overlapping_published_plan_years-instance_method" title="#overlapping_published_plan_years (instance method)">#<strong>overlapping_published_plan_years</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent-instance_method" title="#parent (instance method)">#<strong>parent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#past_transmission_threshold%3F-instance_method" title="#past_transmission_threshold? (instance method)">#<strong>past_transmission_threshold?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#products_offered_in_service_area-instance_method" title="#products_offered_in_service_area (instance method)">#<strong>products_offered_in_service_area</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ratify_enrollment-instance_method" title="#ratify_enrollment (instance method)">#<strong>ratify_enrollment</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rating_area-instance_method" title="#rating_area (instance method)">#<strong>rating_area</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#revert_employer_profile_application-instance_method" title="#revert_employer_profile_application (instance method)">#<strong>revert_employer_profile_application</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#schedule_employee_terminations-instance_method" title="#schedule_employee_terminations (instance method)">#<strong>schedule_employee_terminations</strong>(terminated_on = TimeKeeper.date_of_record.end_of_month)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#service_area-instance_method" title="#service_area (instance method)">#<strong>service_area</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_termination_date-instance_method" title="#set_termination_date (instance method)">#<strong>set_termination_date</strong>(termination_date = TimeKeeper.date_of_record.end_of_month)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sic_code-instance_method" title="#sic_code (instance method)">#<strong>sic_code</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_on=-instance_method" title="#start_on= (instance method)">#<strong>start_on=</strong>(new_date)  &#x21d2; Object </a>
    

    
      (also: #effective_date=)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate_application-instance_method" title="#terminate_application (instance method)">#<strong>terminate_application</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#total_enrolled_count-instance_method" title="#total_enrolled_count (instance method)">#<strong>total_enrolled_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trigger_passive_renewals-instance_method" title="#trigger_passive_renewals (instance method)">#<strong>trigger_passive_renewals</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_employee_benefit_packages-instance_method" title="#update_employee_benefit_packages (instance method)">#<strong>update_employee_benefit_packages</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#waived-instance_method" title="#waived (instance method)">#<strong>waived</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#waived_count-instance_method" title="#waived_count (instance method)">#<strong>waived_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ModelEvents/PlanYear.html" title="ModelEvents::PlanYear (module)">ModelEvents::PlanYear</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ModelEvents/PlanYear.html#included-class_method" title="ModelEvents::PlanYear.included (method)">included</a></span>, <span class='object_link'><a href="ModelEvents/PlanYear.html#is_transition_matching%3F-instance_method" title="ModelEvents::PlanYear#is_transition_matching? (method)">#is_transition_matching?</a></span>, <span class='object_link'><a href="ModelEvents/PlanYear.html#notify_on_save-instance_method" title="ModelEvents::PlanYear#notify_on_save (method)">#notify_on_save</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SetCurrentUser.html" title="SetCurrentUser (module)">SetCurrentUser</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SetCurrentUser.html#included-class_method" title="SetCurrentUser.included (method)">included</a></span>, <span class='object_link'><a href="SetCurrentUser.html#save_user-instance_method" title="SetCurrentUser#save_user (method)">#save_user</a></span>, <span class='object_link'><a href="SetCurrentUser.html#update_user-instance_method" title="SetCurrentUser#update_user (method)">#update_user</a></span></p>

  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="calculate_open_enrollment_date-class_method">
  
    .<strong>calculate_open_enrollment_date</strong>(start_on)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 787</span>

<span class='kw'>def</span> <span class='id identifier rubyid_calculate_open_enrollment_date'>calculate_open_enrollment_date</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>=</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>

  <span class='comment'># open_enrollment_start_on = [start_on - 1.month, TimeKeeper.date_of_record].max
</span>  <span class='comment'># candidate_open_enrollment_end_on = Date.new(open_enrollment_start_on.year.to_i, open_enrollment_start_on.month.to_i, Settings.aca.shop_market.open_enrollment.monthly_end_on)
</span>
  <span class='comment'># open_enrollment_end_on = if (candidate_open_enrollment_end_on - open_enrollment_start_on) &lt; (Settings.aca.shop_market.open_enrollment.minimum_length.days - 1)
</span>  <span class='comment'>#   candidate_open_enrollment_end_on.next_month
</span>  <span class='comment'># else
</span>  <span class='comment'>#   candidate_open_enrollment_end_on
</span>  <span class='comment'># end
</span>
  <span class='id identifier rubyid_open_enrollment_start_on'>open_enrollment_start_on</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>-</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment'>open_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_maximum_length'>maximum_length</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>

  <span class='comment'>#candidate_open_enrollment_end_on = Date.new(open_enrollment_start_on.year, open_enrollment_start_on.month, Settings.aca.shop_market.open_enrollment.monthly_end_on)
</span>
  <span class='comment'>#open_enrollment_end_on = if (candidate_open_enrollment_end_on - open_enrollment_start_on) &lt; (Settings.aca.shop_market.open_enrollment.minimum_length.days - 1)
</span>  <span class='comment'>#  candidate_open_enrollment_end_on.next_month
</span>  <span class='comment'>#else
</span>  <span class='comment'>#  candidate_open_enrollment_end_on
</span>  <span class='comment'>#end
</span>
  <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span> <span class='op'>=</span> <span class='id identifier rubyid_shop_enrollment_timetable'>shop_enrollment_timetable</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:open_enrollment_latest_end_on</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_binder_payment_due_date'>binder_payment_due_date</span> <span class='op'>=</span> <span class='id identifier rubyid_map_binder_payment_due_date_by_start_on'>map_binder_payment_due_date_by_start_on</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>

  <span class='lbrace'>{</span><span class='label'>open_enrollment_start_on:</span> <span class='id identifier rubyid_open_enrollment_start_on'>open_enrollment_start_on</span><span class='comma'>,</span>
   <span class='label'>open_enrollment_end_on:</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span><span class='comma'>,</span>
   <span class='label'>binder_payment_due_date:</span> <span class='id identifier rubyid_binder_payment_due_date'>binder_payment_due_date</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="calculate_start_on_dates-class_method">
  
    .<strong>calculate_start_on_dates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


774
775
776
777
778
779
780
781</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 774</span>

<span class='kw'>def</span> <span class='id identifier rubyid_calculate_start_on_dates'>calculate_start_on_dates</span>
  <span class='comment'># Today - 5 + 2.months).beginning_of_month
</span>  <span class='comment'># July 6 =&gt; Sept 1
</span>  <span class='comment'># July 1 =&gt; Aug 1
</span>  <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>-</span> <span class='const'><span class='object_link'><a href="HbxProfile.html" title="HbxProfile (class)">HbxProfile</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxProfile.html#ShopOpenEnrollmentBeginDueDayOfMonth-constant" title="HbxProfile::ShopOpenEnrollmentBeginDueDayOfMonth (constant)">ShopOpenEnrollmentBeginDueDayOfMonth</a></span></span> <span class='op'>+</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment'>open_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_maximum_length'>maximum_length</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span>
  <span class='id identifier rubyid_end_on'>end_on</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>-</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_earliest_start_prior_to_effective_on'>earliest_start_prior_to_effective_on</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span> <span class='op'>-</span> <span class='id identifier rubyid_enrollment_shopping_start_day_offset'>enrollment_shopping_start_day_offset</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span>
  <span class='id identifier rubyid_dates'>dates</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='op'>..</span><span class='id identifier rubyid_end_on'>end_on</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_t'>t</span> <span class='op'>==</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="calculate_start_on_options-class_method">
  
    .<strong>calculate_start_on_options</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


783
784
785</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 783</span>

<span class='kw'>def</span> <span class='id identifier rubyid_calculate_start_on_options'>calculate_start_on_options</span>
  <span class='id identifier rubyid_calculate_start_on_dates'>calculate_start_on_dates</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_date'>date</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%B %Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='symbol'>:db</span><span class='rparen'>)</span> <span class='rbracket'>]</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_start_on-class_method">
  
    .<strong>check_start_on</strong>(start_on)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


760
761
762
763
764
765
766
767
768
769
770
771
772</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 760</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_start_on'>check_start_on</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>=</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
  <span class='id identifier rubyid_shop_enrollment_times'>shop_enrollment_times</span> <span class='op'>=</span> <span class='id identifier rubyid_shop_enrollment_timetable'>shop_enrollment_timetable</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span> <span class='op'>!=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>failure</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>start on must be first day of the month</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>&gt;</span> <span class='id identifier rubyid_shop_enrollment_times'>shop_enrollment_times</span><span class='lbracket'>[</span><span class='symbol'>:open_enrollment_latest_start_on</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>failure</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must choose a start on date </span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>-</span> <span class='const'><span class='object_link'><a href="HbxProfile.html" title="HbxProfile (class)">HbxProfile</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxProfile.html#ShopOpenEnrollmentBeginDueDayOfMonth-constant" title="HbxProfile::ShopOpenEnrollmentBeginDueDayOfMonth (constant)">ShopOpenEnrollmentBeginDueDayOfMonth</a></span></span> <span class='op'>+</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment'>open_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_maximum_length'>maximum_length</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span><span class='embexpr_end'>}</span><span class='tstring_content'> or later</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='lbrace'>{</span><span class='label'>result:</span> <span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ok</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>msg:</span> <span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrollment_quiet_period-class_method">
  
    .<strong>enrollment_quiet_period</strong>(start_on:, open_enrollment_end_on: nil, is_renewing: false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


297
298
299
300
301
302
303
304
305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 297</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_enrollment_quiet_period'>enrollment_quiet_period</span><span class='lparen'>(</span><span class='label'>start_on:</span><span class='comma'>,</span> <span class='label'>open_enrollment_end_on:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>is_renewing:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_prev_month'>prev_month</span> <span class='op'>=</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_prev_month'>prev_month</span>
    <span class='id identifier rubyid_quiet_period_start'>quiet_period_start</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_prev_month'>prev_month</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_prev_month'>prev_month</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='comma'>,</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment'>open_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_monthly_end_on'>monthly_end_on</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_quiet_period_start'>quiet_period_start</span> <span class='op'>=</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span> <span class='op'>+</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_quiet_period_end'>quiet_period_end</span> <span class='op'>=</span> <span class='id identifier rubyid_is_renewing'>is_renewing</span> <span class='op'>?</span> <span class='id identifier rubyid_renewal_quiet_period_end'>renewal_quiet_period_end</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_initial_quiet_period_end'>initial_quiet_period_end</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_start_of_exchange_day_from_utc'><span class='object_link'><a href="TimeKeeper.html#start_of_exchange_day_from_utc-class_method" title="TimeKeeper.start_of_exchange_day_from_utc (method)">start_of_exchange_day_from_utc</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_quiet_period_start'>quiet_period_start</span><span class='rparen'>)</span><span class='op'>..</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_end_of_exchange_day_from_utc'><span class='object_link'><a href="TimeKeeper.html#end_of_exchange_day_from_utc-class_method" title="TimeKeeper.end_of_exchange_day_from_utc (method)">end_of_exchange_day_from_utc</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_quiet_period_end'>quiet_period_end</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find-class_method">
  
    .<strong>find</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


723
724
725
726</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 723</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_organizations'>organizations</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>employer_profile.plan_years._id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='const'>BSON</span><span class='op'>::</span><span class='const'>ObjectId</span><span class='period'>.</span><span class='id identifier rubyid_from_string'>from_string</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_organizations'>organizations</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='id identifier rubyid_organizations'>organizations</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_unscoped'>unscoped</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_py'>py</span><span class='op'>|</span> <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid__id'>_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first_banking_date_after-class_method">
  
    .<strong>first_banking_date_after</strong>(date_value)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


848
849
850
851
852
853</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 848</span>

<span class='kw'>def</span> <span class='id identifier rubyid_first_banking_date_after'>first_banking_date_after</span><span class='lparen'>(</span><span class='id identifier rubyid_date_value'>date_value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_date_value'>date_value</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
  <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_date'>date</span> <span class='op'>+</span> <span class='int'>2</span> <span class='kw'>if</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_saturday?'>saturday?</span>
  <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_date'>date</span> <span class='op'>+</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_sunday?'>sunday?</span>
  <span class='id identifier rubyid_date'>date</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first_banking_date_prior-class_method">
  
    .<strong>first_banking_date_prior</strong>(date_value)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>TODO - add holidays</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


841
842
843
844
845
846</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 841</span>

<span class='kw'>def</span> <span class='id identifier rubyid_first_banking_date_prior'>first_banking_date_prior</span><span class='lparen'>(</span><span class='id identifier rubyid_date_value'>date_value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_date_value'>date_value</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
  <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_date'>date</span> <span class='op'>-</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_saturday?'>saturday?</span>
  <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_date'>date</span> <span class='op'>-</span> <span class='int'>2</span> <span class='kw'>if</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_sunday?'>sunday?</span>
  <span class='id identifier rubyid_date'>date</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="initial_quiet_period_end-class_method">
  
    .<strong>initial_quiet_period_end</strong>(start_on)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 309</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_initial_quiet_period_end'>initial_quiet_period_end</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_quiet_period'>quiet_period</span><span class='period'>.</span><span class='id identifier rubyid_month_offset'>month_offset</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_quiet_period'>quiet_period</span><span class='period'>.</span><span class='id identifier rubyid_mday'>mday</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="map_binder_payment_due_date_by_start_on-class_method">
  
    .<strong>map_binder_payment_due_date_by_start_on</strong>(start_on)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 818</span>

<span class='kw'>def</span> <span class='id identifier rubyid_map_binder_payment_due_date_by_start_on'>map_binder_payment_due_date_by_start_on</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
  <span class='comment'>#list of bank holidays.
</span>  <span class='id identifier rubyid_event_arr'>event_arr</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>New Year&#39;s Day</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_schedule_time'>schedule_time</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='int'>01</span><span class='comma'>,</span> <span class='int'>01</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Martin birthday</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_nth_wday'>nth_wday</span><span class='lparen'>(</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>President&#39;s Day</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_nth_wday'>nth_wday</span><span class='lparen'>(</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memorial Day</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_last_monday_may'>last_monday_may</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>31</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Labor day</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_nth_wday'>nth_wday</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Columbus Day</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_nth_wday'>nth_wday</span><span class='lparen'>(</span><span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Veterans Day</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_schedule_time'>schedule_time</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='int'>11</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Thanksgiving Day</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_nth_wday'>nth_wday</span><span class='lparen'>(</span><span class='int'>4</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Christmas Day</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_schedule_time'>schedule_time</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='int'>12</span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Independence Day</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>event_date:</span> <span class='id identifier rubyid_schedule_time'>schedule_time</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='int'>07</span><span class='comma'>,</span> <span class='int'>04</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_event_date_arr'>event_date_arr</span> <span class='op'>=</span> <span class='id identifier rubyid_event_arr'>event_arr</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_hsh'>hsh</span><span class='op'>|</span> <span class='id identifier rubyid_schedule_time'>schedule_time</span><span class='lparen'>(</span><span class='id identifier rubyid_hsh'>hsh</span><span class='lbracket'>[</span><span class='symbol'>:event_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_due_day'>due_day</span> <span class='op'>=</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_binder_payment_due_on'>binder_payment_due_on</span>
  <span class='id identifier rubyid_dates_map'>dates_map</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_month'>month</span> <span class='op'>=</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_month'>month</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_year'>year</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_month'>month</span> <span class='op'>==</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_month'>month</span> <span class='op'>=</span> <span class='int'>12</span>
    <span class='id identifier rubyid_year'>year</span> <span class='op'>-=</span><span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_to_date'>to_date</span> <span class='op'>=</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_prev_month'>prev_month</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_binder_payment_due_on'>binder_payment_due_on</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span> <span class='op'>-</span> <span class='int'>1</span>
  <span class='kw'>while</span> <span class='lparen'>(</span><span class='id identifier rubyid_event_date_arr'>event_date_arr</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_to_date'>to_date</span><span class='rparen'>)</span> <span class='kw'>or</span> <span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span> <span class='op'>==</span> <span class='int'>6</span> <span class='kw'>or</span> <span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span> <span class='op'>==</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_to_date'>to_date</span> <span class='op'>=</span> <span class='id identifier rubyid_to_date'>to_date</span><span class='op'>+</span><span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span> <span class='comment'>#If to_date is in holidays arr, we are adding +1 day
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_dates_map'>dates_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_to_date'>to_date</span>
  <span class='id identifier rubyid_dates_map'>dates_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rbracket'>]</span>  <span class='op'>||</span> <span class='id identifier rubyid_shop_enrollment_timetable'>shop_enrollment_timetable</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:binder_payment_due_date</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open_enrollment_start_period_with_offset-class_method">
  
    .<strong>open_enrollment_start_period_with_offset</strong>(date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


855
856
857</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 855</span>

<span class='kw'>def</span> <span class='id identifier rubyid_open_enrollment_start_period_with_offset'>open_enrollment_start_period_with_offset</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_date'>date</span> <span class='op'>-</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_earliest_start_prior_to_effective_on'>earliest_start_prior_to_effective_on</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span> <span class='op'>+</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_earliest_start_prior_to_effective_on'>earliest_start_prior_to_effective_on</span><span class='period'>.</span><span class='id identifier rubyid_day_of_month'>day_of_month</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="renewal_quiet_period_end-class_method">
  
    .<strong>renewal_quiet_period_end</strong>(start_on)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


313
314
315</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 313</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_renewal_quiet_period_end'>renewal_quiet_period_end</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_renewal_application'>renewal_application</span><span class='period'>.</span><span class='id identifier rubyid_quiet_period'>quiet_period</span><span class='period'>.</span><span class='id identifier rubyid_month_offset'>month_offset</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_renewal_application'>renewal_application</span><span class='period'>.</span><span class='id identifier rubyid_quiet_period'>quiet_period</span><span class='period'>.</span><span class='id identifier rubyid_mday'>mday</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shop_enrollment_timetable-class_method">
  
    .<strong>shop_enrollment_timetable</strong>(new_effective_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 728</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shop_enrollment_timetable'>shop_enrollment_timetable</span><span class='lparen'>(</span><span class='id identifier rubyid_new_effective_date'>new_effective_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_effective_date'>effective_date</span> <span class='op'>=</span> <span class='id identifier rubyid_new_effective_date'>new_effective_date</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span>
  <span class='id identifier rubyid_prior_month'>prior_month</span> <span class='op'>=</span> <span class='id identifier rubyid_effective_date'>effective_date</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span>
  <span class='id identifier rubyid_plan_year_start_on'>plan_year_start_on</span> <span class='op'>=</span> <span class='id identifier rubyid_effective_date'>effective_date</span>
  <span class='id identifier rubyid_plan_year_end_on'>plan_year_end_on</span> <span class='op'>=</span> <span class='id identifier rubyid_effective_date'>effective_date</span> <span class='op'>+</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span>
  <span class='id identifier rubyid_employer_initial_application_earliest_start_on'>employer_initial_application_earliest_start_on</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_effective_date'>effective_date</span> <span class='op'>+</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_earliest_start_prior_to_effective_on'>earliest_start_prior_to_effective_on</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span> <span class='op'>+</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_earliest_start_prior_to_effective_on'>earliest_start_prior_to_effective_on</span><span class='period'>.</span><span class='id identifier rubyid_day_of_month'>day_of_month</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_employer_initial_application_earliest_submit_on'>employer_initial_application_earliest_submit_on</span> <span class='op'>=</span> <span class='id identifier rubyid_employer_initial_application_earliest_start_on'>employer_initial_application_earliest_start_on</span>
  <span class='id identifier rubyid_employer_initial_application_latest_submit_on'>employer_initial_application_latest_submit_on</span>   <span class='op'>=</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="HbxProfile.html" title="HbxProfile (class)">HbxProfile</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxProfile.html#ShopPlanYearPublishedDueDayOfMonth-constant" title="HbxProfile::ShopPlanYearPublishedDueDayOfMonth (constant)">ShopPlanYearPublishedDueDayOfMonth</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
  <span class='id identifier rubyid_open_enrollment_earliest_start_on'>open_enrollment_earliest_start_on</span>     <span class='op'>=</span> <span class='id identifier rubyid_effective_date'>effective_date</span> <span class='op'>-</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment'>open_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_maximum_length'>maximum_length</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span>
  <span class='id identifier rubyid_open_enrollment_latest_start_on'>open_enrollment_latest_start_on</span>       <span class='op'>=</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="HbxProfile.html" title="HbxProfile (class)">HbxProfile</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxProfile.html#ShopOpenEnrollmentBeginDueDayOfMonth-constant" title="HbxProfile::ShopOpenEnrollmentBeginDueDayOfMonth (constant)">ShopOpenEnrollmentBeginDueDayOfMonth</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
  <span class='id identifier rubyid_open_enrollment_latest_end_on'>open_enrollment_latest_end_on</span>         <span class='op'>=</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="PlanYear (class)">PlanYear</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shop_market_open_enrollment_monthly_end_on'>shop_market_open_enrollment_monthly_end_on</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
  <span class='id identifier rubyid_binder_payment_due_date'>binder_payment_due_date</span>               <span class='op'>=</span> <span class='id identifier rubyid_first_banking_date_prior'>first_banking_date_prior</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="PlanYear (class)">PlanYear</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shop_market_binder_payment_due_on'>shop_market_binder_payment_due_on</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_advertised_due_date_of_month'>advertised_due_date_of_month</span>          <span class='op'>=</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prior_month'>prior_month</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="HbxProfile.html" title="HbxProfile (class)">HbxProfile</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxProfile.html#ShopOpenEnrollmentAdvBeginDueDayOfMonth-constant" title="HbxProfile::ShopOpenEnrollmentAdvBeginDueDayOfMonth (constant)">ShopOpenEnrollmentAdvBeginDueDayOfMonth</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>


  <span class='id identifier rubyid_timetable'>timetable</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>effective_date:</span> <span class='id identifier rubyid_effective_date'>effective_date</span><span class='comma'>,</span>
    <span class='label'>plan_year_start_on:</span> <span class='id identifier rubyid_plan_year_start_on'>plan_year_start_on</span><span class='comma'>,</span>
    <span class='label'>plan_year_end_on:</span> <span class='id identifier rubyid_plan_year_end_on'>plan_year_end_on</span><span class='comma'>,</span>
    <span class='label'>employer_initial_application_earliest_start_on:</span> <span class='id identifier rubyid_employer_initial_application_earliest_start_on'>employer_initial_application_earliest_start_on</span><span class='comma'>,</span>
    <span class='label'>employer_initial_application_earliest_submit_on:</span> <span class='id identifier rubyid_employer_initial_application_earliest_submit_on'>employer_initial_application_earliest_submit_on</span><span class='comma'>,</span>
    <span class='label'>employer_initial_application_latest_submit_on:</span> <span class='id identifier rubyid_employer_initial_application_latest_submit_on'>employer_initial_application_latest_submit_on</span><span class='comma'>,</span>
    <span class='label'>open_enrollment_earliest_start_on:</span> <span class='id identifier rubyid_open_enrollment_earliest_start_on'>open_enrollment_earliest_start_on</span><span class='comma'>,</span>
    <span class='label'>open_enrollment_latest_start_on:</span> <span class='id identifier rubyid_open_enrollment_latest_start_on'>open_enrollment_latest_start_on</span><span class='comma'>,</span>
    <span class='label'>open_enrollment_latest_end_on:</span> <span class='id identifier rubyid_open_enrollment_latest_end_on'>open_enrollment_latest_end_on</span><span class='comma'>,</span>
    <span class='label'>binder_payment_due_date:</span> <span class='id identifier rubyid_binder_payment_due_date'>binder_payment_due_date</span><span class='comma'>,</span>
    <span class='label'>advertised_due_date_of_month:</span> <span class='id identifier rubyid_advertised_due_date_of_month'>advertised_due_date_of_month</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_timetable'>timetable</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="accept_application-instance_method">
  
    #<strong>accept_application</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1089
1090
1091
1092</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1089</span>

<span class='kw'>def</span> <span class='id identifier rubyid_accept_application'>accept_application</span>
  <span class='id identifier rubyid_adjust_open_enrollment_date'>adjust_open_enrollment_date</span>
  <span class='id identifier rubyid_transition_success'>transition_success</span> <span class='op'>=</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_application_accepted!'>application_accepted!</span> <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_may_application_accepted?'>may_application_accepted?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="additional_required_participants_count-instance_method">
  
    #<strong>additional_required_participants_count</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


665
666
667
668
669
670
671</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 665</span>

<span class='kw'>def</span> <span class='id identifier rubyid_additional_required_participants_count'>additional_required_participants_count</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_total_enrolled_count'>total_enrolled_count</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_minimum_enrolled_count'>minimum_enrolled_count</span>
    <span class='id identifier rubyid_minimum_enrolled_count'>minimum_enrolled_count</span> <span class='op'>-</span> <span class='id identifier rubyid_total_enrolled_count'>total_enrolled_count</span>
  <span class='kw'>else</span>
    <span class='float'>0.0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="adjust_open_enrollment_date-instance_method">
  
    #<strong>adjust_open_enrollment_date</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1052
1053
1054
1055
1056</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1052</span>

<span class='kw'>def</span> <span class='id identifier rubyid_adjust_open_enrollment_date'>adjust_open_enrollment_date</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>&gt;</span> <span class='id identifier rubyid_open_enrollment_start_on'>open_enrollment_start_on</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>&lt;</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span>
    <span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='symbol'>:open_enrollment_start_on</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="application_eligibility_warnings-instance_method">
  
    #<strong>application_eligibility_warnings</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Check plan year application for regulatory compliance</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 515</span>

<span class='kw'>def</span> <span class='id identifier rubyid_application_eligibility_warnings'>application_eligibility_warnings</span>
  <span class='id identifier rubyid_warnings'>warnings</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_employer_attestation_is_enabled?'>employer_attestation_is_enabled?</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_attestation_eligible?'>is_attestation_eligible?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_employer_attestation'>employer_attestation</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>||</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_employer_attestation'>employer_attestation</span><span class='period'>.</span><span class='id identifier rubyid_unsubmitted?'>unsubmitted?</span>
        <span class='id identifier rubyid_warnings'>warnings</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>attestation_ineligible:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Employer attestation documentation not provided. Select &lt;a href=/employers/employer_profiles/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>?tab=documents&gt;Documents&lt;/a&gt; on the blue menu to the left and follow the instructions to upload your documents.</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_employer_attestation'>employer_attestation</span><span class='period'>.</span><span class='id identifier rubyid_denied?'>denied?</span>
        <span class='id identifier rubyid_warnings'>warnings</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>attestation_ineligible:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Employer attestation documentation was denied. This employer not eligible to enroll on the </span><span class='embexpr_beg'>#{</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_long_name'>long_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_warnings'>warnings</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>attestation_ineligible:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Employer attestation error occurred: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_employer_attestation'>employer_attestation</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_humanize'>humanize</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Please contact customer service.</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_primary_office_local?'>is_primary_office_local?</span>
    <span class='id identifier rubyid_warnings'>warnings</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>primary_office_location:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Is a small business located in </span><span class='embexpr_beg'>#{</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_state_name'>state_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Application is in ineligible state from prior enrollment activity
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_aasm_state'>aasm_state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application_ineligible</span><span class='tstring_end'>&quot;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_aasm_state'>aasm_state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renewing_application_ineligible</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_warnings'>warnings</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>ineligible:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Application did not meet eligibility requirements for enrollment</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Maximum company size at time of initial registration on the HBX
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_fte_count'>fte_count</span> <span class='op'>&lt;</span> <span class='int'>1</span> <span class='op'>||</span> <span class='id identifier rubyid_fte_count'>fte_count</span> <span class='op'>&gt;</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_small_market_employee_count_maximum'>small_market_employee_count_maximum</span>
    <span class='id identifier rubyid_warnings'>warnings</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='label'>fte_count:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Has 1 -</span><span class='embexpr_beg'>#{</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_small_market_employee_count_maximum'>small_market_employee_count_maximum</span><span class='embexpr_end'>}</span><span class='tstring_content'> full time equivalent employees</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Exclude Jan 1 effective date from certain checks
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_effective_date'>effective_date</span><span class='period'>.</span><span class='id identifier rubyid_yday'>yday</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='comment'># Employer contribution toward employee premium must meet minimum
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_minimum_employer_contribution'>minimum_employer_contribution</span> <span class='op'>&lt;</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_employer_contribution_percent_minimum'>employer_contribution_percent_minimum</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_warnings'>warnings</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='label'>minimum_employer_contribution:</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Employer contribution percent toward employee premium (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_minimum_employer_contribution'>minimum_employer_contribution</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>%) is less than minimum allowed (</span><span class='embexpr_beg'>#{</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_employer_contribution_percent_minimum'>employer_contribution_percent_minimum</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>%)</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_warnings'>warnings</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="application_errors-instance_method">
  
    #<strong>application_errors</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Check plan year for violations of model integrity relative to publishing</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 476</span>

<span class='kw'>def</span> <span class='id identifier rubyid_application_errors'>application_errors</span>
  <span class='id identifier rubyid_errors'>errors</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span> <span class='op'>&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_open_enrollment_start_on'>open_enrollment_start_on</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment'>open_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_maximum_length'>maximum_length</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_log_message'>log_message</span><span class='lparen'>(</span><span class='id identifier rubyid_errors'>errors</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='lbrace'>{</span><span class='label'>open_enrollment_period:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Open Enrollment period is longer than maximum (</span><span class='embexpr_beg'>#{</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment'>open_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_maximum_length'>maximum_length</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='embexpr_end'>}</span><span class='tstring_content'> months)</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_bg'>bg</span><span class='op'>|</span> <span class='id identifier rubyid_bg'>bg</span><span class='period'>.</span><span class='id identifier rubyid_reference_plan_id'>reference_plan_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_log_message'>log_message</span><span class='lparen'>(</span><span class='id identifier rubyid_errors'>errors</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='lbrace'>{</span><span class='label'>benefit_groups:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Reference plans have not been selected for benefit groups. Please edit the plan year and select reference plans.</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_log_message'>log_message</span><span class='lparen'>(</span><span class='id identifier rubyid_errors'>errors</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='lbrace'>{</span><span class='label'>benefit_groups:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You must create at least one benefit group to publish a plan year</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_census_employees'>census_employees</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span> <span class='op'>!=</span> <span class='id identifier rubyid_assigned_census_employees'>assigned_census_employees</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>
    <span class='id identifier rubyid_log_message'>log_message</span><span class='lparen'>(</span><span class='id identifier rubyid_errors'>errors</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='lbrace'>{</span><span class='label'>benefit_groups:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Every employee must be assigned to a benefit group defined for the published plan year</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_ineligible?'>ineligible?</span>
    <span class='id identifier rubyid_log_message'>log_message</span><span class='lparen'>(</span><span class='id identifier rubyid_errors'>errors</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='lbrace'>{</span><span class='label'>employer_profile:</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This employer is ineligible to enroll for coverage at this time</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_overlapping_published_plan_year?'>overlapping_published_plan_year?</span>
    <span class='id identifier rubyid_log_message'>log_message</span><span class='lparen'>(</span><span class='id identifier rubyid_errors'>errors</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='lbrace'>{</span> <span class='label'>publish:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You may only have one published plan year at a time</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_publish_date_valid?'>is_publish_date_valid?</span>
    <span class='id identifier rubyid_log_message'>log_message</span><span class='lparen'>(</span><span class='id identifier rubyid_errors'>errors</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='lbrace'>{</span><span class='label'>publish:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Plan year starting on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%m-%d-%Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> must be published by </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_due_date_for_publish'>due_date_for_publish</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%m-%d-%Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_errors'>errors</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="application_warnings-instance_method">
  
    #<strong>application_warnings</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


716
717
718
719
720</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 716</span>

<span class='kw'>def</span> <span class='id identifier rubyid_application_warnings'>application_warnings</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_application_eligible?'>is_application_eligible?</span>
    <span class='id identifier rubyid_application_eligibility_warnings'>application_eligibility_warnings</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assigned_census_employees-instance_method">
  
    #<strong>assigned_census_employees</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


416
417
418</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 416</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigned_census_employees'>assigned_census_employees</span>
  <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='op'>|</span> <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_census_employees'>census_employees</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assigned_census_employees_without_owner-instance_method">
  
    #<strong>assigned_census_employees_without_owner</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


420
421
422</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 420</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigned_census_employees_without_owner'>assigned_census_employees_without_owner</span>
  <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='op'>|</span> <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_census_employees'>census_employees</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_non_business_owner'>non_business_owner</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="benefit_group_ids-instance_method">
  
    #<strong>benefit_group_ids</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


590
591
592</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 590</span>

<span class='kw'>def</span> <span class='id identifier rubyid_benefit_group_ids'>benefit_group_ids</span>
  <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="binder_paid?-instance_method">
  
    #<strong>binder_paid?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 230</span>

<span class='kw'>def</span> <span class='id identifier rubyid_binder_paid?'>binder_paid?</span>
  <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_binder_paid?'>binder_paid?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="calc_active_health_assignments_for-instance_method">
  
    #<strong>calc_active_health_assignments_for</strong>(employee_pool)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 625</span>

<span class='kw'>def</span> <span class='id identifier rubyid_calc_active_health_assignments_for'>calc_active_health_assignments_for</span><span class='lparen'>(</span><span class='id identifier rubyid_employee_pool'>employee_pool</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_benefit_group_ids'>benefit_group_ids</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_candidate_benefit_group_assignments'>candidate_benefit_group_assignments</span> <span class='op'>=</span> <span class='id identifier rubyid_employee_pool'>employee_pool</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ce'>ce</span><span class='op'>|</span>
    <span class='id identifier rubyid_bg_assignment'>bg_assignment</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_bg_assignment'>bg_assignment</span> <span class='op'>=</span> <span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_active_benefit_group_assignment'>active_benefit_group_assignment</span> <span class='kw'>if</span> <span class='id identifier rubyid_benefit_group_ids'>benefit_group_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_active_benefit_group_assignment'>active_benefit_group_assignment</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:benefit_group_id</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_bg_assignment'>bg_assignment</span> <span class='op'>=</span> <span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_renewal_benefit_group_assignment'>renewal_benefit_group_assignment</span> <span class='kw'>if</span> <span class='id identifier rubyid_benefit_group_ids'>benefit_group_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_renewal_benefit_group_assignment'>renewal_benefit_group_assignment</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:benefit_group_id</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_bg_assignment'>bg_assignment</span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='id identifier rubyid_ce'>ce</span><span class='comma'>,</span> <span class='id identifier rubyid_bg_assignment'>bg_assignment</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_benefit_group_assignment_pairs'>benefit_group_assignment_pairs</span> <span class='op'>=</span> <span class='id identifier rubyid_candidate_benefit_group_assignments'>candidate_benefit_group_assignments</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='id identifier rubyid_benefit_group_assignment_ids'>benefit_group_assignment_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_benefit_group_assignment_pairs'>benefit_group_assignment_pairs</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bgap'>bgap</span><span class='op'>|</span>
    <span class='id identifier rubyid_bgap'>bgap</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid__id'>_id</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_enrolled_benefit_group_assignment_ids'>enrolled_benefit_group_assignment_ids</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='period'>.</span><span class='id identifier rubyid_enrolled_shop_health_benefit_group_ids'><span class='object_link'><a href="HbxEnrollment.html#enrolled_shop_health_benefit_group_ids-class_method" title="HbxEnrollment.enrolled_shop_health_benefit_group_ids (method)">enrolled_shop_health_benefit_group_ids</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_benefit_group_assignment_ids'>benefit_group_assignment_ids</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_have_shop_health_bgap'>have_shop_health_bgap</span> <span class='op'>=</span> <span class='id identifier rubyid_benefit_group_assignment_pairs'>benefit_group_assignment_pairs</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bgap'>bgap</span><span class='op'>|</span>
    <span class='id identifier rubyid_enrolled_benefit_group_assignment_ids'>enrolled_benefit_group_assignment_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_bgap'>bgap</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_have_shop_health_bgap'>have_shop_health_bgap</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:first</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_be_migrated?-instance_method">
  
    #<strong>can_be_migrated?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='external_plan_year?-instance_method'>external_plan_year?</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Checks for external plan year</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1128
1129
1130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1128</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_be_migrated?'>can_be_migrated?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_conversion?'>is_conversion?</span> <span class='op'>&amp;&amp;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_conversion'>is_conversion</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cancel_application-instance_method">
  
    #<strong>cancel_application</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1074
1075
1076
1077</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1074</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cancel_application'>cancel_application</span>
  <span class='id identifier rubyid_cancel_employee_enrollments'>cancel_employee_enrollments</span>
  <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_benefit_canceled!'>benefit_canceled!</span> <span class='kw'>if</span> <span class='id identifier rubyid_canceled?'>canceled?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_may_benefit_canceled?'>may_benefit_canceled?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cancel_employee_enrollments-instance_method">
  
    #<strong>cancel_employee_enrollments</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1079
1080
1081
1082
1083
1084
1085
1086
1087</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1079</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cancel_employee_enrollments'>cancel_employee_enrollments</span>
  <span class='id identifier rubyid_id_list'>id_list</span> <span class='op'>=</span> <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_families'>families</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Family.html" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:households.hbx_enrollments.benefit_group_id</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id_list'>id_list</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_families'>families</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_family'>family</span><span class='op'>|</span>
    <span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:benefit_group_id</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id_list'>id_list</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_non_expired_and_non_terminated'>non_expired_and_non_terminated</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_en'>en</span><span class='op'>|</span>
      <span class='id identifier rubyid_en'>en</span><span class='period'>.</span><span class='id identifier rubyid_cancel_coverage!'>cancel_coverage!</span> <span class='kw'>if</span> <span class='id identifier rubyid_en'>en</span><span class='period'>.</span><span class='id identifier rubyid_may_cancel_coverage?'>may_cancel_coverage?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cancel_enrollments-instance_method">
  
    #<strong>cancel_enrollments</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1033
1034
1035
1036
1037</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1033</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cancel_enrollments'>cancel_enrollments</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enrollment'>enrollment</span><span class='op'>|</span>
    <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_cancel_coverage!'>cancel_coverage!</span> <span class='kw'>if</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_may_cancel_coverage?'>may_cancel_coverage?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="carriers_offered-instance_method">
  
    #<strong>carriers_offered</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


383
384
385
386
387</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 383</span>

<span class='kw'>def</span> <span class='id identifier rubyid_carriers_offered'>carriers_offered</span>
  <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_carriers'>carriers</span><span class='comma'>,</span> <span class='id identifier rubyid_bg'>bg</span><span class='op'>|</span>
    <span class='id identifier rubyid_carriers'>carriers</span> <span class='op'>+=</span> <span class='id identifier rubyid_bg'>bg</span><span class='period'>.</span><span class='id identifier rubyid_carriers_offered'>carriers_offered</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="coverage_period_contains?-instance_method">
  
    #<strong>coverage_period_contains?</strong>(compare_date)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


361
362
363
364
365</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 361</span>

<span class='kw'>def</span> <span class='id identifier rubyid_coverage_period_contains?'>coverage_period_contains?</span><span class='lparen'>(</span><span class='id identifier rubyid_compare_date'>compare_date</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_compare_date'>compare_date</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_end_on'>end_on</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_compare_date'>compare_date</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_compare_date'>compare_date</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_end_on'>end_on</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="covered-instance_method">
  
    #<strong>covered</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


576
577
578
579</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 576</span>

<span class='kw'>def</span> <span class='id identifier rubyid_covered'>covered</span>
  <span class='kw'>return</span> <span class='ivar'>@covered</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@covered</span>
  <span class='ivar'>@covered</span> <span class='op'>||=</span> <span class='id identifier rubyid_find_census_employees'>find_census_employees</span><span class='period'>.</span><span class='id identifier rubyid_covered'>covered</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="covered_count-instance_method">
  
    #<strong>covered_count</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


586
587
588</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 586</span>

<span class='kw'>def</span> <span class='id identifier rubyid_covered_count'>covered_count</span>
  <span class='id identifier rubyid_covered'>covered</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="decline_application-instance_method">
  
    #<strong>decline_application</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1094
1095
1096</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1094</span>

<span class='kw'>def</span> <span class='id identifier rubyid_decline_application'>decline_application</span>
  <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_application_declined!'>application_declined!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_benefit_group-instance_method">
  
    #<strong>default_benefit_group</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


375
376
377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 375</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_benefit_group'>default_benefit_group</span>
  <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:default</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_renewal_benefit_group-instance_method">
  
    #<strong>default_renewal_benefit_group</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


396
397
398</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 396</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_renewal_benefit_group'>default_renewal_benefit_group</span>
  <span class='comment'># benefit_groups.detect { |bg| bg.is_default? &amp;&amp; is_coverage_renewing? }
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dental_carriers_offered-instance_method">
  
    #<strong>dental_carriers_offered</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


389
390
391
392
393
394</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 389</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dental_carriers_offered'>dental_carriers_offered</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_is_offering_dental?'>is_offering_dental?</span>
  <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_carriers'>carriers</span><span class='comma'>,</span> <span class='id identifier rubyid_bg'>bg</span><span class='op'>|</span>
    <span class='id identifier rubyid_carriers'>carriers</span> <span class='op'>+=</span> <span class='id identifier rubyid_bg'>bg</span><span class='period'>.</span><span class='id identifier rubyid_dental_carriers_offered'>dental_carriers_offered</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deny_enrollment-instance_method">
  
    #<strong>deny_enrollment</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1102
1103
1104
1105
1106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deny_enrollment'>deny_enrollment</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_may_enrollment_denied?'>may_enrollment_denied?</span>
    <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_enrollment_denied!'>enrollment_denied!</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="due_date_for_publish-instance_method">
  
    #<strong>due_date_for_publish</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


440
441
442
443
444
445
446</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 440</span>

<span class='kw'>def</span> <span class='id identifier rubyid_due_date_for_publish'>due_date_for_publish</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_renewing'>renewing</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_prev_month'>prev_month</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_prev_month'>prev_month</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="" title="PlanYear (class)">PlanYear</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shop_market_renewal_application_publish_due_day_of_month'>shop_market_renewal_application_publish_due_day_of_month</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_prev_month'>prev_month</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_prev_month'>prev_month</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="" title="PlanYear (class)">PlanYear</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shop_market_initial_application_publish_due_day_of_month'>shop_market_initial_application_publish_due_day_of_month</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="editable?-instance_method">
  
    #<strong>editable?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 352</span>

<span class='kw'>def</span> <span class='id identifier rubyid_editable?'>editable?</span>
  <span class='op'>!</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:assigned?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="eligible_for_export?-instance_method">
  
    #<strong>eligible_for_export?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 241</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eligible_for_export?'>eligible_for_export?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_conversion'>is_conversion</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='kw'>return</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="#INELIGIBLE_FOR_EXPORT_STATES-constant" title="PlanYear::INELIGIBLE_FOR_EXPORT_STATES (constant)">INELIGIBLE_FOR_EXPORT_STATES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>&lt;</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_enrolled?'>enrolled?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_open_enrollment_completed?'>open_enrollment_completed?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_binder_paid?'>binder_paid?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_past_transmission_threshold?'>past_transmission_threshold?</span>
        <span class='kw'>return</span> <span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_renewing_enrolled?'>renewing_enrolled?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_open_enrollment_completed?'>open_enrollment_completed?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_past_transmission_threshold?'>past_transmission_threshold?</span>
        <span class='kw'>return</span> <span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="eligible_to_enroll-instance_method">
  
    #<strong>eligible_to_enroll</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>All active employees present on the roster with benefit groups belonging to
this plan year</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


562
563
564
565</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 562</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eligible_to_enroll'>eligible_to_enroll</span>
  <span class='kw'>return</span> <span class='ivar'>@eligible</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@eligible</span>
  <span class='ivar'>@eligible</span> <span class='op'>||=</span> <span class='id identifier rubyid_find_census_employees'>find_census_employees</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="eligible_to_enroll_count-instance_method">
  
    #<strong>eligible_to_enroll_count</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


594
595
596</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 594</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span>
  <span class='id identifier rubyid_eligible_to_enroll'>eligible_to_enroll</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="employee_participation_percent-instance_method">
  
    #<strong>employee_participation_percent</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


338
339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 338</span>

<span class='kw'>def</span> <span class='id identifier rubyid_employee_participation_percent'>employee_participation_percent</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_total_enrolled_count'>total_enrolled_count</span> <span class='op'>/</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='int'>100</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>%</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="employee_participation_percent_based_on_summary-instance_method">
  
    #<strong>employee_participation_percent_based_on_summary</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 343</span>

<span class='kw'>def</span> <span class='id identifier rubyid_employee_participation_percent_based_on_summary'>employee_participation_percent_based_on_summary</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_enrolled_summary'>enrolled_summary</span> <span class='op'>/</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='int'>100</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>%</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="employees_are_matchable?-instance_method">
  
    #<strong>employees_are_matchable?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


712
713
714</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 712</span>

<span class='kw'>def</span> <span class='id identifier rubyid_employees_are_matchable?'>employees_are_matchable?</span>
  <span class='qwords_beg'>%w(</span><span class='tstring_content'>renewing_published</span><span class='words_sep'> </span><span class='tstring_content'>renewing_enrolling</span><span class='words_sep'> </span><span class='tstring_content'>renewing_enrolled</span><span class='words_sep'> </span><span class='tstring_content'>published</span><span class='words_sep'> </span><span class='tstring_content'>enrolling</span><span class='words_sep'> </span><span class='tstring_content'>enrolled</span><span class='words_sep'> </span><span class='tstring_content'>active</span><span class='words_sep'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_aasm_state'>aasm_state</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="end_on=-instance_method">
  
    #<strong>end_on=</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


279
280
281
282</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 279</span>

<span class='kw'>def</span> <span class='id identifier rubyid_end_on='>end_on=</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_date'>new_date</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:end_on</span><span class='comma'>,</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrolled-instance_method">
  
    #<strong>enrolled</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Any employee who selected or waived coverage</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


604
605
606
607</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 604</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrolled'>enrolled</span>
  <span class='id identifier rubyid_calc_active_health_assignments_for'>calc_active_health_assignments_for</span><span class='lparen'>(</span><span class='id identifier rubyid_eligible_to_enroll'>eligible_to_enroll</span><span class='rparen'>)</span>
  <span class='comment'>#    eligible_to_enroll.select{ |ce| ce.has_active_health_coverage?(self) }
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrolled_bga_for_ce-instance_method">
  
    #<strong>enrolled_bga_for_ce</strong>(ce)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


617
618
619
620
621
622
623</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 617</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrolled_bga_for_ce'>enrolled_bga_for_ce</span> <span class='id identifier rubyid_ce'>ce</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_is_renewing?'>is_renewing?</span>
    <span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_renewal_benefit_group_assignment'>renewal_benefit_group_assignment</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_active_benefit_group_assignment'>active_benefit_group_assignment</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrolled_by_bga-instance_method">
  
    #<strong>enrolled_by_bga</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


609
610
611
612
613
614
615</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 609</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrolled_by_bga'>enrolled_by_bga</span>
  <span class='id identifier rubyid_candidate_benefit_group_assignments'>candidate_benefit_group_assignments</span> <span class='op'>=</span> <span class='id identifier rubyid_eligible_to_enroll'>eligible_to_enroll</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_ce'>ce</span><span class='op'>|</span> <span class='id identifier rubyid_enrolled_bga_for_ce'>enrolled_bga_for_ce</span><span class='lparen'>(</span><span class='id identifier rubyid_ce'>ce</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='id identifier rubyid_enrolled_benefit_group_assignment_ids'>enrolled_benefit_group_assignment_ids</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='period'>.</span><span class='id identifier rubyid_enrolled_shop_health_benefit_group_ids'><span class='object_link'><a href="HbxEnrollment.html#enrolled_shop_health_benefit_group_ids-class_method" title="HbxEnrollment.enrolled_shop_health_benefit_group_ids (method)">enrolled_shop_health_benefit_group_ids</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_candidate_benefit_group_assignments'>candidate_benefit_group_assignments</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_bgas'>bgas</span> <span class='op'>=</span> <span class='id identifier rubyid_candidate_benefit_group_assignments'>candidate_benefit_group_assignments</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bga'>bga</span><span class='op'>|</span>
    <span class='id identifier rubyid_enrolled_benefit_group_assignment_ids'>enrolled_benefit_group_assignment_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_bga'>bga</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrollment_errors-instance_method">
  
    #<strong>enrollment_errors</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine enrollment composition compliance with HBX-defined guards</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 686</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrollment_errors'>enrollment_errors</span>
  <span class='id identifier rubyid_errors'>errors</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='comment'># At least one employee must be enrollable.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>eligible_to_enroll_count:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>at least one employee must be eligible to enroll</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># At least one employee who isn&#39;t an owner or family member of owner must enroll
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_non_business_owner_enrolled'>non_business_owner_enrolled</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_non_business_owner_enrolled'>non_business_owner_enrolled</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_non_owner_participation_count_minimum'>non_owner_participation_count_minimum</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>non_business_owner_enrollment_count:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>at least </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_non_owner_participation_count_minimum'>non_owner_participation_count_minimum</span><span class='embexpr_end'>}</span><span class='tstring_content'> non-owner employee must enroll</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># January 1 effective date exemption(s)
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_effective_date'>effective_date</span><span class='period'>.</span><span class='id identifier rubyid_yday'>yday</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='comment'># Verify ratio for minimum number of eligible employees that must enroll is met
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_enrollment_ratio'>enrollment_ratio</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_employee_participation_ratio_minimum'>employee_participation_ratio_minimum</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>enrollment_ratio:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>number of eligible participants enrolling (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total_enrolled_count'>total_enrolled_count</span><span class='embexpr_end'>}</span><span class='tstring_content'>) is less than minimum required </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span> <span class='op'>*</span> <span class='id identifier rubyid_employee_participation_ratio_minimum'>employee_participation_ratio_minimum</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_errors'>errors</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrollment_quiet_period-instance_method">
  
    #<strong>enrollment_quiet_period</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


293
294
295</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 293</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrollment_quiet_period'>enrollment_quiet_period</span>
  <span class='const'><span class='object_link'><a href="" title="PlanYear (class)">PlanYear</a></span></span><span class='period'>.</span><span class='id identifier rubyid_enrollment_quiet_period'><span class='object_link'><a href="#enrollment_quiet_period-class_method" title="PlanYear.enrollment_quiet_period (method)">enrollment_quiet_period</a></span></span><span class='lparen'>(</span><span class='label'>start_on:</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span> <span class='label'>open_enrollment_end_on:</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span><span class='comma'>,</span> <span class='label'>is_renewing:</span> <span class='id identifier rubyid_has_renewal_history?'>has_renewal_history?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrollment_ratio-instance_method">
  
    #<strong>enrollment_ratio</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


653
654
655
656
657
658
659</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 653</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrollment_ratio'>enrollment_ratio</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='int'>0</span>
  <span class='kw'>else</span>
    <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_total_enrolled_count'>total_enrolled_count</span> <span class='op'>*</span> <span class='float'>1.0</span><span class='rparen'>)</span><span class='op'>/</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ensure_benefit_group_is_valid-instance_method">
  
    #<strong>ensure_benefit_group_is_valid</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137
138
139
140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 132</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ensure_benefit_group_is_valid'>ensure_benefit_group_is_valid</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bg'>bg</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_bg'>bg</span><span class='period'>.</span><span class='id identifier rubyid_sole_source?'>sole_source?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_bg'>bg</span><span class='period'>.</span><span class='id identifier rubyid_composite_tier_contributions'>composite_tier_contributions</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_bg'>bg</span><span class='period'>.</span><span class='id identifier rubyid_build_composite_tier_contributions'>build_composite_tier_contributions</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_bg'>bg</span><span class='period'>.</span><span class='id identifier rubyid_estimate_composite_rates'>estimate_composite_rates</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="estimate_group_size?-instance_method">
  
    #<strong>estimate_group_size?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152
1153
1154
1155
1156
1157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1140</span>

<span class='kw'>def</span> <span class='id identifier rubyid_estimate_group_size?'>estimate_group_size?</span>
  <span class='lbracket'>[</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>draft</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>publish_pending</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eligibility_review</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>published</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>published_invalid</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>enrolling</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application_ineligible</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>canceled</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renewing_draft</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renewing_published</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renewing_publish_pending</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renewing_enrolling</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renewing_application_ineligible</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renewing_canceled</span><span class='tstring_end'>&quot;</span></span>
  <span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="filter_active_enrollments_by_date-instance_method">
  
    #<strong>filter_active_enrollments_by_date</strong>(date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_filter_active_enrollments_by_date'>filter_active_enrollments_by_date</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_id_list'>id_list</span> <span class='op'>=</span> <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
  <span class='id identifier rubyid_enrollment_proxies'>enrollment_proxies</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Family.html" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_collection'>collection</span><span class='period'>.</span><span class='id identifier rubyid_aggregate'>aggregate</span><span class='lparen'>(</span><span class='lbracket'>[</span>
    <span class='comment'># Thin before expanding to make better use of indexes
</span>    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$match</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$elemMatch</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>benefit_group_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$in</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id_list'>id_list</span>
      <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$in</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#ENROLLED_STATUSES-constant" title="HbxEnrollment::ENROLLED_STATUSES (constant)">ENROLLED_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#RENEWAL_STATUSES-constant" title="HbxEnrollment::RENEWAL_STATUSES (constant)">RENEWAL_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#TERMINATED_STATUSES-constant" title="HbxEnrollment::TERMINATED_STATUSES (constant)">TERMINATED_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#WAIVED_STATUSES-constant" title="HbxEnrollment::WAIVED_STATUSES (constant)">WAIVED_STATUSES</a></span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>effective_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span>  <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$lte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_end_of_month'>end_of_month</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$gte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rbrace'>}</span>
    <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$unwind</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$households</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$unwind</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$households.hbx_enrollments</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$match</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.benefit_group_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$in</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id_list'>id_list</span>
      <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$in</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#ENROLLED_STATUSES-constant" title="HbxEnrollment::ENROLLED_STATUSES (constant)">ENROLLED_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#RENEWAL_STATUSES-constant" title="HbxEnrollment::RENEWAL_STATUSES (constant)">RENEWAL_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#TERMINATED_STATUSES-constant" title="HbxEnrollment::TERMINATED_STATUSES (constant)">TERMINATED_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#WAIVED_STATUSES-constant" title="HbxEnrollment::WAIVED_STATUSES (constant)">WAIVED_STATUSES</a></span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.effective_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span>  <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$lte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_end_of_month'>end_of_month</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$gte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$or</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span>
       <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.terminated_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$eq</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='rbrace'>}</span> <span class='rbrace'>}</span><span class='comma'>,</span>
       <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.terminated_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$gte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_end_of_month'>end_of_month</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
      <span class='rbracket'>]</span>
    <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$sort</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.submitted_at</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>1</span>
    <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$group</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bga_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$households.hbx_enrollments.benefit_group_assignment_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>coverage_kind</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$households.hbx_enrollments.coverage_kind</span><span class='tstring_end'>&quot;</span></span>
      <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hbx_enrollment_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$last</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$households.hbx_enrollments._id</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$last</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$households.hbx_enrollments.aasm_state</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>plan_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$last</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$households.hbx_enrollments.plan_id</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>benefit_group_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$last</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$households.hbx_enrollments.benefit_group_id</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>benefit_group_assignment_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$last</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$households.hbx_enrollments.benefit_group_assignment_id</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>family_members</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$last</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$family_members</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
    <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$match</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$nin</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#WAIVED_STATUSES-constant" title="HbxEnrollment::WAIVED_STATUSES (constant)">WAIVED_STATUSES</a></span></span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_enrollment_proxies'>enrollment_proxies</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_small_market_active_employee_limit'>small_market_active_employee_limit</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_enrollment_proxies'>enrollment_proxies</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ep'>ep</span><span class='op'>|</span>
    <span class='const'>OpenStruct</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_ep'>ep</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_census_employees-instance_method">
  
    #<strong>find_census_employees</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


581
582
583
584</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 581</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_census_employees'>find_census_employees</span>
  <span class='kw'>return</span> <span class='ivar'>@census_employees</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@census_employees</span>
  <span class='ivar'>@census_employees</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="CensusEmployee.html" title="CensusEmployee (class)">CensusEmployee</a></span></span><span class='period'>.</span><span class='id identifier rubyid_by_benefit_group_ids'>by_benefit_group_ids</span><span class='lparen'>(</span><span class='id identifier rubyid_benefit_group_ids'>benefit_group_ids</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_renewal_history?-instance_method">
  
    #<strong>has_renewal_history?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


289
290
291</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 289</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_renewal_history?'>has_renewal_history?</span>
  <span class='id identifier rubyid_workflow_state_transitions'>workflow_state_transitions</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:to_state</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="" title="PlanYear (class)">PlanYear</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="#RENEWING-constant" title="PlanYear::RENEWING (constant)">RENEWING</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hbx_enrollments-instance_method">
  
    #<strong>hbx_enrollments</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334
335
336</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 332</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span>
  <span class='ivar'>@hbx_enrollments</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='kw'>return</span> <span class='ivar'>@hbx_enrollments</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@hbx_enrollments</span>
  <span class='ivar'>@hbx_enrollments</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_benefit_groups'><span class='object_link'><a href="HbxEnrollment.html#find_by_benefit_groups-class_method" title="HbxEnrollment.find_by_benefit_groups (method)">find_by_benefit_groups</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hbx_enrollments_by_month-instance_method">
  
    #<strong>hbx_enrollments_by_month</strong>(date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 192</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hbx_enrollments_by_month'>hbx_enrollments_by_month</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_id_list'>id_list</span> <span class='op'>=</span> <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
  <span class='id identifier rubyid_families'>families</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Family.html" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span>
    <span class='symbol'>:households.hbx_enrollments.benefit_group_id</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id_list'>id_list</span><span class='comma'>,</span>
    <span class='symbol'>:households.hbx_enrollments.aasm_state</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#ENROLLED_STATUSES-constant" title="HbxEnrollment::ENROLLED_STATUSES (constant)">ENROLLED_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#RENEWAL_STATUSES-constant" title="HbxEnrollment::RENEWAL_STATUSES (constant)">RENEWAL_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#TERMINATED_STATUSES-constant" title="HbxEnrollment::TERMINATED_STATUSES (constant)">TERMINATED_STATUSES</a></span></span><span class='rparen'>)</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_small_market_active_employee_limit'>small_market_active_employee_limit</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_families'>families</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enrollments'>enrollments</span><span class='comma'>,</span> <span class='id identifier rubyid_family'>family</span><span class='op'>|</span>
    <span class='id identifier rubyid_valid_enrollments'>valid_enrollments</span> <span class='op'>=</span> <span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span>
      <span class='symbol'>:benefit_group_id</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id_list'>id_list</span><span class='comma'>,</span>
      <span class='symbol'>:effective_on</span><span class='period'>.</span><span class='id identifier rubyid_lte'>lte</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_end_of_month'>end_of_month</span><span class='comma'>,</span>
      <span class='symbol'>:aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#ENROLLED_STATUSES-constant" title="HbxEnrollment::ENROLLED_STATUSES (constant)">ENROLLED_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#RENEWAL_STATUSES-constant" title="HbxEnrollment::RENEWAL_STATUSES (constant)">RENEWAL_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#TERMINATED_STATUSES-constant" title="HbxEnrollment::TERMINATED_STATUSES (constant)">TERMINATED_STATUSES</a></span></span><span class='rparen'>)</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:submitted_at</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_health_enrollments'>health_enrollments</span> <span class='op'>=</span> <span class='id identifier rubyid_valid_enrollments'>valid_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:coverage_kind</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>health</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_dental_enrollments'>dental_enrollments</span> <span class='op'>=</span> <span class='id identifier rubyid_valid_enrollments'>valid_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:coverage_kind</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dental</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_coverage_filter'>coverage_filter</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enrollments'>enrollments</span><span class='comma'>,</span> <span class='id identifier rubyid_date'>date</span><span class='op'>|</span>
      <span class='id identifier rubyid_enrollments'>enrollments</span> <span class='op'>=</span> <span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_terminated_on'>terminated_on</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>||</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_terminated_on'>terminated_on</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_date'>date</span><span class='rbrace'>}</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
        <span class='id identifier rubyid_enrollment'>enrollment</span> <span class='op'>=</span> <span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#ENROLLED_STATUSES-constant" title="HbxEnrollment::ENROLLED_STATUSES (constant)">ENROLLED_STATUSES</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#TERMINATED_STATUSES-constant" title="HbxEnrollment::TERMINATED_STATUSES (constant)">TERMINATED_STATUSES</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_enrollment'>enrollment</span> <span class='op'>||</span> <span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#RENEWAL_STATUSES-constant" title="HbxEnrollment::RENEWAL_STATUSES (constant)">RENEWAL_STATUSES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='rbrace'>}</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_enrollments'>enrollments</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_coverage_filter'>coverage_filter</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_health_enrollments'>health_enrollments</span><span class='comma'>,</span> <span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_enrollments'>enrollments</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_coverage_filter'>coverage_filter</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_dental_enrollments'>dental_enrollments</span><span class='comma'>,</span> <span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_application_eligible?-instance_method">
  
    #<strong>is_application_eligible?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


436
437
438</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 436</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_application_eligible?'>is_application_eligible?</span>
  <span class='id identifier rubyid_application_eligibility_warnings'>application_eligibility_warnings</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_application_invalid?-instance_method">
  
    #<strong>is_application_invalid?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


432
433
434</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 432</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_application_invalid?'>is_application_invalid?</span>
  <span class='id identifier rubyid_application_errors'>application_errors</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_application_period_ended?-instance_method">
  
    #<strong>is_application_period_ended?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


681
682
683</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 681</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_application_period_ended?'>is_application_period_ended?</span>
  <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_application_unpublishable?-instance_method">
  
    #<strong>is_application_unpublishable?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


424
425
426</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 424</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_application_unpublishable?'>is_application_unpublishable?</span>
  <span class='id identifier rubyid_open_enrollment_date_errors'>open_enrollment_date_errors</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>||</span> <span class='id identifier rubyid_application_errors'>application_errors</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_application_valid?-instance_method">
  
    #<strong>is_application_valid?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


428
429
430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 428</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_application_valid?'>is_application_valid?</span>
  <span class='id identifier rubyid_application_errors'>application_errors</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_before_start?-instance_method">
  
    #<strong>is_before_start?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1123
1124
1125</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_before_start?'>is_before_start?</span>
  <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_start_on'>start_on</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_eligible_to_match_census_employees?-instance_method">
  
    #<strong>is_eligible_to_match_census_employees?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1108
1109
1110
1111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_eligible_to_match_census_employees?'>is_eligible_to_match_census_employees?</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='kw'>and</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_published?'>published?</span> <span class='kw'>or</span> <span class='id identifier rubyid_enrolling?'>enrolling?</span> <span class='kw'>or</span> <span class='id identifier rubyid_enrolled?'>enrolled?</span> <span class='kw'>or</span> <span class='id identifier rubyid_active?'>active?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_enrollment_valid?-instance_method">
  
    #<strong>is_enrollment_valid?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


673
674
675</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 673</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_enrollment_valid?'>is_enrollment_valid?</span>
  <span class='id identifier rubyid_enrollment_errors'>enrollment_errors</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_offering_dental?-instance_method">
  
    #<strong>is_offering_dental?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


379
380
381</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 379</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_offering_dental?'>is_offering_dental?</span>
  <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_bg'>bg</span><span class='op'>|</span> <span class='id identifier rubyid_bg'>bg</span><span class='period'>.</span><span class='id identifier rubyid_is_offering_dental?'>is_offering_dental?</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_open_enrollment_closed?-instance_method">
  
    #<strong>is_open_enrollment_closed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


677
678
679</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 677</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_open_enrollment_closed?'>is_open_enrollment_closed?</span>
  <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_publish_date_valid?-instance_method">
  
    #<strong>is_publish_date_valid?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


448
449
450
451</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 448</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_publish_date_valid?'>is_publish_date_valid?</span>
  <span class='id identifier rubyid_event_name'>event_name</span> <span class='op'>=</span> <span class='id identifier rubyid_aasm'>aasm</span><span class='period'>.</span><span class='id identifier rubyid_current_event'>current_event</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>!</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_event_name'>event_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>force_publish</span><span class='tstring_end'>&quot;</span></span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_datetime_of_record'><span class='object_link'><a href="TimeKeeper.html#datetime_of_record-class_method" title="TimeKeeper.datetime_of_record (method)">datetime_of_record</a></span></span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_due_date_for_publish'>due_date_for_publish</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_published?-instance_method">
  
    #<strong>is_published?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


371
372
373</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 371</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_published?'>is_published?</span>
  <span class='const'><span class='object_link'><a href="#PUBLISHED-constant" title="PlanYear::PUBLISHED (constant)">PUBLISHED</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_renewing?-instance_method">
  
    #<strong>is_renewing?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


367
368
369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 367</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_renewing?'>is_renewing?</span>
  <span class='const'><span class='object_link'><a href="#RENEWING-constant" title="PlanYear::RENEWING (constant)">RENEWING</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_within_review_period?-instance_method">
  
    #<strong>is_within_review_period?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1113
1114
1115
1116
1117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1113</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_within_review_period?'>is_within_review_period?</span>
  <span class='id identifier rubyid_published_invalid?'>published_invalid?</span> <span class='kw'>and</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_latest_workflow_state_transition'>latest_workflow_state_transition</span><span class='period'>.</span><span class='id identifier rubyid_transition_at'>transition_at</span> <span class='op'>&gt;</span>
     <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>-</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_appeal_period_after_application_denial'>appeal_period_after_application_denial</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_workflow_state_transition-instance_method">
  
    #<strong>latest_workflow_state_transition</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1119
1120
1121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest_workflow_state_transition'>latest_workflow_state_transition</span>
  <span class='id identifier rubyid_workflow_state_transitions'>workflow_state_transitions</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:transition_at</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="link_census_employees-instance_method">
  
    #<strong>link_census_employees</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1132
1133
1134
1135
1136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1132</span>

<span class='kw'>def</span> <span class='id identifier rubyid_link_census_employees'>link_census_employees</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_census_employees'>census_employees</span><span class='period'>.</span><span class='id identifier rubyid_eligible_without_term_pending'>eligible_without_term_pending</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_census_employee'>census_employee</span><span class='op'>|</span>
    <span class='id identifier rubyid_census_employee'>census_employee</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span> <span class='comment'># This assigns default benefit package if none
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="minimum_employer_contribution-instance_method">
  
    #<strong>minimum_employer_contribution</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


400
401
402
403
404
405
406
407
408
409
410
411
412
413
414</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 400</span>

<span class='kw'>def</span> <span class='id identifier rubyid_minimum_employer_contribution'>minimum_employer_contribution</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_sole_source?'>sole_source?</span>
        <span class='const'>OpenStruct</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:premium_pct</span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_relationship_benefits'>relationship_benefits</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_relationship_benefit'>relationship_benefit</span><span class='op'>|</span>
          <span class='id identifier rubyid_relationship_benefit'>relationship_benefit</span><span class='period'>.</span><span class='id identifier rubyid_relationship'>relationship</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>employee</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_min_by'>min_by</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_relationship_benefit'>relationship_benefit</span><span class='op'>|</span>
          <span class='id identifier rubyid_relationship_benefit'>relationship_benefit</span><span class='period'>.</span><span class='id identifier rubyid_premium_pct'>premium_pct</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:premium_pct</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="minimum_enrolled_count-instance_method">
  
    #<strong>minimum_enrolled_count</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


661
662
663</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 661</span>

<span class='kw'>def</span> <span class='id identifier rubyid_minimum_enrolled_count'>minimum_enrolled_count</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_employee_participation_ratio_minimum'>employee_participation_ratio_minimum</span> <span class='op'>*</span> <span class='id identifier rubyid_eligible_to_enroll_count'>eligible_to_enroll_count</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="no_documents_uploaded?-instance_method">
  
    #<strong>no_documents_uploaded?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


510
511
512</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 510</span>

<span class='kw'>def</span> <span class='id identifier rubyid_no_documents_uploaded?'>no_documents_uploaded?</span>
  <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_employer_attestation'>employer_attestation</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>||</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_employer_attestation'>employer_attestation</span><span class='period'>.</span><span class='id identifier rubyid_unsubmitted?'>unsubmitted?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="non_business_owner_enrolled-instance_method">
  
    #<strong>non_business_owner_enrolled</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Employees who selected or waived and are not owners or direct family
members of owners</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


599
600
601</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 599</span>

<span class='kw'>def</span> <span class='id identifier rubyid_non_business_owner_enrolled'>non_business_owner_enrolled</span>
  <span class='id identifier rubyid_enrolled'>enrolled</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_ce'>ce</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_is_business_owner'>is_business_owner</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_waived?'>waived?</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open_enrollment_completed?-instance_method">
  
    #<strong>open_enrollment_completed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


225
226
227
228</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 225</span>

<span class='kw'>def</span> <span class='id identifier rubyid_open_enrollment_completed?'>open_enrollment_completed?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>&gt;</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open_enrollment_contains?-instance_method">
  
    #<strong>open_enrollment_contains?</strong>(compare_date)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


356
357
358
359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 356</span>

<span class='kw'>def</span> <span class='id identifier rubyid_open_enrollment_contains?'>open_enrollment_contains?</span><span class='lparen'>(</span><span class='id identifier rubyid_compare_date'>compare_date</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_open_enrollment_start_on'>open_enrollment_start_on</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_compare_date'>compare_date</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_compare_date'>compare_date</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open_enrollment_date_errors-instance_method">
  
    #<strong>open_enrollment_date_errors</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 453</span>

<span class='kw'>def</span> <span class='id identifier rubyid_open_enrollment_date_errors'>open_enrollment_date_errors</span>
  <span class='id identifier rubyid_errors'>errors</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_is_renewing?'>is_renewing?</span>
    <span class='id identifier rubyid_minimum_length'>minimum_length</span> <span class='op'>=</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_renewal_application'>renewal_application</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment'>open_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_minimum_length'>minimum_length</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span>
    <span class='id identifier rubyid_enrollment_end'>enrollment_end</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="PlanYear (class)">PlanYear</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shop_market_renewal_application_monthly_open_enrollment_end_on'>shop_market_renewal_application_monthly_open_enrollment_end_on</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_minimum_length'>minimum_length</span> <span class='op'>=</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment'>open_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_minimum_length'>minimum_length</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span>
    <span class='id identifier rubyid_enrollment_end'>enrollment_end</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="PlanYear (class)">PlanYear</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shop_market_open_enrollment_monthly_end_on'>shop_market_open_enrollment_monthly_end_on</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span> <span class='op'>-</span> <span class='lparen'>(</span><span class='id identifier rubyid_open_enrollment_start_on'>open_enrollment_start_on</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_minimum_length'>minimum_length</span>
    <span class='id identifier rubyid_log_message'>log_message</span><span class='lparen'>(</span><span class='id identifier rubyid_errors'>errors</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='lbrace'>{</span><span class='label'>open_enrollment_period:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Open Enrollment period is shorter than minimum (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_minimum_length'>minimum_length</span><span class='embexpr_end'>}</span><span class='tstring_content'> days)</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_open_enrollment_end_on'>open_enrollment_end_on</span> <span class='op'>&gt;</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_prev_month'>prev_month</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_prev_month'>prev_month</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='comma'>,</span> <span class='id identifier rubyid_enrollment_end'>enrollment_end</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_log_message'>log_message</span><span class='lparen'>(</span><span class='id identifier rubyid_errors'>errors</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='lbrace'>{</span><span class='label'>open_enrollment_period:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Open Enrollment must end on or before the </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_enrollment_end'>enrollment_end</span><span class='period'>.</span><span class='id identifier rubyid_ordinalize'>ordinalize</span><span class='embexpr_end'>}</span><span class='tstring_content'> day of the month prior to effective date</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_errors'>errors</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open_enrollment_end_on=-instance_method">
  
    #<strong>open_enrollment_end_on=</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


317
318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 317</span>

<span class='kw'>def</span> <span class='id identifier rubyid_open_enrollment_end_on='>open_enrollment_end_on=</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_date'>new_date</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:open_enrollment_end_on</span><span class='comma'>,</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open_enrollment_start_on=-instance_method">
  
    #<strong>open_enrollment_start_on=</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 284</span>

<span class='kw'>def</span> <span class='id identifier rubyid_open_enrollment_start_on='>open_enrollment_start_on=</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_date'>new_date</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:open_enrollment_start_on</span><span class='comma'>,</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open_enrollment_start_period_with_offset-instance_method">
  
    #<strong>open_enrollment_start_period_with_offset</strong>(date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


861
862
863</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 861</span>

<span class='kw'>def</span> <span class='id identifier rubyid_open_enrollment_start_period_with_offset'>open_enrollment_start_period_with_offset</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_date'>date</span> <span class='op'>-</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_earliest_start_prior_to_effective_on'>earliest_start_prior_to_effective_on</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span> <span class='op'>+</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_earliest_start_prior_to_effective_on'>earliest_start_prior_to_effective_on</span><span class='period'>.</span><span class='id identifier rubyid_day_of_month'>day_of_month</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="overlapping_published_plan_year?-instance_method">
  
    #<strong>overlapping_published_plan_year?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


555
556
557
558
559</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 555</span>

<span class='kw'>def</span> <span class='id identifier rubyid_overlapping_published_plan_year?'>overlapping_published_plan_year?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_published_or_renewing_published'>published_or_renewing_published</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_py'>py</span><span class='op'>|</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='op'>..</span><span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_end_on'>end_on</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_cover?'>cover?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_py'>py</span> <span class='op'>!=</span> <span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="overlapping_published_plan_years-instance_method">
  
    #<strong>overlapping_published_plan_years</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_overlapping_published_plan_years'>overlapping_published_plan_years</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_published_plan_years_within_date_range'>published_plan_years_within_date_range</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_end_on'>end_on</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parent-instance_method">
  
    #<strong>parent</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parent'>parent</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>undefined parent employer_profile</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_employer_profile?'>employer_profile?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="past_transmission_threshold?-instance_method">
  
    #<strong>past_transmission_threshold?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236
237
238
239</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 234</span>

<span class='kw'>def</span> <span class='id identifier rubyid_past_transmission_threshold?'>past_transmission_threshold?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_transmit_employers_immediately?'>transmit_employers_immediately?</span>
  <span class='id identifier rubyid_t_threshold_date'>t_threshold_date</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span> <span class='op'>+</span> <span class='int'>14</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span>
  <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>&gt;</span> <span class='id identifier rubyid_t_threshold_date'>t_threshold_date</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="products_offered_in_service_area-instance_method">
  
    #<strong>products_offered_in_service_area</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1171
1172
1173
1174
1175
1176
1177
1178
1179
1180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_products_offered_in_service_area'>products_offered_in_service_area</span>
  <span class='kw'>return</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_constrain_service_areas?'>constrain_service_areas?</span>
  <span class='kw'>return</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_service_areas_available_on'>service_areas_available_on</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:start_on</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No products are available in your area at this time.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ratify_enrollment-instance_method">
  
    #<strong>ratify_enrollment</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1098
1099
1100</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1098</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ratify_enrollment'>ratify_enrollment</span>
  <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_enrollment_ratified!'>enrollment_ratified!</span> <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_may_enrollment_ratified?'>may_enrollment_ratified?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rating_area-instance_method">
  
    #<strong>rating_area</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1163
1164
1165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rating_area'>rating_area</span>
  <span class='id identifier rubyid_recorded_rating_area'>recorded_rating_area</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>?</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_rating_area'>rating_area</span> <span class='op'>:</span> <span class='id identifier rubyid_recorded_rating_area'>recorded_rating_area</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="revert_employer_profile_application-instance_method">
  
    #<strong>revert_employer_profile_application</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1047
1048
1049
1050</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1047</span>

<span class='kw'>def</span> <span class='id identifier rubyid_revert_employer_profile_application'>revert_employer_profile_application</span>
  <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_revert_application!'>revert_application!</span> <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_may_revert_application?'>may_revert_application?</span>
  <span class='id identifier rubyid_record_transition'>record_transition</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="schedule_employee_terminations-instance_method">
  
    #<strong>schedule_employee_terminations</strong>(terminated_on = TimeKeeper.date_of_record.end_of_month)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1058
1059
1060
1061
1062
1063
1064</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1058</span>

<span class='kw'>def</span> <span class='id identifier rubyid_schedule_employee_terminations'>schedule_employee_terminations</span><span class='lparen'>(</span><span class='id identifier rubyid_terminated_on'>terminated_on</span><span class='op'>=</span><span class='const'>TimeKeeper</span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'>date_of_record</span><span class='period'>.</span><span class='id identifier rubyid_end_of_month'>end_of_month</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hbx_enrollment'>hbx_enrollment</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_hbx_enrollment'>hbx_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_may_schedule_coverage_termination?'>may_schedule_coverage_termination?</span>
      <span class='id identifier rubyid_hbx_enrollment'>hbx_enrollment</span><span class='period'>.</span><span class='id identifier rubyid_schedule_coverage_termination!'>schedule_coverage_termination!</span><span class='lparen'>(</span><span class='id identifier rubyid_terminated_on'>terminated_on</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="service_area-instance_method">
  
    #<strong>service_area</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1167
1168
1169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_service_area'>service_area</span>
  <span class='id identifier rubyid_recorded_service_area'>recorded_service_area</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>?</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_service_area'>service_area</span> <span class='op'>:</span> <span class='id identifier rubyid_recorded_service_area'>recorded_service_area</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_termination_date-instance_method">
  
    #<strong>set_termination_date</strong>(termination_date = TimeKeeper.date_of_record.end_of_month)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1066
1067
1068</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1066</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_termination_date'>set_termination_date</span><span class='lparen'>(</span><span class='id identifier rubyid_termination_date'>termination_date</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_end_of_month'>end_of_month</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='label'>end_on:</span> <span class='id identifier rubyid_termination_date'>termination_date</span><span class='comma'>,</span> <span class='label'>terminated_on:</span> <span class='id identifier rubyid_termination_date'>termination_date</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sic_code-instance_method">
  
    #<strong>sic_code</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1159
1160
1161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1159</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sic_code'>sic_code</span>
  <span class='id identifier rubyid_recorded_sic_code'>recorded_sic_code</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>?</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_sic_code'>sic_code</span> <span class='op'>:</span> <span class='id identifier rubyid_recorded_sic_code'>recorded_sic_code</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_on=-instance_method">
  
    #<strong>start_on=</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='effective_date=-instance_method'>effective_date=</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_on='>start_on=</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_date'>new_date</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:start_on</span><span class='comma'>,</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="terminate_application-instance_method">
  
    #<strong>terminate_application</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327
328
329
330</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 325</span>

<span class='kw'>def</span> <span class='id identifier rubyid_terminate_application'>terminate_application</span><span class='lparen'>(</span><span class='id identifier rubyid_termination_date'>termination_date</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_coverage_period_contains?'>coverage_period_contains?</span><span class='lparen'>(</span><span class='id identifier rubyid_termination_date'>termination_date</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_terminated_on'>terminated_on</span> <span class='op'>=</span> <span class='id identifier rubyid_termination_date'>termination_date</span>
    <span class='id identifier rubyid_terminate'>terminate</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="total_enrolled_count-instance_method">
  
    #<strong>total_enrolled_count</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


644
645
646
647
648
649
650
651</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 644</span>

<span class='kw'>def</span> <span class='id identifier rubyid_total_enrolled_count'>total_enrolled_count</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_census_employees'>census_employees</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&lt;=</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_small_market_active_employee_limit'>small_market_active_employee_limit</span>
    <span class='comment'>#enrolled.count
</span>    <span class='id identifier rubyid_enrolled_by_bga'>enrolled_by_bga</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
  <span class='kw'>else</span>
    <span class='int'>0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trigger_passive_renewals-instance_method">
  
    #<strong>trigger_passive_renewals</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1039
1040
1041
1042
1043
1044
1045</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 1039</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trigger_passive_renewals'>trigger_passive_renewals</span>
  <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Factories.html" title="Factories (module)">Factories</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Factories/EmployerOpenEnrollmentFactory.html" title="Factories::EmployerOpenEnrollmentFactory (class)">EmployerOpenEnrollmentFactory</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Factories/EmployerOpenEnrollmentFactory.html#initialize-instance_method" title="Factories::EmployerOpenEnrollmentFactory#initialize (method)">new</a></span></span>
  <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
  <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span><span class='period'>.</span><span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span>
  <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span><span class='period'>.</span><span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span><span class='period'>.</span><span class='id identifier rubyid_process_family_enrollment_renewals'>process_family_enrollment_renewals</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_employee_benefit_packages-instance_method">
  
    #<strong>update_employee_benefit_packages</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121
122
123
124
125
126
127
128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_employee_benefit_packages'>update_employee_benefit_packages</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_start_on_changed?'>start_on_changed?</span>
    <span class='id identifier rubyid_bg_ids'>bg_ids</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_employees'>employees</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="CensusEmployee.html" title="CensusEmployee (class)">CensusEmployee</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='symbol'>:benefit_group_assignments.benefit_group_id</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_bg_ids'>bg_ids</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_employees'>employees</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_census_employee'>census_employee</span><span class='op'>|</span>
      <span class='id identifier rubyid_census_employee'>census_employee</span><span class='period'>.</span><span class='id identifier rubyid_benefit_group_assignments'>benefit_group_assignments</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:benefit_group_id</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_bg_ids'>bg_ids</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_assignment'>assignment</span><span class='op'>|</span>
        <span class='id identifier rubyid_assignment'>assignment</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='label'>start_on:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_assignment'>assignment</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='label'>end_on:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_end_on'>end_on</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_assignment'>assignment</span><span class='period'>.</span><span class='id identifier rubyid_end_on'>end_on</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="waived-instance_method">
  
    #<strong>waived</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


567
568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 567</span>

<span class='kw'>def</span> <span class='id identifier rubyid_waived'>waived</span>
  <span class='kw'>return</span> <span class='ivar'>@waived</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@waived</span>
  <span class='ivar'>@waived</span> <span class='op'>||=</span> <span class='id identifier rubyid_find_census_employees'>find_census_employees</span><span class='period'>.</span><span class='id identifier rubyid_waived'>waived</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="waived_count-instance_method">
  
    #<strong>waived_count</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


572
573
574</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan_year.rb', line 572</span>

<span class='kw'>def</span> <span class='id identifier rubyid_waived_count'>waived_count</span>
  <span class='id identifier rubyid_waived'>waived</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Oct 11 09:49:41 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.2.3).
</div>

    </div>
  </body>
</html>