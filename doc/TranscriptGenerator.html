<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: TranscriptGenerator
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "TranscriptGenerator";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (T)</a> &raquo;
    
    
    <span class="title">TranscriptGenerator</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: TranscriptGenerator
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">TranscriptGenerator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/transcript_generator.rb</dd>
  </dl>
  
</div>


  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="TRANSCRIPT_PATH-constant" class="">TRANSCRIPT_PATH =
        <div class="docstring">
  <div class="discussion">
    
<p>TRANSCRIPT_PATH =
“#Rails.root/xml_files_10_27/ivl_policy_transcript_files/”
TRANSCRIPT_PATH = “#Rails.root/xml_files/shop_policies_transcript_files/”
TRANSCRIPT_PATH =
“#Rails.root/individual_xmls_with_timestamps/ivl_transcript_batch/”</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='embexpr_end'>}</span><span class='tstring_content'>/person_transcripts</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
  </dl>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cv_path-instance_method" title="#cv_path (instance method)">#<strong>cv_path</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute cv_path.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#identifier-instance_method" title="#identifier (instance method)">#<strong>identifier</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute identifier.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_transcript-instance_method" title="#build_transcript (instance method)">#<strong>build_transcript</strong>(external_obj)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#display_enrollment_transcripts-instance_method" title="#display_enrollment_transcripts (instance method)">#<strong>display_enrollment_transcripts</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#display_family_transcripts-instance_method" title="#display_family_transcripts (instance method)">#<strong>display_family_transcripts</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#display_transcripts-instance_method" title="#display_transcripts (instance method)">#<strong>display_transcripts</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">#<strong>execute</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(market = &#39;individual&#39;)  &#x21d2; TranscriptGenerator </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of TranscriptGenerator.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#my_logger-instance_method" title="#my_logger (instance method)">#<strong>my_logger</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(market = &#39;individual&#39;)  &#x21d2; <tt><span class='object_link'><a href="" title="TranscriptGenerator (class)">TranscriptGenerator</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of TranscriptGenerator</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/transcript_generator.rb', line 11</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_market'>market</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>individual</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@identifier</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hbx_id</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@market</span> <span class='op'>=</span> <span class='id identifier rubyid_market'>market</span>
  <span class='id identifier rubyid_my_logger'>my_logger</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="cv_path=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="cv_path-instance_method">
  
    #<strong>cv_path</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute cv_path</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/transcript_generator.rb', line 3</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cv_path'>cv_path</span>
  <span class='ivar'>@cv_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="identifier=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="identifier-instance_method">
  
    #<strong>identifier</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute identifier</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/transcript_generator.rb', line 3</span>

<span class='kw'>def</span> <span class='id identifier rubyid_identifier'>identifier</span>
  <span class='ivar'>@identifier</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="build_transcript-instance_method">
  
    #<strong>build_transcript</strong>(external_obj)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45
46
47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/transcript_generator.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_transcript'>build_transcript</span><span class='lparen'>(</span><span class='id identifier rubyid_external_obj'>external_obj</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_transcript'>transcript</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Transcripts.html" title="Transcripts (module)">Transcripts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Transcripts/PersonTranscript.html" title="Transcripts::PersonTranscript (class)">PersonTranscript</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Transcripts/PersonTranscript.html#initialize-instance_method" title="Transcripts::PersonTranscript#initialize (method)">new</a></span></span>
  <span class='comment'># transcript.shop = false
</span>  <span class='id identifier rubyid_transcript'>transcript</span><span class='period'>.</span><span class='id identifier rubyid_find_or_build'>find_or_build</span><span class='lparen'>(</span><span class='id identifier rubyid_external_obj'>external_obj</span><span class='rparen'>)</span>

  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#TRANSCRIPT_PATH-constant" title="TranscriptGenerator::TRANSCRIPT_PATH (constant)">TRANSCRIPT_PATH</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@count</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_transcript'>transcript</span><span class='period'>.</span><span class='id identifier rubyid_transcript'>transcript</span><span class='lbracket'>[</span><span class='symbol'>:identifier</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>.bin</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='const'>Marshal</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span><span class='lparen'>(</span><span class='id identifier rubyid_transcript'>transcript</span><span class='period'>.</span><span class='id identifier rubyid_transcript'>transcript</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="display_enrollment_transcripts-instance_method">
  
    #<strong>display_enrollment_transcripts</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/transcript_generator.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_display_enrollment_transcripts'>display_enrollment_transcripts</span>
  <span class='id identifier rubyid_count'>count</span>  <span class='op'>=</span> <span class='int'>0</span>

  <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@market</span><span class='embexpr_end'>}</span><span class='tstring_content'>_enrollment_change_sets_</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%m_%d_%Y_%H_%M</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>.csv</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='ivar'>@market</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>individual</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Enrollment HBX ID</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Subscriber HBX ID</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SSN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Last Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>First Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HIOS_ID:PlanName</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Other Effective On</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Effective On</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AASM State</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Terminated On</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Action</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Section:Attribute</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Value</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Enrollment HBX ID</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Subscriber HBX ID</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SSN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Last Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>First Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HIOS_ID:PlanName</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Other Effective On</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Effective On</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AASM State</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Terminated On</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Employer FEIN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Employer Legalname</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Action</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Section:Attribute</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Value</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_starting'>starting</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_datetime_of_record'><span class='object_link'><a href="TimeKeeper.html#datetime_of_record-class_method" title="TimeKeeper.datetime_of_record (method)">datetime_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='comment'># Dir.glob(&quot;#{TRANSCRIPT_PATH}/*.bin&quot;).each do |file_path|
</span>    <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='embexpr_end'>}</span><span class='tstring_content'>/sample_xmls/*.xml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file_path'>file_path</span><span class='op'>|</span>

    <span class='comment'># CSV.foreach(&quot;enrollments_edi_active_missing_in_EA.csv&quot;, headers: :true) do |row|
</span>    <span class='comment'>#   file_path = &quot;#{Rails.root}/LatestXmlFiles/ivl_final/#{row[&quot;Enrollment HBX ID&quot;].strip}.xml&quot;
</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span>

        <span class='comment'># rows = Transcripts::ComparisonResult.new(Marshal.load(File.open(file_path))).enrollment_csv_row
</span>
        <span class='id identifier rubyid_individual_parser'>individual_parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parsers.html" title="Parsers (module)">Parsers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml.html" title="Parsers::Xml (module)">Xml</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml/Cv.html" title="Parsers::Xml::Cv (module)">Cv</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml/Cv/Importers.html" title="Parsers::Xml::Cv::Importers (module)">Importers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml/Cv/Importers/EnrollmentParser.html" title="Parsers::Xml::Cv::Importers::EnrollmentParser (class)">EnrollmentParser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parsers/Xml/Cv/Importers/EnrollmentParser.html#initialize-instance_method" title="Parsers::Xml::Cv::Importers::EnrollmentParser#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_file_path'>file_path</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_other_enrollment'>other_enrollment</span> <span class='op'>=</span> <span class='id identifier rubyid_individual_parser'>individual_parser</span><span class='period'>.</span><span class='id identifier rubyid_get_enrollment_object'>get_enrollment_object</span>
        <span class='id identifier rubyid_transcript'>transcript</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Transcripts.html" title="Transcripts (module)">Transcripts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Transcripts/EnrollmentTranscript.html" title="Transcripts::EnrollmentTranscript (class)">EnrollmentTranscript</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Transcripts/EnrollmentTranscript.html#initialize-instance_method" title="Transcripts::EnrollmentTranscript#initialize (method)">new</a></span></span>          
        <span class='id identifier rubyid_transcript'>transcript</span><span class='period'>.</span><span class='id identifier rubyid_shop'>shop</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='ivar'>@market</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shop</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_transcript'>transcript</span><span class='period'>.</span><span class='id identifier rubyid_find_or_build'>find_or_build</span><span class='lparen'>(</span><span class='id identifier rubyid_other_enrollment'>other_enrollment</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_enrollment_transcript'>enrollment_transcript</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Importers.html" title="Importers (module)">Importers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Importers/Transcripts.html" title="Importers::Transcripts (module)">Transcripts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Importers/Transcripts/EnrollmentTranscript.html" title="Importers::Transcripts::EnrollmentTranscript (class)">EnrollmentTranscript</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
        <span class='id identifier rubyid_enrollment_transcript'>enrollment_transcript</span><span class='period'>.</span><span class='id identifier rubyid_transcript'>transcript</span> <span class='op'>=</span> <span class='id identifier rubyid_transcript'>transcript</span><span class='period'>.</span><span class='id identifier rubyid_transcript'>transcript</span>
        <span class='id identifier rubyid_enrollment_transcript'>enrollment_transcript</span><span class='period'>.</span><span class='id identifier rubyid_other_enrollment'>other_enrollment</span> <span class='op'>=</span> <span class='id identifier rubyid_other_enrollment'>other_enrollment</span>
        <span class='id identifier rubyid_enrollment_transcript'>enrollment_transcript</span><span class='period'>.</span><span class='id identifier rubyid_market'>market</span> <span class='op'>=</span> <span class='ivar'>@market</span>
        <span class='id identifier rubyid_enrollment_transcript'>enrollment_transcript</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span>

        <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_enrollment_transcript'>enrollment_transcript</span><span class='period'>.</span><span class='id identifier rubyid_csv_row'>csv_row</span>
        <span class='id identifier rubyid_first_row'>first_row</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>

        <span class='kw'>if</span> <span class='ivar'>@market</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>individual</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_enrollment_removes'>enrollment_removes</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>10</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>remove</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>11</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enrollment:hbx_id</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
          <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>10</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>update</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>12</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>13</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span><span class='rbrace'>}</span>
          <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>10</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>remove</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>11</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enrollment:hbx_id</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_enrollment_removes'>enrollment_removes</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>11</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>remove</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>12</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enrollment:hbx_id</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
          <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>12</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>update</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>14</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span><span class='rbrace'>}</span>
          <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>12</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>remove</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>13</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enrollment:hbx_id</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
        <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
          <span class='kw'>if</span> <span class='ivar'>@market</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>individual</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_first_row'>first_row</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>9</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>match</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>match:enrollment</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_enrollment_transcript'>enrollment_transcript</span><span class='period'>.</span><span class='id identifier rubyid_updates'>updates</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>match:enrollment</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='rparen'>)</span>
          <span class='kw'>else</span>
            <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_first_row'>first_row</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>11</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>match</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>match:enrollment</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
          <span class='id identifier rubyid_enrollment_removes'>enrollment_removes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='rbrace'>}</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='rbrace'>}</span>
          <span class='id identifier rubyid_enrollment_removes'>enrollment_removes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='rbrace'>}</span>
        <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>%</span> <span class='int'>100</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id identifier rubyid_ending'>ending</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_datetime_of_record'><span class='object_link'><a href="TimeKeeper.html#datetime_of_record-class_method" title="TimeKeeper.datetime_of_record (method)">datetime_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
          <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>processed </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_content'>--time lapse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ending'>ending</span> <span class='op'>-</span> <span class='id identifier rubyid_starting'>starting</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_starting'>starting</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_datetime_of_record'><span class='object_link'><a href="TimeKeeper.html#datetime_of_record-class_method" title="TimeKeeper.datetime_of_record (method)">datetime_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
      <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed.....</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_path'>file_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>--</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="display_family_transcripts-instance_method">
  
    #<strong>display_family_transcripts</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/transcript_generator.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_display_family_transcripts'>display_family_transcripts</span>
  <span class='id identifier rubyid_count'>count</span>  <span class='op'>=</span> <span class='int'>0</span>

  <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>family_change_sets.csv</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
    <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Subscriber HBX ID</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SSN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Last Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>First Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Action</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Section:Attribute</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Value</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Action Taken</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

    <span class='comment'># Dir.glob(&quot;#{TRANSCRIPT_PATH}/*.bin&quot;).each do |file_path|
</span>    <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='embexpr_end'>}</span><span class='tstring_content'>/xml_files_10_27/ivl_family_xmls/*.xml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file_path'>file_path</span><span class='op'>|</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='comment'># rows = Transcripts::ComparisonResult.new(Marshal.load(File.open(file_path))).family_csv_row
</span>
        <span class='id identifier rubyid_individual_parser'>individual_parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parsers.html" title="Parsers (module)">Parsers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml.html" title="Parsers::Xml (module)">Xml</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml/Cv.html" title="Parsers::Xml::Cv (module)">Cv</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml/Cv/Importers.html" title="Parsers::Xml::Cv::Importers (module)">Importers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml/Cv/Importers/FamilyParser.html" title="Parsers::Xml::Cv::Importers::FamilyParser (class)">FamilyParser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parsers/Xml/Cv/Importers/FamilyParser.html#initialize-instance_method" title="Parsers::Xml::Cv::Importers::FamilyParser#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_file_path'>file_path</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_other_family'>other_family</span> <span class='op'>=</span> <span class='id identifier rubyid_individual_parser'>individual_parser</span><span class='period'>.</span><span class='id identifier rubyid_get_family_object'>get_family_object</span>
        <span class='id identifier rubyid_transcript'>transcript</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Transcripts.html" title="Transcripts (module)">Transcripts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Transcripts/FamilyTranscript.html" title="Transcripts::FamilyTranscript (class)">FamilyTranscript</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Transcripts/FamilyTranscript.html#initialize-instance_method" title="Transcripts::FamilyTranscript#initialize (method)">new</a></span></span>
        <span class='id identifier rubyid_transcript'>transcript</span><span class='period'>.</span><span class='id identifier rubyid_find_or_build'>find_or_build</span><span class='lparen'>(</span><span class='id identifier rubyid_other_family'>other_family</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_family_importer'>family_importer</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Importers.html" title="Importers (module)">Importers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Importers/Transcripts.html" title="Importers::Transcripts (module)">Transcripts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Importers/Transcripts/FamilyTranscript.html" title="Importers::Transcripts::FamilyTranscript (class)">FamilyTranscript</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
        <span class='id identifier rubyid_family_importer'>family_importer</span><span class='period'>.</span><span class='id identifier rubyid_transcript'>transcript</span> <span class='op'>=</span> <span class='id identifier rubyid_transcript'>transcript</span><span class='period'>.</span><span class='id identifier rubyid_transcript'>transcript</span>
        <span class='id identifier rubyid_family_importer'>family_importer</span><span class='period'>.</span><span class='id identifier rubyid_market'>market</span> <span class='op'>=</span> <span class='ivar'>@market</span>
        <span class='id identifier rubyid_family_importer'>family_importer</span><span class='period'>.</span><span class='id identifier rubyid_other_family'>other_family</span> <span class='op'>=</span> <span class='id identifier rubyid_other_family'>other_family</span>
        <span class='id identifier rubyid_family_importer'>family_importer</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span>

        <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_family_importer'>family_importer</span><span class='period'>.</span><span class='id identifier rubyid_csv_row'>csv_row</span>

        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

        <span class='id identifier rubyid_first_row'>first_row</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>update</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span><span class='rbrace'>}</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
          <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_first_row'>first_row</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>match</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>match:family</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='rbrace'>}</span>
        <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>%</span> <span class='int'>100</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>processed </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed.....</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_path'>file_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="display_transcripts-instance_method">
  
    #<strong>display_transcripts</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/transcript_generator.rb', line 170</span>

<span class='kw'>def</span> <span class='id identifier rubyid_display_transcripts'>display_transcripts</span>
  <span class='id identifier rubyid_count'>count</span>  <span class='op'>=</span> <span class='int'>0</span>

  <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>person_change_sets.csv</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
    <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HBX ID</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SSN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Last Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>First Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Action</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Section:Attribute</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Value</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Action Taken</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

    <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#TRANSCRIPT_PATH-constant" title="TranscriptGenerator::TRANSCRIPT_PATH (constant)">TRANSCRIPT_PATH</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/*.bin</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file_path'>file_path</span><span class='op'>|</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span>

        <span class='comment'># rows = Transcripts::ComparisonResult.new(Marshal.load(File.open(file_path))).csv_row
</span>
        <span class='id identifier rubyid_person_importer'>person_importer</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Importers.html" title="Importers (module)">Importers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Importers/Transcripts.html" title="Importers::Transcripts (module)">Transcripts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Importers/Transcripts/PersonTranscript.html" title="Importers::Transcripts::PersonTranscript (class)">PersonTranscript</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
        <span class='id identifier rubyid_person_importer'>person_importer</span><span class='period'>.</span><span class='id identifier rubyid_transcript'>transcript</span> <span class='op'>=</span> <span class='const'>Marshal</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_file_path'>file_path</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_person_importer'>person_importer</span><span class='period'>.</span><span class='id identifier rubyid_market'>market</span> <span class='op'>=</span> <span class='ivar'>@market</span>
        <span class='id identifier rubyid_person_importer'>person_importer</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span>

        <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_person_importer'>person_importer</span><span class='period'>.</span><span class='id identifier rubyid_csv_row'>csv_row</span>

        <span class='id identifier rubyid_first_row'>first_row</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>update</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span><span class='rbrace'>}</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
          <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_first_row'>first_row</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>match</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>match:ssn</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Matched</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='rbrace'>}</span>
        <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>%</span> <span class='int'>100</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>processed </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed.....</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_path'>file_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute-instance_method">
  
    #<strong>execute</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/transcript_generator.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute'>execute</span>
  <span class='id identifier rubyid_create_directory'>create_directory</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#TRANSCRIPT_PATH-constant" title="TranscriptGenerator::TRANSCRIPT_PATH (constant)">TRANSCRIPT_PATH</a></span></span><span class='rparen'>)</span>

  <span class='ivar'>@count</span>  <span class='op'>=</span> <span class='int'>0</span>
  <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='embexpr_end'>}</span><span class='tstring_content'>/sample_xmls/*.xml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file_path'>file_path</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='ivar'>@count</span> <span class='op'>+=</span> <span class='int'>1</span>

      <span class='kw'>if</span> <span class='ivar'>@count</span> <span class='op'>%</span> <span class='int'>100</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>------</span><span class='embexpr_beg'>#{</span><span class='ivar'>@count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_individual_parser'>individual_parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parsers.html" title="Parsers (module)">Parsers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml.html" title="Parsers::Xml (module)">Xml</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml/Cv.html" title="Parsers::Xml::Cv (module)">Cv</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml/Cv/Importers.html" title="Parsers::Xml::Cv::Importers (module)">Importers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parsers/Xml/Cv/Importers/IndividualParser.html" title="Parsers::Xml::Cv::Importers::IndividualParser (class)">IndividualParser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parsers/Xml/Cv/Importers/IndividualParser.html#initialize-instance_method" title="Parsers::Xml::Cv::Importers::IndividualParser#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_file_path'>file_path</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='comment'># individual_parser = Parsers::Xml::Cv::Importers::EnrollmentParser.new(File.read(file_path))
</span>      <span class='id identifier rubyid_build_transcript'>build_transcript</span><span class='lparen'>(</span><span class='id identifier rubyid_individual_parser'>individual_parser</span><span class='period'>.</span><span class='id identifier rubyid_get_person_object'>get_person_object</span><span class='rparen'>)</span>
      <span class='comment'># build_transcript(individual_parser.get_enrollment_object)
</span>    <span class='kw'>rescue</span> <span class='const'>Exception</span>  <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_my_logger'>my_logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>failed to process </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_path'>file_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>---</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="my_logger-instance_method">
  
    #<strong>my_logger</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/transcript_generator.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_my_logger'>my_logger</span>
  <span class='ivar'>@my_logger</span> <span class='op'>||=</span> <span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='embexpr_end'>}</span><span class='tstring_content'>/log/transcripts.log</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Oct 11 09:49:50 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.2.3).
</div>

    </div>
  </body>
</html>