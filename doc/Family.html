<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Family
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Family";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (F)</a> &raquo;
    
    
    <span class="title">Family</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Family
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Family</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="DocumentsVerificationStatus.html" title="DocumentsVerificationStatus (module)">DocumentsVerificationStatus</a></span>, Mongoid::Autoinc, Mongoid::Document, Mongoid::Timestamps, <span class='object_link'><a href="SetCurrentUser.html" title="SetCurrentUser (module)">SetCurrentUser</a></span>, <span class='object_link'><a href="Sortable.html" title="Sortable (module)">Sortable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/family.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A model for grouping and organizing a <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span> with their related
<span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember(s)</a></span>, benefit enrollment eligibility, financial
assistance eligibility and availability, benefit enrollments, broker
agents, and documents.</p>

<p>Each family has one or more <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMembers</a></span>, each associated
with a <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span> instance.  Each Family has exactly one FamilyMember
designated as the <span class='object_link'><a href="#primary_applicant-instance_method" title="Family#primary_applicant (method)">#primary_applicant</a></span>. A Person can belong to more than
one Family, but may be the primary_applicant of only one active Family.</p>

<p>Family is a top level physical MongoDB Collection.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="FamilySearch/FamilySearchFamily.html" title="FamilySearch::FamilySearchFamily (class)">FamilySearch::FamilySearchFamily</a></span></p>
</div>

  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="IMMEDIATE_FAMILY-constant" class="">IMMEDIATE_FAMILY =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>self</span><span class='words_sep'> </span><span class='tstring_content'>spouse</span><span class='words_sep'> </span><span class='tstring_content'>life_partner</span><span class='words_sep'> </span><span class='tstring_content'>child</span><span class='words_sep'> </span><span class='tstring_content'>ward</span><span class='words_sep'> </span><span class='tstring_content'>foster_child</span><span class='words_sep'> </span><span class='tstring_content'>adopted_child</span><span class='words_sep'> </span><span class='tstring_content'>stepson_or_stepdaughter</span><span class='words_sep'> </span><span class='tstring_content'>stepchild</span><span class='words_sep'> </span><span class='tstring_content'>domestic_partner</span><span class='words_sep'>)</span></pre></dd>
    
  </dl>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#advance_day-class_method" title="advance_day (class method)">.<strong>advance_day</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Manage: SEPs, FamilyMemberAgeOff.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#begin_coverage_for_ivl_enrollments-class_method" title="begin_coverage_for_ivl_enrollments (class method)">.<strong>begin_coverage_for_ivl_enrollments</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_special_enrollment_period_id-class_method" title="by_special_enrollment_period_id (class method)">.<strong>by_special_enrollment_period_id</strong>(special_enrollment_period_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_search_order-class_method" title="default_search_order (class method)">.<strong>default_search_order</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the sort order to return families by primary applicant last_name,
first_name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#expire_individual_market_enrollments-class_method" title="expire_individual_market_enrollments (class method)">.<strong>expire_individual_market_enrollments</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_all_by_person-class_method" title="find_all_by_person (class method)">.<strong>find_all_by_person</strong>(person)  &#x21d2; Array&lt;Family&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get all families where this person is a member.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_case_id-class_method" title="find_by_case_id (class method)">.<strong>find_by_case_id</strong>(id)  &#x21d2; Array&lt;Family&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the family(s) with this eligibility case identifier.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_employee_role-class_method" title="find_by_employee_role (class method)">.<strong>find_by_employee_role</strong>(employee_role)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_or_build_from_employee_role-class_method" title="find_or_build_from_employee_role (class method)">.<strong>find_or_build_from_employee_role</strong>(new_employee_role)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_primary_applicant_by_person-class_method" title="find_primary_applicant_by_person (class method)">.<strong>find_primary_applicant_by_person</strong>(person)  &#x21d2; Array&lt;Family&gt; </a>
    

    
      (also: find_all_by_primary_applicant, find_by_primary_family_member, find_by_primary_applicant)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the family where this person is the primary applicant.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#min_verification_due_date_range-class_method" title="min_verification_due_date_range (class method)">.<strong>min_verification_due_date_range</strong>(start_date, end_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_enrollment_notice_for_ivl-class_method" title="send_enrollment_notice_for_ivl (class method)">.<strong>send_enrollment_notice_for_ivl</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_admin_seps-instance_method" title="#active_admin_seps (instance method)">#<strong>active_admin_seps</strong>  &#x21d2; Array&lt;SpecialEnrollmentPeriod&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get list of HBX Admin assigned <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP)
eligibilities currently available to this family.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_broker_agency_account-instance_method" title="#active_broker_agency_account (instance method)">#<strong>active_broker_agency_account</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_broker_roles-instance_method" title="#active_broker_roles (instance method)">#<strong>active_broker_roles</strong>  &#x21d2; Array&lt;BrokerRole&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the <span class='object_link'><a href="BrokerRole.html" title="BrokerRole (class)">BrokerRoles</a></span> on active enrollments.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_dependents-instance_method" title="#active_dependents (instance method)">#<strong>active_dependents</strong>  &#x21d2; Array&lt;FamilyMember&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get list of family members who are not the primary applicant.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_family_members-instance_method" title="#active_family_members (instance method)">#<strong>active_family_members</strong>  &#x21d2; Array&lt;FamilyMember&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get all active <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMembers</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_household-instance_method" title="#active_household (instance method)">#<strong>active_household</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#active_seps-instance_method" title="#active_seps (instance method)">#<strong>active_seps</strong>  &#x21d2; Array&lt;SpecialEnrollmentPeriod&gt; </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'>
<p>Use current_special_enrollment_periods</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_family_member-instance_method" title="#add_family_member (instance method)">#<strong>add_family_member</strong>(person, **opts)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span> referencing this <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_enrollments-instance_method" title="#all_enrollments (instance method)">#<strong>all_enrollments</strong>  &#x21d2; Array&lt;HbxEnrollment&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get all <span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollments</a></span> under this family&#39;s active
household.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_persons_vlp_documents_status-instance_method" title="#all_persons_vlp_documents_status (instance method)">#<strong>all_persons_vlp_documents_status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#any_unverified_enrollments%3F-instance_method" title="#any_unverified_enrollments? (instance method)">#<strong>any_unverified_enrollments?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#best_verification_due_date-instance_method" title="#best_verification_due_date (instance method)">#<strong>best_verification_due_date</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_consumer_role-instance_method" title="#build_consumer_role (instance method)">#<strong>build_consumer_role</strong>(family_member, opts = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_from_employee_role-instance_method" title="#build_from_employee_role (instance method)">#<strong>build_from_employee_role</strong>(employee_role)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_from_person-instance_method" title="#build_from_person (instance method)">#<strong>build_from_person</strong>(person)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_resident_role-instance_method" title="#build_resident_role (instance method)">#<strong>build_resident_role</strong>(family_member, opts = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_for_consumer_role-instance_method" title="#check_for_consumer_role (instance method)">#<strong>check_for_consumer_role</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_for_resident_role-instance_method" title="#check_for_resident_role (instance method)">#<strong>check_for_resident_role</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#consent_applicant-instance_method" title="#consent_applicant (instance method)">#<strong>consent_applicant</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#contingent_enrolled_active_family_members-instance_method" title="#contingent_enrolled_active_family_members (instance method)">#<strong>contingent_enrolled_active_family_members</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#contingent_enrolled_family_members_due_dates-instance_method" title="#contingent_enrolled_family_members_due_dates (instance method)">#<strong>contingent_enrolled_family_members_due_dates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#coverage_waived%3F-instance_method" title="#coverage_waived? (instance method)">#<strong>coverage_waived?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_dep_consumer_role-instance_method" title="#create_dep_consumer_role (instance method)">#<strong>create_dep_consumer_role</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_broker_agency-instance_method" title="#current_broker_agency (instance method)">#<strong>current_broker_agency</strong>  &#x21d2; BrokerAgencyAccount </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the active <span class='object_link'><a href="BrokerAgencyAccount.html" title="BrokerAgencyAccount (class)">BrokerAgencyAccount</a></span> account for this family.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_eligible_open_enrollments-instance_method" title="#current_eligible_open_enrollments (instance method)">#<strong>current_eligible_open_enrollments</strong>(options = {})  &#x21d2; Array&lt;EnrollmentEligibilityReason&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get list of Individual and SHOP market <span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReasons</a></span> currently available to this family.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_enrollment_eligibility_reasons-instance_method" title="#current_enrollment_eligibility_reasons (instance method)">#<strong>current_enrollment_eligibility_reasons</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_ivl_eligible_open_enrollments-instance_method" title="#current_ivl_eligible_open_enrollments (instance method)">#<strong>current_ivl_eligible_open_enrollments</strong>  &#x21d2; Array&lt;EnrollmentEligibilityReason&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get list of Individual market <span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReasons</a></span> currently available to this family.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_sep-instance_method" title="#current_sep (instance method)">#<strong>current_sep</strong>  &#x21d2; SpecialEnrollmentPeriod </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibility currently available to
this family with latest end on date.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_shop_eligible_open_enrollments-instance_method" title="#current_shop_eligible_open_enrollments (instance method)">#<strong>current_shop_eligible_open_enrollments</strong>(options = {})  &#x21d2; Array&lt;EnrollmentEligibilityReason&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get list of SHOP market <span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReasons</a></span> currently available to this family.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_special_enrollment_periods-instance_method" title="#current_special_enrollment_periods (instance method)">#<strong>current_special_enrollment_periods</strong>  &#x21d2; Array&lt;SpecialEnrollmentPeriod&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get list of <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibilities currently
available to this family ordered descending from start on date.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#currently_enrolled_plans-instance_method" title="#currently_enrolled_plans (instance method)">#<strong>currently_enrolled_plans</strong>(enrollment)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dependents-instance_method" title="#dependents (instance method)">#<strong>dependents</strong>  &#x21d2; Array&lt;FamilyMember&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get list of family members who are not the primary applicant.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#document_due_date-instance_method" title="#document_due_date (instance method)">#<strong>document_due_date</strong>(family_member, v_type)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#earliest_effective_ivl_sep-instance_method" title="#earliest_effective_ivl_sep (instance method)">#<strong>earliest_effective_ivl_sep</strong>  &#x21d2; SpecialEnrollmentPeriod </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the Individual market <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibility
currently available to this family with the earliest coverage effective
date.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#earliest_effective_sep-instance_method" title="#earliest_effective_sep (instance method)">#<strong>earliest_effective_sep</strong>  &#x21d2; SpecialEnrollmentPeriod </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibility currently available to
this family with the earliest coverage effective date, regardless of
Individual or SHOP Market.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#earliest_effective_shop_sep-instance_method" title="#earliest_effective_shop_sep (instance method)">#<strong>earliest_effective_shop_sep</strong>  &#x21d2; SpecialEnrollmentPeriod </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the SHOP market <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibility currently
available to this family with the earliest coverage effective date.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrolled_benefits-instance_method" title="#enrolled_benefits (instance method)">#<strong>enrolled_benefits</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrolled_hbx_enrollments-instance_method" title="#enrolled_hbx_enrollments (instance method)">#<strong>enrolled_hbx_enrollments</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrolled_including_waived_hbx_enrollments-instance_method" title="#enrolled_including_waived_hbx_enrollments (instance method)">#<strong>enrolled_including_waived_hbx_enrollments</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrolled_policy-instance_method" title="#enrolled_policy (instance method)">#<strong>enrolled_policy</strong>(family_member)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrollments-instance_method" title="#enrollments (instance method)">#<strong>enrollments</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrollments_for_display-instance_method" title="#enrollments_for_display (instance method)">#<strong>enrollments_for_display</strong>  &#x21d2; Array&lt;HbxEnrollment&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get <span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollments</a></span> that meet application criteria for
display in the UI.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_family_member_by_person-instance_method" title="#find_family_member_by_person (instance method)">#<strong>find_family_member_by_person</strong>(person)  &#x21d2; FamilyMember </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span> associated with this <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_matching_inactive_member-instance_method" title="#find_matching_inactive_member (instance method)">#<strong>find_matching_inactive_member</strong>(personish)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_family_search-instance_method" title="#generate_family_search (instance method)">#<strong>generate_family_search</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_aptc_hbx_enrollment%3F-instance_method" title="#has_aptc_hbx_enrollment? (instance method)">#<strong>has_aptc_hbx_enrollment?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_valid_e_case_id%3F-instance_method" title="#has_valid_e_case_id? (instance method)">#<strong>has_valid_e_case_id?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hire_broker_agency-instance_method" title="#hire_broker_agency (instance method)">#<strong>hire_broker_agency</strong>(broker_role_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_active%3F-instance_method" title="#is_active? (instance method)">#<strong>is_active?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_document_not_verified-instance_method" title="#is_document_not_verified (instance method)">#<strong>is_document_not_verified</strong>(type, person)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_eligible_to_enroll%3F-instance_method" title="#is_eligible_to_enroll? (instance method)">#<strong>is_eligible_to_enroll?</strong>(options = {})  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_under_ivl_open_enrollment%3F-instance_method" title="#is_under_ivl_open_enrollment? (instance method)">#<strong>is_under_ivl_open_enrollment?</strong>  &#x21d2; true, false </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine if this family has enrollment eligibility under Individual market
open enrollment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_under_open_enrollment%3F-instance_method" title="#is_under_open_enrollment? (instance method)">#<strong>is_under_open_enrollment?</strong>  &#x21d2; true, false </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine if this family has enrollment eligibility under SHOP or
Individual market open enrollment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_under_shop_open_enrollment%3F-instance_method" title="#is_under_shop_open_enrollment? (instance method)">#<strong>is_under_shop_open_enrollment?</strong>  &#x21d2; true, false </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine if this family has enrollment eligibility under SHOP market open
enrollment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_under_special_enrollment_period%3F-instance_method" title="#is_under_special_enrollment_period? (instance method)">#<strong>is_under_special_enrollment_period?</strong>  &#x21d2; true, false </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine if this family has an active <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP)
enrollment eligibility.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_active_sep-instance_method" title="#latest_active_sep (instance method)">#<strong>latest_active_sep</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_household-instance_method" title="#latest_household (instance method)">#<strong>latest_household</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_shop_sep-instance_method" title="#latest_shop_sep (instance method)">#<strong>latest_shop_sep</strong>  &#x21d2; SpecialEnrollmentPeriod </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the most recently created, active SHOP market <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span>
(SEP) eligibility currently available to this family.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#min_verification_due_date_on_family-instance_method" title="#min_verification_due_date_on_family (instance method)">#<strong>min_verification_due_date_on_family</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#people_relationship_map-instance_method" title="#people_relationship_map (instance method)">#<strong>people_relationship_map</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#person_has_an_active_enrollment%3F-instance_method" title="#person_has_an_active_enrollment? (instance method)">#<strong>person_has_an_active_enrollment?</strong>(person)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#person_is_family_member%3F-instance_method" title="#person_is_family_member? (instance method)">#<strong>person_is_family_member?</strong>(person)  &#x21d2; true, false </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine if <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span> is a member of this family.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#primary_applicant-instance_method" title="#primary_applicant (instance method)">#<strong>primary_applicant</strong>  &#x21d2; FamilyMember </a>
    

    
      (also: #primary_family_member)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span> who is head and &#39;owner&#39; of this family instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#primary_family_member=-instance_method" title="#primary_family_member= (instance method)">#<strong>primary_family_member=</strong>(new_primary_family_member)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#relate_new_member-instance_method" title="#relate_new_member (instance method)">#<strong>relate_new_member</strong>(person, relationship)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_family_member-instance_method" title="#remove_family_member (instance method)">#<strong>remove_family_member</strong>(person)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span> referenced by this <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_family_search_record-instance_method" title="#remove_family_search_record (instance method)">#<strong>remove_family_search_record</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#renewal_benefits-instance_method" title="#renewal_benefits (instance method)">#<strong>renewal_benefits</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#review_status-instance_method" title="#review_status (instance method)">#<strong>review_status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_relevant_coverage_households-instance_method" title="#save_relevant_coverage_households (instance method)">#<strong>save_relevant_coverage_households</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate_broker_agency-instance_method" title="#terminate_broker_agency (instance method)">#<strong>terminate_broker_agency</strong>(terminate_on = TimeKeeper.date_of_record)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Terminate the active Broker agency for this family.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate_date_for_shop_by_enrollment-instance_method" title="#terminate_date_for_shop_by_enrollment (instance method)">#<strong>terminate_date_for_shop_by_enrollment</strong>(enrollment = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminated_benefits-instance_method" title="#terminated_benefits (instance method)">#<strong>terminated_benefits</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_family_document_status!-instance_method" title="#update_family_document_status! (instance method)">#<strong>update_family_document_status!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#waivers_for_display-instance_method" title="#waivers_for_display (instance method)">#<strong>waivers_for_display</strong>  &#x21d2; Array&lt;HbxEnrollment&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get waived <span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollments</a></span> that meet application criteria
for display in the UI.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="DocumentsVerificationStatus.html" title="DocumentsVerificationStatus (module)">DocumentsVerificationStatus</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="DocumentsVerificationStatus.html#verification_type_status-instance_method" title="DocumentsVerificationStatus#verification_type_status (method)">#verification_type_status</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SetCurrentUser.html" title="SetCurrentUser (module)">SetCurrentUser</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SetCurrentUser.html#included-class_method" title="SetCurrentUser.included (method)">included</a></span>, <span class='object_link'><a href="SetCurrentUser.html#save_user-instance_method" title="SetCurrentUser#save_user (method)">#save_user</a></span>, <span class='object_link'><a href="SetCurrentUser.html#update_user-instance_method" title="SetCurrentUser#update_user (method)">#update_user</a></span></p>

  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="advance_day-class_method">
  
    .<strong>advance_day</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Manage: SEPs, FamilyMemberAgeOff</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


812
813
814
815
816</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 812</span>

<span class='kw'>def</span> <span class='id identifier rubyid_advance_day'>advance_day</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_expire_individual_market_enrollments'>expire_individual_market_enrollments</span>
  <span class='id identifier rubyid_begin_coverage_for_ivl_enrollments'>begin_coverage_for_ivl_enrollments</span>
  <span class='id identifier rubyid_send_enrollment_notice_for_ivl'>send_enrollment_notice_for_ivl</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="begin_coverage_for_ivl_enrollments-class_method">
  
    .<strong>begin_coverage_for_ivl_enrollments</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


795
796
797
798
799
800
801
802
803
804
805
806
807
808
809</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 795</span>

<span class='kw'>def</span> <span class='id identifier rubyid_begin_coverage_for_ivl_enrollments'>begin_coverage_for_ivl_enrollments</span>
  <span class='id identifier rubyid_current_benefit_period'>current_benefit_period</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="HbxProfile.html" title="HbxProfile (class)">HbxProfile</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_hbx'><span class='object_link'><a href="HbxProfile.html#current_hbx-class_method" title="HbxProfile.current_hbx (method)">current_hbx</a></span></span><span class='period'>.</span><span class='id identifier rubyid_benefit_sponsorship'>benefit_sponsorship</span><span class='period'>.</span><span class='id identifier rubyid_current_benefit_coverage_period'>current_benefit_coverage_period</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='symbol'>:effective_on</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_current_benefit_period'>current_benefit_period</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span>
      <span class='symbol'>:kind</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>individual</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>auto_renewing</span><span class='tstring_end'>&#39;</span></span>
    <span class='rbrace'>}</span>
  <span class='id identifier rubyid_families'>families</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_query'>query</span><span class='rbrace'>}</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_families'>families</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_family'>family</span><span class='op'>|</span>
    <span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enrollment'>enrollment</span><span class='op'>|</span>
      <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_begin_coverage!'>begin_coverage!</span> <span class='kw'>if</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_may_begin_coverage?'>may_begin_coverage?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_special_enrollment_period_id-class_method">
  
    .<strong>by_special_enrollment_period_id</strong>(special_enrollment_period_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


929
930
931</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 929</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_special_enrollment_period_id'>by_special_enrollment_period_id</span><span class='lparen'>(</span><span class='id identifier rubyid_special_enrollment_period_id'>special_enrollment_period_id</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>special_enrollment_periods._id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_special_enrollment_period_id'>special_enrollment_period_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_search_order-class_method">
  
    .<strong>default_search_order</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set the sort order to return families by primary applicant last_name,
first_name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


772
773
774</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 772</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_search_order'>default_search_order</span>
  <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>primary_applicant.name_last</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>primary_applicant.name_first</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="expire_individual_market_enrollments-class_method">
  
    .<strong>expire_individual_market_enrollments</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 776</span>

<span class='kw'>def</span> <span class='id identifier rubyid_expire_individual_market_enrollments'>expire_individual_market_enrollments</span>
  <span class='id identifier rubyid_current_benefit_period'>current_benefit_period</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="HbxProfile.html" title="HbxProfile (class)">HbxProfile</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_hbx'><span class='object_link'><a href="HbxProfile.html#current_hbx-class_method" title="HbxProfile.current_hbx (method)">current_hbx</a></span></span><span class='period'>.</span><span class='id identifier rubyid_benefit_sponsorship'>benefit_sponsorship</span><span class='period'>.</span><span class='id identifier rubyid_current_benefit_coverage_period'>current_benefit_coverage_period</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='symbol'>:effective_on</span><span class='period'>.</span><span class='id identifier rubyid_lt'>lt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_current_benefit_period'>current_benefit_period</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span>
      <span class='symbol'>:kind</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>individual</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='symbol'>:aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#ENROLLED_STATUSES-constant" title="HbxEnrollment::ENROLLED_STATUSES (constant)">ENROLLED_STATUSES</a></span></span> <span class='op'>-</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>coverage_termination_pending</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enrolled_contingent</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unverified</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_families'>families</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_query'>query</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_families'>families</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_family'>family</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enrollment'>enrollment</span><span class='op'>|</span>
        <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_expire_coverage!'>expire_coverage!</span> <span class='kw'>if</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_may_expire_coverage?'>may_expire_coverage?</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to expire enrollments for family </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_e_case_id'>e_case_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_all_by_person-class_method">
  
    .<strong>find_all_by_person</strong>(person)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="" title="Family (class)">Family</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get all families where this person is a member</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>person</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Person to match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="Family (class)">Family</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The families where this person is a member</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


860
861
862</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 860</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_all_by_person'>find_all_by_person</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>family_members.person_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_by_case_id-class_method">
  
    .<strong>find_by_case_id</strong>(id)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="" title="Family (class)">Family</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the family(s) with this eligibility case identifier</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Eligibility case ID to match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="Family (class)">Family</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The families with this eligibilitye case id</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


883
884
885</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 883</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_by_case_id'>find_by_case_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e_case_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_by_employee_role-class_method">
  
    .<strong>find_by_employee_role</strong>(employee_role)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


839
840
841</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 839</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_by_employee_role'>find_by_employee_role</span><span class='lparen'>(</span><span class='id identifier rubyid_employee_role'>employee_role</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_find_all_by_primary_applicant'>find_all_by_primary_applicant</span><span class='lparen'>(</span><span class='id identifier rubyid_employee_role'>employee_role</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_or_build_from_employee_role-class_method">
  
    .<strong>find_or_build_from_employee_role</strong>(new_employee_role)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


843
844
845
846
847
848
849
850
851
852
853
854
855</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 843</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_or_build_from_employee_role'>find_or_build_from_employee_role</span><span class='lparen'>(</span><span class='id identifier rubyid_new_employee_role'>new_employee_role</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_existing_family'>existing_family</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_employee_role'><span class='object_link'><a href="#find_by_employee_role-class_method" title="Family.find_by_employee_role (method)">find_by_employee_role</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_employee_role'>new_employee_role</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_existing_family'>existing_family</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_existing_family'>existing_family</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_family'>family</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_build_from_employee_role'>build_from_employee_role</span><span class='lparen'>(</span><span class='id identifier rubyid_new_employee_role'>new_employee_role</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
    <span class='id identifier rubyid_family'>family</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_primary_applicant_by_person-class_method">
  
    .<strong>find_primary_applicant_by_person</strong>(person)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="" title="Family (class)">Family</a></span>&gt;</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='find_all_by_primary_applicant-class_method'>find_all_by_primary_applicant</span>, <span id='find_by_primary_family_member-class_method'>find_by_primary_family_member</span>, <span id='find_by_primary_applicant-class_method'>find_by_primary_applicant</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the family where this person is the primary applicant</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>person</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Person to match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="Family (class)">Family</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The families where this person is primary applicant</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


867
868
869</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 867</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_primary_applicant_by_person'>find_primary_applicant_by_person</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_find_all_by_person'>find_all_by_person</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_primary_applicant'>primary_applicant</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="min_verification_due_date_range-class_method">
  
    .<strong>min_verification_due_date_range</strong>(start_date, end_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1063
1064
1065
1066
1067
1068
1069
1070</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1063</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_min_verification_due_date_range'>min_verification_due_date_range</span><span class='lparen'>(</span><span class='id identifier rubyid_start_date'>start_date</span><span class='comma'>,</span><span class='id identifier rubyid_end_date'>end_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_timekeeper_date'>timekeeper_date</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>+</span> <span class='int'>95</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_timekeeper_date'>timekeeper_date</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_start_date'>start_date</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_timekeeper_date'>timekeeper_date</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_end_date'>end_date</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_or'>or</span><span class='lparen'>(</span><span class='symbol'>:min_verification_due_date</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:$gte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_start_date'>start_date</span><span class='comma'>,</span> <span class='symbol'>:$lte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_end_date'>end_date</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_or'>or</span><span class='lparen'>(</span><span class='symbol'>:min_verification_due_date</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
   <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_or'>or</span><span class='lparen'>(</span><span class='symbol'>:min_verification_due_date</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:$gte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_start_date'>start_date</span><span class='comma'>,</span> <span class='symbol'>:$lte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_end_date'>end_date</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_enrollment_notice_for_ivl-class_method">
  
    .<strong>send_enrollment_notice_for_ivl</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 818</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_enrollment_notice_for_ivl'>send_enrollment_notice_for_ivl</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span> <span class='op'>-</span> <span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_in_time_zone'>in_time_zone</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Eastern Time (US &amp; Canada)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span>
  <span class='id identifier rubyid_end_time'>end_time</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span> <span class='op'>-</span> <span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_in_time_zone'>in_time_zone</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Eastern Time (US &amp; Canada)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span>
  <span class='id identifier rubyid_families'>families</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$elemMatch</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>kind</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>individual</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$in</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#ENROLLED_STATUSES-constant" title="HbxEnrollment::ENROLLED_STATUSES (constant)">ENROLLED_STATUSES</a></span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>created_at</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$gte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$lte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='rbrace'>}</span> <span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_families'>families</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_family'>family</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_person'>person</span> <span class='op'>=</span> <span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_primary_applicant'>primary_applicant</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span>
      <span class='const'><span class='object_link'><a href="IvlNoticesNotifierJob.html" title="IvlNoticesNotifierJob (class)">IvlNoticesNotifierJob</a></span></span><span class='period'>.</span><span class='id identifier rubyid_perform_later'>perform_later</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>enrollment_notice</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to deliver enrollment notice </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> due to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="active_admin_seps-instance_method">
  
    #<strong>active_admin_seps</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get list of HBX Admin assigned <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP)
eligibilities currently available to this family</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the list of HBX Admin assigned <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriods</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_active_seps'>active_seps</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The HBX Admin assigned SEP eligibilities active on today&#39;s date</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


488
489
490</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 488</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_admin_seps'>active_admin_seps</span>
  <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span> <span class='id identifier rubyid_sep'>sep</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_sep'>sep</span><span class='period'>.</span><span class='id identifier rubyid_admin_flag'>admin_flag</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_broker_agency_account-instance_method">
  
    #<strong>active_broker_agency_account</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 236</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span>
  <span class='id identifier rubyid_broker_agency_accounts'>broker_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_baa'>baa</span><span class='op'>|</span> <span class='id identifier rubyid_baa'>baa</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_broker_roles-instance_method">
  
    #<strong>active_broker_roles</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="BrokerRole.html" title="BrokerRole (class)">BrokerRole</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the <span class='object_link'><a href="BrokerRole.html" title="BrokerRole (class)">BrokerRoles</a></span> on active enrollments. This method queries
enrollment transactions, thus may return a broker who the family has since
terminated.  Compare this to the active broker returned by
<span class='object_link'><a href="#current_broker_agency-instance_method" title="Family#current_broker_agency (method)">#current_broker_agency</a></span>. If this family has employer-sponsored benefits,
the employer&#39;s broker choice will appear in transactions for those
enrollments.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the active <span class='object_link'><a href="BrokerRole.html" title="BrokerRole (class)">BrokerRoles</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_active_broker_roles'>active_broker_roles</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="BrokerRole.html" title="BrokerRole (class)">BrokerRole</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The <span class='object_link'><a href="BrokerRole.html" title="BrokerRole (class)">BrokerRoles</a></span> on this family&#39;s active enrollments</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#current_broker_agency-instance_method" title="Family#current_broker_agency (method)">#current_broker_agency</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


762
763
764</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 762</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_broker_roles'>active_broker_roles</span>
  <span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_broker_role'>broker_role</span> <span class='kw'>if</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_broker_role'>broker_role</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='rbrace'>}</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_dependents-instance_method">
  
    #<strong>active_dependents</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get list of family members who are not the primary applicant</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Which family members are non-primary applicants?</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_dependents'>dependents</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the list of dependents are active</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


681
682
683</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 681</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_dependents'>active_dependents</span>
  <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:is_primary_applicant</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_family_member'>family_member</span><span class='op'>|</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_family_members-instance_method">
  
    #<strong>active_family_members</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get all active <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMembers</a></span></p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Who are the active members for this family?</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_active_family_members'>active_family_members</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the active members of this family</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 320</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_family_members'>active_family_members</span>
  <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_family_member'>family_member</span><span class='op'>|</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_household-instance_method">
  
    #<strong>active_household</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 253</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_household'>active_household</span>
  <span class='comment'># households.detect { |household| household.is_active? }
</span>  <span class='id identifier rubyid_latest_household'>latest_household</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_seps-instance_method">
  
    #<strong>active_seps</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'>
<p>Use current_special_enrollment_periods</p>
</div></div>

<p>Get list of <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibilities currently
available to this family</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the list of <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriods</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_active_seps'>active_seps</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The SEP eligibilities active on today&#39;s date</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 473</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_seps'>active_seps</span>
  <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span> <span class='id identifier rubyid_sep'>sep</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_family_member-instance_method">
  
    #<strong>add_family_member</strong>(person, **opts)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span> referencing this <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>person</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The person to add to the family.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The options to create the family member.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:is_primary_applicant</span>
          <span class="type">(<tt>true</tt>, <tt>false</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>This person is the primary family member</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:is_coverage_applicant</span>
          <span class="type">(<tt>true</tt>, <tt>false</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>This person may enroll in coverage</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:is_consent_applicant</span>
          <span class="type">(<tt>true</tt>, <tt>false</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>This person is consent applicant</p>
</div>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 618</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_family_member'>add_family_member</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_is_primary_applicant'>is_primary_applicant</span>  <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:is_primary_applicant</span><span class='rbracket'>]</span>  <span class='op'>||</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_is_coverage_applicant'>is_coverage_applicant</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:is_coverage_applicant</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_is_consent_applicant'>is_consent_applicant</span>  <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:is_consent_applicant</span><span class='rbracket'>]</span>  <span class='op'>||</span> <span class='kw'>false</span>

  <span class='id identifier rubyid_existing_family_member'>existing_family_member</span> <span class='op'>=</span> <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_fm'>fm</span><span class='op'>|</span> <span class='id identifier rubyid_fm'>fm</span><span class='period'>.</span><span class='id identifier rubyid_person_id'>person_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_existing_family_member'>existing_family_member</span>
    <span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_add_household_coverage_member'>add_household_coverage_member</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_family_member'>existing_family_member</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_existing_family_member'>existing_family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_active'>is_active</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_existing_family_member'>existing_family_member</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_family_member'>family_member</span> <span class='op'>=</span> <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span>
      <span class='label'>person:</span> <span class='id identifier rubyid_person'>person</span><span class='comma'>,</span>
      <span class='label'>is_primary_applicant:</span> <span class='id identifier rubyid_is_primary_applicant'>is_primary_applicant</span><span class='comma'>,</span>
      <span class='label'>is_coverage_applicant:</span> <span class='id identifier rubyid_is_coverage_applicant'>is_coverage_applicant</span><span class='comma'>,</span>
      <span class='label'>is_consent_applicant:</span> <span class='id identifier rubyid_is_consent_applicant'>is_consent_applicant</span>
    <span class='rparen'>)</span>

  <span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_add_household_coverage_member'>add_household_coverage_member</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_family_member'>family_member</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_enrollments-instance_method">
  
    #<strong>all_enrollments</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get all <span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollments</a></span> under this family&#39;s active
household.  Includes active and inactive enrollments.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The <span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollments</a></span> for this family&#39;s active household</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


935
936
937
938
939</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 935</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_enrollments'>all_enrollments</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_persons_vlp_documents_status-instance_method">
  
    #<strong>all_persons_vlp_documents_status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1072</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_persons_vlp_documents_status'>all_persons_vlp_documents_status</span>
  <span class='id identifier rubyid_documents_list'>documents_list</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_document_status_outstanding'>document_status_outstanding</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_active_family_members'>active_family_members</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_member'>member</span><span class='op'>|</span>
    <span class='id identifier rubyid_member'>member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_verification_types'>verification_types</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type'>type</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_member'>member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_consumer_role'>consumer_role</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_is_document_not_verified'>is_document_not_verified</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_member'>member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_documents_list'>documents_list</span> <span class='op'>&lt;&lt;</span>  <span class='lparen'>(</span><span class='id identifier rubyid_member'>member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_has_docs_for_type?'>has_docs_for_type?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_verification_type_status'>verification_type_status</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_member'>member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>outstanding</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_document_status_outstanding'>document_status_outstanding</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_member'>member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_has_outstanding_documents?'>has_outstanding_documents?</span>
    <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>case</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_documents_list'>documents_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_documents_list'>documents_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Partially Uploaded</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='id identifier rubyid_documents_list'>documents_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_documents_list'>documents_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_document_status_outstanding'>document_status_outstanding</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>outstanding</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Partially Uploaded</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fully Uploaded</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='op'>!</span><span class='id identifier rubyid_documents_list'>documents_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_documents_list'>documents_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>None</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="any_unverified_enrollments?-instance_method">
  
    #<strong>any_unverified_enrollments?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


766
767
768</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 766</span>

<span class='kw'>def</span> <span class='id identifier rubyid_any_unverified_enrollments?'>any_unverified_enrollments?</span>
  <span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_verification_needed'>verification_needed</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="best_verification_due_date-instance_method">
  
    #<strong>best_verification_due_date</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1009
1010
1011
1012
1013
1014</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1009</span>

<span class='kw'>def</span> <span class='id identifier rubyid_best_verification_due_date'>best_verification_due_date</span>
  <span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>=</span> <span class='id identifier rubyid_contingent_enrolled_family_members_due_dates'>contingent_enrolled_family_members_due_dates</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_date'>date</span><span class='op'>|</span>
    <span class='id identifier rubyid_date'>date</span> <span class='op'>&gt;</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_mjd'>mjd</span> <span class='op'>-</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_mjd'>mjd</span><span class='rparen'>)</span> <span class='op'>&gt;=</span> <span class='int'>30</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>||</span> <span class='id identifier rubyid_contingent_enrolled_family_members_due_dates'>contingent_enrolled_family_members_due_dates</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_consumer_role-instance_method">
  
    #<strong>build_consumer_role</strong>(family_member, opts = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


888
889
890
891
892
893</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 888</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_consumer_role'>build_consumer_role</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_person'>person</span> <span class='op'>=</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_build_consumer_role'>build_consumer_role</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:is_applicant</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_from_employee_role-instance_method">
  
    #<strong>build_from_employee_role</strong>(employee_role)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


595
596
597</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 595</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_from_employee_role'>build_from_employee_role</span><span class='lparen'>(</span><span class='id identifier rubyid_employee_role'>employee_role</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_build_from_person'>build_from_person</span><span class='lparen'>(</span><span class='id identifier rubyid_employee_role'>employee_role</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_from_person-instance_method">
  
    #<strong>build_from_person</strong>(person)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


599
600
601
602
603</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 599</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_from_person'>build_from_person</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_family_member'>add_family_member</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='comma'>,</span> <span class='label'>is_primary_applicant:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_person_relationships'>person_relationships</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_kin'>kin</span><span class='op'>|</span> <span class='id identifier rubyid_add_family_member'>add_family_member</span><span class='lparen'>(</span><span class='id identifier rubyid_kin'>kin</span><span class='period'>.</span><span class='id identifier rubyid_relative'>relative</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_resident_role-instance_method">
  
    #<strong>build_resident_role</strong>(family_member, opts = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


903
904
905
906
907
908</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 903</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_resident_role'>build_resident_role</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_person'>person</span> <span class='op'>=</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_resident_role'>resident_role</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_build_resident_role'>build_resident_role</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:is_applicant</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_for_consumer_role-instance_method">
  
    #<strong>check_for_consumer_role</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


895
896
897
898
899
900
901</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 895</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_for_consumer_role'>check_for_consumer_role</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_primary_applicant'>primary_applicant</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_active_family_members'>active_family_members</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_family_member'>family_member</span><span class='op'>|</span>
      <span class='id identifier rubyid_build_consumer_role'>build_consumer_role</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_for_resident_role-instance_method">
  
    #<strong>check_for_resident_role</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


910
911
912
913
914
915
916</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 910</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_for_resident_role'>check_for_resident_role</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_primary_applicant'>primary_applicant</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_resident_role'>resident_role</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_active_family_members'>active_family_members</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_family_member'>family_member</span><span class='op'>|</span>
      <span class='id identifier rubyid_build_resident_role'>build_resident_role</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="consent_applicant-instance_method">
  
    #<strong>consent_applicant</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 310</span>

<span class='kw'>def</span> <span class='id identifier rubyid_consent_applicant'>consent_applicant</span>
  <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_family_member'>family_member</span><span class='op'>|</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_consent_applicant?'>is_consent_applicant?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="contingent_enrolled_active_family_members-instance_method">
  
    #<strong>contingent_enrolled_active_family_members</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1031
1032
1033
1034
1035
1036
1037
1038
1039</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1031</span>

<span class='kw'>def</span> <span class='id identifier rubyid_contingent_enrolled_active_family_members'>contingent_enrolled_active_family_members</span>
  <span class='id identifier rubyid_enrolled_family_members'>enrolled_family_members</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_family_member'>family_member</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_enrolled_policy'>enrolled_policy</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='id identifier rubyid_enrolled_family_members'>enrolled_family_members</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_family_member'>family_member</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_enrolled_family_members'>enrolled_family_members</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="contingent_enrolled_family_members_due_dates-instance_method">
  
    #<strong>contingent_enrolled_family_members_due_dates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1016
1017
1018
1019
1020
1021
1022
1023
1024
1025</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1016</span>

<span class='kw'>def</span> <span class='id identifier rubyid_contingent_enrolled_family_members_due_dates'>contingent_enrolled_family_members_due_dates</span>
  <span class='id identifier rubyid_due_dates'>due_dates</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_contingent_enrolled_active_family_members'>contingent_enrolled_active_family_members</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_family_member'>family_member</span><span class='op'>|</span>
    <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_verification_types'>verification_types</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_v_type'>v_type</span><span class='op'>|</span>
      <span class='id identifier rubyid_due_dates'>due_dates</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_document_due_date'>document_due_date</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='comma'>,</span> <span class='id identifier rubyid_v_type'>v_type</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_due_dates'>due_dates</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
  <span class='id identifier rubyid_due_dates'>due_dates</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="coverage_waived?-instance_method">
  
    #<strong>coverage_waived?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 240</span>

<span class='kw'>def</span> <span class='id identifier rubyid_coverage_waived?'>coverage_waived?</span>
  <span class='id identifier rubyid_latest_household'>latest_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='kw'>and</span> <span class='id identifier rubyid_latest_household'>latest_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_waived'>waived</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_dep_consumer_role-instance_method">
  
    #<strong>create_dep_consumer_role</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1001
1002
1003
1004
1005
1006
1007</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1001</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_dep_consumer_role'>create_dep_consumer_role</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_dependents'>dependents</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_dependents'>dependents</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_member'>member</span><span class='op'>|</span>
      <span class='id identifier rubyid_build_consumer_role'>build_consumer_role</span><span class='lparen'>(</span><span class='id identifier rubyid_member'>member</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_broker_agency-instance_method">
  
    #<strong>current_broker_agency</strong>  &#x21d2; <tt><span class='object_link'><a href="BrokerAgencyAccount.html" title="BrokerAgencyAccount (class)">BrokerAgencyAccount</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the active <span class='object_link'><a href="BrokerAgencyAccount.html" title="BrokerAgencyAccount (class)">BrokerAgencyAccount</a></span> account for this family. New
Individual market enrollments will include this broker in the enrollment
transaction.  If this family has employer-sponsored benefits, transactions
for those enrollments will include the employer&#39;s broker choice rater
than the family-designated broker.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the active <span class='object_link'><a href="BrokerAgencyAccount.html" title="BrokerAgencyAccount (class)">BrokerAgencyAccount</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_current_broker_agency'>current_broker_agency</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="BrokerAgencyAccount.html" title="BrokerAgencyAccount (class)">BrokerAgencyAccount</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The active broker agency account for this family</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#active_broker_roles-instance_method" title="Family#active_broker_roles (method)">#active_broker_roles</a></span></li>
    
      <li><span class='object_link'><a href="#hire_broker_agency-instance_method" title="Family#hire_broker_agency (method)">#hire_broker_agency</a></span></li>
    
      <li><span class='object_link'><a href="#terminate_broker_agency-instance_method" title="Family#terminate_broker_agency (method)">#terminate_broker_agency</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


748
749
750</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 748</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_broker_agency'>current_broker_agency</span>
  <span class='id identifier rubyid_broker_agency_accounts'>broker_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_account'>account</span><span class='op'>|</span> <span class='id identifier rubyid_account'>account</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_eligible_open_enrollments-instance_method">
  
    #<strong>current_eligible_open_enrollments</strong>(options = {})  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReason</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get list of Individual and SHOP market <span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReasons</a></span> currently available to this family</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the list of <span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReasons</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_current_ivl_eligible_open_enrollments'>current_ivl_eligible_open_enrollments</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReason</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The SHOP and Individual Market EnrollmentEligibilityReasons active for
this family on today&#39;s date</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#current_ivl_eligible_open_enrollments-instance_method" title="Family#current_ivl_eligible_open_enrollments (method)">#current_ivl_eligible_open_enrollments</a></span></li>
    
      <li><span class='object_link'><a href="#current_shop_eligible_open_enrollments-instance_method" title="Family#current_shop_eligible_open_enrollments (method)">#current_shop_eligible_open_enrollments</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394
395
396</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 394</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_eligible_open_enrollments'>current_eligible_open_enrollments</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_shop_eligible_open_enrollments'>current_shop_eligible_open_enrollments</span><span class='lparen'>(</span><span class='label'>qle:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:qle</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_current_ivl_eligible_open_enrollments'>current_ivl_eligible_open_enrollments</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_enrollment_eligibility_reasons-instance_method">
  
    #<strong>current_enrollment_eligibility_reasons</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 340</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_enrollment_eligibility_reasons'>current_enrollment_eligibility_reasons</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_special_enrollment_periods'>current_special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReason</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="EnrollmentEligibilityReason.html#initialize-instance_method" title="EnrollmentEligibilityReason#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_sep'>sep</span><span class='rparen'>)</span>
  <span class='kw'>end</span> <span class='op'>+</span> <span class='id identifier rubyid_current_eligible_open_enrollments'>current_eligible_open_enrollments</span><span class='lparen'>(</span><span class='label'>qle:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:qle</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_ivl_eligible_open_enrollments-instance_method">
  
    #<strong>current_ivl_eligible_open_enrollments</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReason</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get list of Individual market <span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReasons</a></span> currently available to this family</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the list of <span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReasons</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_current_ivl_eligible_open_enrollments'>current_ivl_eligible_open_enrollments</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReason</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The Individual market EnrollmentEligibilityReasons active for this family
on today&#39;s date</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


404
405
406
407
408
409
410
411
412
413
414
415</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 404</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_ivl_eligible_open_enrollments'>current_ivl_eligible_open_enrollments</span>
  <span class='id identifier rubyid_eligible_open_enrollments'>eligible_open_enrollments</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_benefit_sponsorship'>benefit_sponsorship</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="HbxProfile.html" title="HbxProfile (class)">HbxProfile</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_hbx'><span class='object_link'><a href="HbxProfile.html#current_hbx-class_method" title="HbxProfile.current_hbx (method)">current_hbx</a></span></span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:benefit_sponsorship</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_benefit_sponsorship'>benefit_sponsorship</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:benefit_coverage_periods</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_benefit_coverage_period'>benefit_coverage_period</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_benefit_coverage_period'>benefit_coverage_period</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment_contains?'>open_enrollment_contains?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_eligible_open_enrollments'>eligible_open_enrollments</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReason</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="EnrollmentEligibilityReason.html#initialize-instance_method" title="EnrollmentEligibilityReason#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_benefit_sponsorship'>benefit_sponsorship</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_eligible_open_enrollments'>eligible_open_enrollments</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_sep-instance_method">
  
    #<strong>current_sep</strong>  &#x21d2; <tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibility currently available to
this family with latest end on date</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> with latest end on date</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_current_sep'>current_sep</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The SEP eligibility active on today&#39;s date with latest end on date</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


591
592
593</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 591</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_sep'>current_sep</span>
  <span class='id identifier rubyid_active_seps'>active_seps</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span> <span class='id identifier rubyid_sep'>sep</span><span class='period'>.</span><span class='id identifier rubyid_end_on'>end_on</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_shop_eligible_open_enrollments-instance_method">
  
    #<strong>current_shop_eligible_open_enrollments</strong>(options = {})  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReason</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get list of SHOP market <span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReasons</a></span> currently available to this family</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the list of <span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReasons</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_current_shop_eligible_open_enrollments'>current_shop_eligible_open_enrollments</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReason</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The SHOP market EnrollmentEligibilityReasons active for this family on
today&#39;s date</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 423</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_shop_eligible_open_enrollments'>current_shop_eligible_open_enrollments</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_eligible_open_enrollments'>eligible_open_enrollments</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span> <span class='op'>=</span> <span class='id identifier rubyid_primary_applicant'>primary_applicant</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span> <span class='kw'>if</span> <span class='id identifier rubyid_primary_applicant'>primary_applicant</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_employee_role'>employee_role</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_benefit_group'>benefit_group</span> <span class='op'>=</span> <span class='id identifier rubyid_employee_role'>employee_role</span><span class='period'>.</span><span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='lparen'>(</span><span class='label'>qle:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:qle</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_employee_role'>employee_role</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:employer_profile</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:published_plan_year</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:enrolling?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_effective_on_for'>effective_on_for</span><span class='lparen'>(</span><span class='id identifier rubyid_employee_role'>employee_role</span><span class='period'>.</span><span class='id identifier rubyid_hired_on'>hired_on</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span>

      <span class='id identifier rubyid_eligible_open_enrollments'>eligible_open_enrollments</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="EnrollmentEligibilityReason.html" title="EnrollmentEligibilityReason (class)">EnrollmentEligibilityReason</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="EnrollmentEligibilityReason.html#initialize-instance_method" title="EnrollmentEligibilityReason#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_eligible_open_enrollments'>eligible_open_enrollments</span>

  <span class='comment'># original implementation - to be removed after testing is proved to work - 2015-09-03
</span>  <span class='comment'># return [] unless primary_applicant
</span>  <span class='comment'># pri_person = primary_applicant.person
</span>  <span class='comment'># return [] unless pri_person
</span>  <span class='comment'># employee_role = pri_person.employee_roles.first
</span>  <span class='comment'># return [] unless employee_role
</span>  <span class='comment'># employer_profile = employee_role.employer_profile
</span>  <span class='comment'># return [] unless employer_profile
</span>  <span class='comment'># benefit_group = employee_role.benefit_group
</span>  <span class='comment'># return [] unless benefit_group
</span>  <span class='comment'># return [] if benefit_group.effective_on_for(employee_role.hired_on) &gt; benefit_group.start_on
</span>  <span class='comment'># return [] unless employer_profile.published_plan_year.enrolling?
</span>  <span class='comment'># [EnrollmentEligibilityReason.new(employer_profile)]
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_special_enrollment_periods-instance_method">
  
    #<strong>current_special_enrollment_periods</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get list of <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibilities currently
available to this family ordered descending from start on date</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the list of <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriods</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_current_special_enrollment_periods'>current_special_enrollment_periods</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The SEP eligibilities active on today&#39;s date</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#active_seps-instance_method" title="Family#active_seps (method)">#active_seps</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


501
502
503
504
505</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 501</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_special_enrollment_periods'>current_special_enrollment_periods</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='id identifier rubyid_seps'>seps</span> <span class='op'>=</span> <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:start_on</span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_only'>only</span><span class='lparen'>(</span><span class='symbol'>:special_enrollment_periods</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_seps'>seps</span><span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_list'>list</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='op'>|</span> <span class='id identifier rubyid_list'>list</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_event'>event</span> <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span><span class='semicolon'>;</span> <span class='id identifier rubyid_list'>list</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="currently_enrolled_plans-instance_method">
  
    #<strong>currently_enrolled_plans</strong>(enrollment)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270
271
272
273
274
275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 268</span>

<span class='kw'>def</span> <span class='id identifier rubyid_currently_enrolled_plans'>currently_enrolled_plans</span><span class='lparen'>(</span><span class='id identifier rubyid_enrollment'>enrollment</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_enrolled_plans'>enrolled_plans</span> <span class='op'>=</span> <span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_enrolled_and_renewing'>enrolled_and_renewing</span><span class='period'>.</span><span class='id identifier rubyid_by_coverage_kind'>by_coverage_kind</span><span class='lparen'>(</span><span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_coverage_kind'>coverage_kind</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_is_shop?'>is_shop?</span>
    <span class='id identifier rubyid_bg_ids'>bg_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_sponsored_benefit_package'>sponsored_benefit_package</span><span class='period'>.</span><span class='id identifier rubyid_benefit_application'>benefit_application</span><span class='period'>.</span><span class='id identifier rubyid_benefit_packages'>benefit_packages</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_enrolled_plans'>enrolled_plans</span> <span class='op'>=</span> <span class='id identifier rubyid_enrolled_plans'>enrolled_plans</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:sponsored_benefit_package_id</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_bg_ids'>bg_ids</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_enrolled_plans'>enrolled_plans</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:product_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dependents-instance_method">
  
    #<strong>dependents</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get list of family members who are not the primary applicant</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Which family members are non-primary applicants?</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_dependents'>dependents</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the list of dependents are active and inactive</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


671
672
673</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 671</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dependents'>dependents</span>
  <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:is_primary_applicant</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="document_due_date-instance_method">
  
    #<strong>document_due_date</strong>(family_member, v_type)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1041
1042
1043
1044
1045</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1041</span>

<span class='kw'>def</span> <span class='id identifier rubyid_document_due_date'>document_due_date</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='comma'>,</span> <span class='id identifier rubyid_v_type'>v_type</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_is_type_verified?'>is_type_verified?</span><span class='lparen'>(</span><span class='id identifier rubyid_v_type'>v_type</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sv'>sv</span> <span class='op'>=</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_special_verifications'>special_verifications</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>verification_type:</span> <span class='id identifier rubyid_v_type'>v_type</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:created_at</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_sv'>sv</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='id identifier rubyid_sv'>sv</span><span class='period'>.</span><span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="earliest_effective_ivl_sep-instance_method">
  
    #<strong>earliest_effective_ivl_sep</strong>  &#x21d2; <tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the Individual market <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibility
currently available to this family with the earliest coverage effective
date. This is a method to obtain the &#39;most advantageous&#39; coverage,
based on earliest start date</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the Individual market <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> with earliest effective
date</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_earliest_effective_ivl_sep'>earliest_effective_ivl_sep</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The Individual market SEP eligibility active on today&#39;s date with
earliest coverage effective date</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#earliest_effective_sep-instance_method" title="Family#earliest_effective_sep (method)">#earliest_effective_sep</a></span></li>
    
      <li><span class='object_link'><a href="#earliest_effective_shop_sep-instance_method" title="Family#earliest_effective_shop_sep (method)">#earliest_effective_shop_sep</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


551
552
553</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 551</span>

<span class='kw'>def</span> <span class='id identifier rubyid_earliest_effective_ivl_sep'>earliest_effective_ivl_sep</span>
  <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_individual_market'>individual_market</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:effective_on</span><span class='period'>.</span><span class='id identifier rubyid_asc'>asc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span> <span class='id identifier rubyid_sep'>sep</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="earliest_effective_sep-instance_method">
  
    #<strong>earliest_effective_sep</strong>  &#x21d2; <tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibility currently available to
this family with the earliest coverage effective date, regardless of
Individual or SHOP Market. This is a method to obtain the &#39;most
advantageous&#39; coverage, based on earliest start date</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> with earliest effective date</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_earliest_effective_sep'>earliest_effective_sep</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The SEP eligibility active on today&#39;s date with earliest coverage
effective date</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#earliest_effective_shop_sep-instance_method" title="Family#earliest_effective_shop_sep (method)">#earliest_effective_shop_sep</a></span></li>
    
      <li><span class='object_link'><a href="#earliest_effective_ivl_sep-instance_method" title="Family#earliest_effective_ivl_sep (method)">#earliest_effective_ivl_sep</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


519
520
521</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 519</span>

<span class='kw'>def</span> <span class='id identifier rubyid_earliest_effective_sep'>earliest_effective_sep</span>
  <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:effective_on</span><span class='period'>.</span><span class='id identifier rubyid_asc'>asc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span> <span class='id identifier rubyid_sep'>sep</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="earliest_effective_shop_sep-instance_method">
  
    #<strong>earliest_effective_shop_sep</strong>  &#x21d2; <tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the SHOP market <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP) eligibility currently
available to this family with the earliest coverage effective date. This is
a method to obtain the &#39;most advantageous&#39; coverage, based on
earliest start date</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the SHOP market <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> with earliest effective date</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_earliest_effective_shop_sep'>earliest_effective_shop_sep</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The SHOP market SEP eligibility active on today&#39;s date with earliest
coverage effective date</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#earliest_effective_sep-instance_method" title="Family#earliest_effective_sep (method)">#earliest_effective_sep</a></span></li>
    
      <li><span class='object_link'><a href="#earliest_effective_ivl_sep-instance_method" title="Family#earliest_effective_ivl_sep (method)">#earliest_effective_ivl_sep</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


535
536
537</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 535</span>

<span class='kw'>def</span> <span class='id identifier rubyid_earliest_effective_shop_sep'>earliest_effective_shop_sep</span>
  <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:effective_on</span><span class='period'>.</span><span class='id identifier rubyid_asc'>asc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span> <span class='id identifier rubyid_sep'>sep</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrolled_benefits-instance_method">
  
    #<strong>enrolled_benefits</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 258</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrolled_benefits'>enrolled_benefits</span>
  <span class='comment'># latest_household.try(:enrolled_hbx_enrollments)
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrolled_hbx_enrollments-instance_method">
  
    #<strong>enrolled_hbx_enrollments</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


941
942
943</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 941</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrolled_hbx_enrollments'>enrolled_hbx_enrollments</span>
  <span class='id identifier rubyid_latest_household'>latest_household</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:enrolled_hbx_enrollments</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrolled_including_waived_hbx_enrollments-instance_method">
  
    #<strong>enrolled_including_waived_hbx_enrollments</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


945
946
947</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 945</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrolled_including_waived_hbx_enrollments'>enrolled_including_waived_hbx_enrollments</span>
  <span class='id identifier rubyid_latest_household'>latest_household</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:enrolled_including_waived_hbx_enrollments</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrolled_policy-instance_method">
  
    #<strong>enrolled_policy</strong>(family_member)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1047
1048
1049</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1047</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrolled_policy'>enrolled_policy</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_verification_needed'>verification_needed</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:hbx_enrollment_members.applicant_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrollments-instance_method">
  
    #<strong>enrollments</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


279
280
281
282</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 279</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrollments'>enrollments</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span>  <span class='id identifier rubyid_latest_household'>latest_household</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='id identifier rubyid_latest_household'>latest_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_show_enrollments_sans_canceled'>show_enrollments_sans_canceled</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrollments_for_display-instance_method">
  
    #<strong>enrollments_for_display</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get <span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollments</a></span> that meet application criteria for
display in the UI</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The <span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollments</a></span> filtered by display criteria</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#waivers_for_display-instance_method" title="Family#waivers_for_display (method)">#waivers_for_display</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974
975</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 953</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrollments_for_display'>enrollments_for_display</span>
  <span class='const'><span class='object_link'><a href="" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_collection'>collection</span><span class='period'>.</span><span class='id identifier rubyid_aggregate'>aggregate</span><span class='lparen'>(</span><span class='lbracket'>[</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$match</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid__id'>_id</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$unwind</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$unwind</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$match</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$nin</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>void</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>coverage_canceled</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span> <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$match</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.external_enrollment</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$ne</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$sort</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.submitted_at</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>1</span> <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$group</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>year</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$year</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.effective_on</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>month</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$month</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.effective_on</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>day</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$dayOfMonth</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.effective_on</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>subscriber_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.enrollment_signature</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>provider_id</span><span class='tstring_end'>&#39;</span></span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.carrier_profile_id</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>benefit_group_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.benefit_group_id</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>state</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.aasm_state</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>market</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.kind</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>coverage_kind</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.coverage_kind</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hbx_enrollment</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$first</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$project</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hbx_enrollment._id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='symbol'>:allow_disk_use</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_family_member_by_person-instance_method">
  
    #<strong>find_family_member_by_person</strong>(person)  &#x21d2; <tt><span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span> associated with this <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Which <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span> references this <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span>?</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_find_family_member_by_person'>find_family_member_by_person</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>person</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span> to match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the family member who matches this person</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 332</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_family_member_by_person'>find_family_member_by_person</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_family_member'>family_member</span><span class='op'>|</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_person_id'>person_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid__id'>_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_matching_inactive_member-instance_method">
  
    #<strong>find_matching_inactive_member</strong>(personish)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 697</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_matching_inactive_member'>find_matching_inactive_member</span><span class='lparen'>(</span><span class='id identifier rubyid_personish'>personish</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_inactive_members'>inactive_members</span> <span class='op'>=</span> <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:is_active</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_inactive_members'>inactive_members</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_personish'>personish</span><span class='period'>.</span><span class='id identifier rubyid_ssn'>ssn</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_inactive_members'>inactive_members</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_mem'>mem</span><span class='op'>|</span> <span class='id identifier rubyid_mem'>mem</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_ssn'>ssn</span> <span class='op'>==</span> <span class='id identifier rubyid_personish'>personish</span><span class='period'>.</span><span class='id identifier rubyid_ssn'>ssn</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_personish'>personish</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_search_dob'>search_dob</span> <span class='op'>=</span> <span class='id identifier rubyid_personish'>personish</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%m/%d/%Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_inactive_members'>inactive_members</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_mem'>mem</span><span class='op'>|</span>
      <span class='id identifier rubyid_mp'>mp</span> <span class='op'>=</span> <span class='id identifier rubyid_mem'>mem</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span>
      <span class='id identifier rubyid_mem_dob'>mem_dob</span> <span class='op'>=</span> <span class='id identifier rubyid_mem'>mem</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_mem'>mem</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%m/%d/%Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_personish'>personish</span><span class='period'>.</span><span class='id identifier rubyid_last_name'>last_name</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='op'>==</span> <span class='id identifier rubyid_mp'>mp</span><span class='period'>.</span><span class='id identifier rubyid_last_name'>last_name</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_personish'>personish</span><span class='period'>.</span><span class='id identifier rubyid_first_name'>first_name</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='op'>==</span> <span class='id identifier rubyid_mp'>mp</span><span class='period'>.</span><span class='id identifier rubyid_first_name'>first_name</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_search_dob'>search_dob</span> <span class='op'>==</span> <span class='id identifier rubyid_mem_dob'>mem_dob</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_family_search-instance_method">
  
    #<strong>generate_family_search</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


997
998
999</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 997</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_family_search'>generate_family_search</span>
  <span class='op'>::</span><span class='const'><span class='object_link'><a href="MapReduce.html" title="MapReduce (module)">MapReduce</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="MapReduce/FamilySearchForFamily.html" title="MapReduce::FamilySearchForFamily (class)">FamilySearchForFamily</a></span></span><span class='period'>.</span><span class='id identifier rubyid_populate_for'><span class='object_link'><a href="MapReduce/FamilySearchForFamily.html#populate_for-class_method" title="MapReduce::FamilySearchForFamily.populate_for (method)">populate_for</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_aptc_hbx_enrollment?-instance_method">
  
    #<strong>has_aptc_hbx_enrollment?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


924
925
926
927</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 924</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_aptc_hbx_enrollment?'>has_aptc_hbx_enrollment?</span>
  <span class='id identifier rubyid_enrollments'>enrollments</span> <span class='op'>=</span> <span class='id identifier rubyid_latest_household'>latest_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span> <span class='kw'>rescue</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_enrollment'>enrollment</span><span class='op'>|</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_applied_aptc_amount'>applied_aptc_amount</span> <span class='op'>&gt;</span> <span class='int'>0</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_valid_e_case_id?-instance_method">
  
    #<strong>has_valid_e_case_id?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1105
1106
1107
1108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1105</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_valid_e_case_id?'>has_valid_e_case_id?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_e_case_id'>e_case_id</span>
  <span class='id identifier rubyid_e_case_id'>e_case_id</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\D</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hire_broker_agency-instance_method">
  
    #<strong>hire_broker_agency</strong>(broker_role_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


715
716
717
718
719
720
721
722
723
724
725</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 715</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hire_broker_agency'>hire_broker_agency</span><span class='lparen'>(</span><span class='id identifier rubyid_broker_role_id'>broker_role_id</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_broker_role_id'>broker_role_id</span>
  <span class='id identifier rubyid_existing_agency'>existing_agency</span> <span class='op'>=</span> <span class='id identifier rubyid_current_broker_agency'>current_broker_agency</span>
  <span class='id identifier rubyid_broker_role'>broker_role</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="BrokerRole.html" title="BrokerRole (class)">BrokerRole</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find'><span class='object_link'><a href="BrokerRole.html#find-class_method" title="BrokerRole.find (method)">find</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_broker_role_id'>broker_role_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_broker_agency_profile_id'>broker_agency_profile_id</span> <span class='op'>=</span> <span class='id identifier rubyid_broker_role'>broker_role</span><span class='period'>.</span><span class='id identifier rubyid_benefit_sponsors_broker_agency_profile_id'>benefit_sponsors_broker_agency_profile_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='id identifier rubyid_broker_role'>broker_role</span><span class='period'>.</span><span class='id identifier rubyid_benefit_sponsors_broker_agency_profile_id'>benefit_sponsors_broker_agency_profile_id</span> <span class='op'>:</span> <span class='id identifier rubyid_broker_role'>broker_role</span><span class='period'>.</span><span class='id identifier rubyid_broker_agency_profile_id'>broker_agency_profile_id</span>
  <span class='id identifier rubyid_terminate_broker_agency'>terminate_broker_agency</span> <span class='kw'>if</span> <span class='id identifier rubyid_existing_agency'>existing_agency</span>
  <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
  <span class='id identifier rubyid_broker_agency_account'>broker_agency_account</span> <span class='op'>=</span>  <span class='const'>BenefitSponsors</span><span class='op'>::</span><span class='const'>Accounts</span><span class='op'>::</span><span class='const'>BrokerAgencyAccount</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>benefit_sponsors_broker_agency_profile_id:</span> <span class='id identifier rubyid_broker_agency_profile_id'>broker_agency_profile_id</span><span class='comma'>,</span> <span class='label'>writing_agent_id:</span> <span class='id identifier rubyid_broker_role_id'>broker_role_id</span><span class='comma'>,</span> <span class='label'>start_on:</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span> <span class='label'>is_active:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_broker_agency_accounts'>broker_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_broker_agency_account'>broker_agency_account</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_active?-instance_method">
  
    #<strong>is_active?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


693
694
695</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 693</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_active?'>is_active?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_active'>is_active</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_document_not_verified-instance_method">
  
    #<strong>is_document_not_verified</strong>(type, person)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1101
1102
1103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_document_not_verified'>is_document_not_verified</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>valid</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>attested</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>verified</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>External Source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_verification_type_status'>verification_type_status</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='op'>?</span>  <span class='kw'>false</span> <span class='op'>:</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_eligible_to_enroll?-instance_method">
  
    #<strong>is_eligible_to_enroll?</strong>(options = {})  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 336</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_eligible_to_enroll?'>is_eligible_to_enroll?</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_enrollment_eligibility_reasons'>current_enrollment_eligibility_reasons</span><span class='lparen'>(</span><span class='label'>qle:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:qle</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_under_ivl_open_enrollment?-instance_method">
  
    #<strong>is_under_ivl_open_enrollment?</strong>  &#x21d2; <tt>true</tt>, <tt>false</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine if this family has enrollment eligibility under Individual market
open enrollment</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Is this family under Individual market open enrollment?</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_is_under_ivl_open_enrollment?'>is_under_ivl_open_enrollment?</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if under Individual market open enrollment, false if not under
Individual market open enrollment</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_under_shop_open_enrollment%3F-instance_method" title="Family#is_under_shop_open_enrollment? (method)">#is_under_shop_open_enrollment?</a></span></li>
    
      <li><span class='object_link'><a href="#is_under_open_enrollment%3F-instance_method" title="Family#is_under_open_enrollment? (method)">#is_under_open_enrollment?</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


368
369
370</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 368</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_under_ivl_open_enrollment?'>is_under_ivl_open_enrollment?</span>
  <span class='id identifier rubyid_current_ivl_eligible_open_enrollments'>current_ivl_eligible_open_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_under_open_enrollment?-instance_method">
  
    #<strong>is_under_open_enrollment?</strong>  &#x21d2; <tt>true</tt>, <tt>false</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine if this family has enrollment eligibility under SHOP or
Individual market open enrollment</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Is this family under SHOP or Individual market open enrollment?</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_is_under_open_enrollment?'>is_under_open_enrollment?</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if under SHOP or Individual market open enrollment, false if not under
SHOP or Individual market open enrollment</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_under_shop_open_enrollment%3F-instance_method" title="Family#is_under_shop_open_enrollment? (method)">#is_under_shop_open_enrollment?</a></span></li>
    
      <li><span class='object_link'><a href="#is_under_ivl_open_enrollment%3F-instance_method" title="Family#is_under_ivl_open_enrollment? (method)">#is_under_ivl_open_enrollment?</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


355
356
357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 355</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_under_open_enrollment?'>is_under_open_enrollment?</span>
  <span class='id identifier rubyid_current_eligible_open_enrollments'>current_eligible_open_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_under_shop_open_enrollment?-instance_method">
  
    #<strong>is_under_shop_open_enrollment?</strong>  &#x21d2; <tt>true</tt>, <tt>false</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine if this family has enrollment eligibility under SHOP market open
enrollment</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Is this family under SHOP market open enrollment?</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_is_under_shop_open_enrollment?'>is_under_shop_open_enrollment?</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if under SHOP market open enrollment, false if not under SHOP market
open enrollment</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_under_ivl_open_enrollment%3F-instance_method" title="Family#is_under_ivl_open_enrollment? (method)">#is_under_ivl_open_enrollment?</a></span></li>
    
      <li><span class='object_link'><a href="#is_under_open_enrollment%3F-instance_method" title="Family#is_under_open_enrollment? (method)">#is_under_open_enrollment?</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


381
382
383</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 381</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_under_shop_open_enrollment?'>is_under_shop_open_enrollment?</span>
  <span class='id identifier rubyid_current_shop_eligible_open_enrollments'>current_shop_eligible_open_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_under_special_enrollment_period?-instance_method">
  
    #<strong>is_under_special_enrollment_period?</strong>  &#x21d2; <tt>true</tt>, <tt>false</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine if this family has an active <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span> (SEP)
enrollment eligibility</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Is this family under a <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_is_under_special_enrollment_period?'>is_under_special_enrollment_period?</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if under a SEP, false if not under a SEP</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


460
461
462
463</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 460</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_under_special_enrollment_period?'>is_under_special_enrollment_period?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='id identifier rubyid_current_special_enrollment_periods'>current_special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_active_sep-instance_method">
  
    #<strong>latest_active_sep</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


478
479
480</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 478</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest_active_sep'>latest_active_sep</span>
  <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:submitted_at</span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span> <span class='id identifier rubyid_sep'>sep</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_household-instance_method">
  
    #<strong>latest_household</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250
251</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 248</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest_household'>latest_household</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_households'>households</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='kw'>if</span> <span class='id identifier rubyid_households'>households</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span>
  <span class='id identifier rubyid_households'>households</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:submitted_at</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_only'>only</span><span class='lparen'>(</span><span class='symbol'>:households</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_shop_sep-instance_method">
  
    #<strong>latest_shop_sep</strong>  &#x21d2; <tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the most recently created, active SHOP market <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span>
(SEP) eligibility currently available to this family</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the most recent, active SHOP market <span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_latest_shop_sep'>latest_shop_sep</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SpecialEnrollmentPeriod.html" title="SpecialEnrollmentPeriod (class)">SpecialEnrollmentPeriod</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The most recent, active SHOP market SEP eligibility</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


561
562
563</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 561</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest_shop_sep'>latest_shop_sep</span>
  <span class='id identifier rubyid_special_enrollment_periods'>special_enrollment_periods</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:submitted_at</span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span> <span class='id identifier rubyid_sep'>sep</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="min_verification_due_date_on_family-instance_method">
  
    #<strong>min_verification_due_date_on_family</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1027
1028
1029</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1027</span>

<span class='kw'>def</span> <span class='id identifier rubyid_min_verification_due_date_on_family'>min_verification_due_date_on_family</span>
  <span class='id identifier rubyid_contingent_enrolled_family_members_due_dates'>contingent_enrolled_family_members_due_dates</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='kw'>if</span> <span class='id identifier rubyid_contingent_enrolled_family_members_due_dates'>contingent_enrolled_family_members_due_dates</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="people_relationship_map-instance_method">
  
    #<strong>people_relationship_map</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


685
686
687
688
689
690
691</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 685</span>

<span class='kw'>def</span> <span class='id identifier rubyid_people_relationship_map'>people_relationship_map</span>
  <span class='id identifier rubyid_map'>map</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_people'>people</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_person'>person</span><span class='op'>|</span>
    <span class='id identifier rubyid_map'>map</span><span class='lbracket'>[</span><span class='id identifier rubyid_person'>person</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_person_relationships'>person_relationships</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_object_person'>object_person</span> <span class='op'>==</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_relationship_kind'>relationship_kind</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_map'>map</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="person_has_an_active_enrollment?-instance_method">
  
    #<strong>person_has_an_active_enrollment?</strong>(person)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1059
1060
1061</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1059</span>

<span class='kw'>def</span> <span class='id identifier rubyid_person_has_an_active_enrollment?'>person_has_an_active_enrollment?</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="HbxEnrollment.html#ENROLLED_STATUSES-constant" title="HbxEnrollment::ENROLLED_STATUSES (constant)">ENROLLED_STATUSES</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:hbx_enrollment_members</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:family_member</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:person</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="person_is_family_member?-instance_method">
  
    #<strong>person_is_family_member?</strong>(person)  &#x21d2; <tt>true</tt>, <tt>false</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine if <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span> is a member of this family</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Is this person a family member?</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_person_is_family_member?'>person_is_family_member?</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if the person is in the family, false if the person isn&#39;t in the
family</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


661
662
663</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 661</span>

<span class='kw'>def</span> <span class='id identifier rubyid_person_is_family_member?'>person_is_family_member?</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_find_family_member_by_person'>find_family_member_by_person</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="primary_applicant-instance_method">
  
    #<strong>primary_applicant</strong>  &#x21d2; <tt><span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='primary_family_member-instance_method'>primary_family_member</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span> who is head and &#39;owner&#39; of this family instance.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Who is the primary applicant for this family?</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_primary_applicant'>primary_applicant</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the designated head of this family</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 290</span>

<span class='kw'>def</span> <span class='id identifier rubyid_primary_applicant'>primary_applicant</span>
  <span class='id identifier rubyid_family_members'>family_members</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_family_member'>family_member</span><span class='op'>|</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_primary_applicant?'>is_primary_applicant?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="primary_family_member=-instance_method">
  
    #<strong>primary_family_member=</strong>(new_primary_family_member)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


294
295
296
297
298
299
300
301
302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 294</span>

<span class='kw'>def</span> <span class='id identifier rubyid_primary_family_member='>primary_family_member=</span><span class='lparen'>(</span><span class='id identifier rubyid_new_primary_family_member'>new_primary_family_member</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_primary_family_member'>primary_family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_primary_applicant'>is_primary_applicant</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_primary_family_member'>primary_family_member</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_existing_family_member'>existing_family_member</span> <span class='op'>=</span> <span class='id identifier rubyid_find_family_member_by_person'>find_family_member_by_person</span><span class='lparen'>(</span><span class='id identifier rubyid_new_primary_family_member'>new_primary_family_member</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_existing_family_member'>existing_family_member</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_existing_family_member'>existing_family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_primary_applicant'>is_primary_applicant</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_add_family_member'>add_family_member</span><span class='lparen'>(</span><span class='id identifier rubyid_new_primary_family_member'>new_primary_family_member</span><span class='comma'>,</span> <span class='label'>is_primary_applicant:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_primary_family_member'>primary_family_member</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relate_new_member-instance_method">
  
    #<strong>relate_new_member</strong>(person, relationship)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


605
606
607
608</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 605</span>

<span class='kw'>def</span> <span class='id identifier rubyid_relate_new_member'>relate_new_member</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='comma'>,</span> <span class='id identifier rubyid_relationship'>relationship</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_primary_applicant_person'>primary_applicant_person</span><span class='period'>.</span><span class='id identifier rubyid_ensure_relationship_with'>ensure_relationship_with</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='comma'>,</span> <span class='id identifier rubyid_relationship'>relationship</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_family_member'>add_family_member</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_family_member-instance_method">
  
    #<strong>remove_family_member</strong>(person)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Remove <span class='object_link'><a href="FamilyMember.html" title="FamilyMember (class)">FamilyMember</a></span> referenced by this <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>person</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The <span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span> to remove from the family.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


645
646
647
648
649
650
651
652
653</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 645</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_family_member'>remove_family_member</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_family_member'>family_member</span> <span class='op'>=</span> <span class='id identifier rubyid_find_family_member_by_person'>find_family_member_by_person</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_family_member'>family_member</span><span class='period'>.</span><span class='id identifier rubyid_is_active'>is_active</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_remove_family_member'>remove_family_member</span><span class='lparen'>(</span><span class='id identifier rubyid_family_member'>family_member</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_family_member'>family_member</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_family_search_record-instance_method">
  
    #<strong>remove_family_search_record</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 244</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_family_search_record'>remove_family_search_record</span>
  <span class='const'><span class='object_link'><a href="Searches.html" title="Searches (module)">Searches</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Searches/FamilySearch.html" title="Searches::FamilySearch (class)">FamilySearch</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_delete_all'>delete_all</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="renewal_benefits-instance_method">
  
    #<strong>renewal_benefits</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_renewal_benefits'>renewal_benefits</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="review_status-instance_method">
  
    #<strong>review_status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1051
1052
1053
1054
1055
1056
1057</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1051</span>

<span class='kw'>def</span> <span class='id identifier rubyid_review_status'>review_status</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_verification_needed'>verification_needed</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_verification_needed'>verification_needed</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_review_status'>review_status</span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>no enrollment</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_relevant_coverage_households-instance_method">
  
    #<strong>save_relevant_coverage_households</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


918
919
920
921
922</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 918</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_relevant_coverage_households'>save_relevant_coverage_households</span>
  <span class='id identifier rubyid_households'>households</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_household'>household</span><span class='op'>|</span>
    <span class='id identifier rubyid_household'>household</span><span class='period'>.</span><span class='id identifier rubyid_coverage_households'>coverage_households</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_hh'>hh</span><span class='op'>|</span> <span class='id identifier rubyid_hh'>hh</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="terminate_broker_agency-instance_method">
  
    #<strong>terminate_broker_agency</strong>(terminate_on = TimeKeeper.date_of_record)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Terminate the active Broker agency for this family</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>terminate_on</span>
      
      
        <span class='type'>(<tt>Date</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>TimeKeeper.date_of_record</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Date to end broker engagement</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


730
731
732
733
734</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 730</span>

<span class='kw'>def</span> <span class='id identifier rubyid_terminate_broker_agency'>terminate_broker_agency</span><span class='lparen'>(</span><span class='id identifier rubyid_terminate_on'>terminate_on</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_current_broker_agency'>current_broker_agency</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_current_broker_agency'>current_broker_agency</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='label'>end_on:</span> <span class='lparen'>(</span><span class='id identifier rubyid_terminate_on'>terminate_on</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span><span class='comma'>,</span> <span class='label'>is_active:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="terminate_date_for_shop_by_enrollment-instance_method">
  
    #<strong>terminate_date_for_shop_by_enrollment</strong>(enrollment = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 565</span>

<span class='kw'>def</span> <span class='id identifier rubyid_terminate_date_for_shop_by_enrollment'>terminate_date_for_shop_by_enrollment</span><span class='lparen'>(</span><span class='id identifier rubyid_enrollment'>enrollment</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_latest_shop_sep'>latest_shop_sep</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_terminate_date'>terminate_date</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_latest_shop_sep'>latest_shop_sep</span><span class='period'>.</span><span class='id identifier rubyid_qualifying_life_event_kind'>qualifying_life_event_kind</span><span class='period'>.</span><span class='id identifier rubyid_reason'>reason</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>death</span><span class='tstring_end'>&#39;</span></span>
                       <span class='id identifier rubyid_latest_shop_sep'>latest_shop_sep</span><span class='period'>.</span><span class='id identifier rubyid_qle_on'>qle_on</span>
                     <span class='kw'>else</span>
                       <span class='id identifier rubyid_latest_shop_sep'>latest_shop_sep</span><span class='period'>.</span><span class='id identifier rubyid_qle_on'>qle_on</span><span class='period'>.</span><span class='id identifier rubyid_end_of_month'>end_of_month</span>
                     <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_effective_on'>effective_on</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_latest_shop_sep'>latest_shop_sep</span><span class='period'>.</span><span class='id identifier rubyid_qle_on'>qle_on</span>
        <span class='id identifier rubyid_terminate_date'>terminate_date</span> <span class='op'>=</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_effective_on'>effective_on</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_effective_on'>effective_on</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_terminate_date'>terminate_date</span>
        <span class='id identifier rubyid_terminate_date'>terminate_date</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_end_of_month'>end_of_month</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_terminate_date'>terminate_date</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_end_of_month'>end_of_month</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="terminated_benefits-instance_method">
  
    #<strong>terminated_benefits</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_terminated_benefits'>terminated_benefits</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_family_document_status!-instance_method">
  
    #<strong>update_family_document_status!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1097
1098
1099</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 1097</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_family_document_status!'>update_family_document_status!</span>
  <span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='label'>vlp_documents_status:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_all_persons_vlp_documents_status'>all_persons_vlp_documents_status</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="waivers_for_display-instance_method">
  
    #<strong>waivers_for_display</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get waived <span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollments</a></span> that meet application criteria
for display in the UI</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollment</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The <span class='object_link'><a href="HbxEnrollment.html" title="HbxEnrollment (class)">HbxEnrollments</a></span> filtered by display criteria</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#enrollments_for_display-instance_method" title="Family#enrollments_for_display (method)">#enrollments_for_display</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


981
982
983
984
985
986
987
988
989
990
991
992
993
994
995</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/family.rb', line 981</span>

<span class='kw'>def</span> <span class='id identifier rubyid_waivers_for_display'>waivers_for_display</span>
  <span class='const'><span class='object_link'><a href="" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_collection'>collection</span><span class='period'>.</span><span class='id identifier rubyid_aggregate'>aggregate</span><span class='lparen'>(</span><span class='lbracket'>[</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$match</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid__id'>_id</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$unwind</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$unwind</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$match</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>households.hbx_enrollments.aasm_state</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>inactive</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$sort</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>households.hbx_enrollments.submitted_at</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>1</span> <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$group</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>year</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$year</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.effective_on</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>state</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.aasm_state</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kind</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.kind</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>coverage_kind</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments.coverage_kind</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hbx_enrollment</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$first</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$households.hbx_enrollments</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$project</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hbx_enrollment._id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='symbol'>:allow_disk_use</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Oct 11 09:49:33 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.2.3).
</div>

    </div>
  </body>
</html>