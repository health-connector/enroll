<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: SamlController
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "SamlController";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">SamlController</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: SamlController
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></li>
          
            <li class="next">SamlController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Acapi::Notifiers</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/controllers/saml_controller.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#login-instance_method" title="#login (instance method)">#<strong>login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>def init   request = OneLogin::RubySaml::Authrequest.new  
redirect_to(request.create(saml_settings)) end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logout-instance_method" title="#logout (instance method)">#<strong>logout</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#navigate_to_assistance-instance_method" title="#navigate_to_assistance (instance method)">#<strong>navigate_to_assistance</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This action is invoked only when going to curam from the account page.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationController.html#access_denied-instance_method" title="ApplicationController#access_denied (method)">#access_denied</a></span>, <span class='object_link'><a href="ApplicationController.html#authenticate_me!-instance_method" title="ApplicationController#authenticate_me! (method)">#authenticate_me!</a></span>, <span class='object_link'><a href="ApplicationController.html#create_sso_account-instance_method" title="ApplicationController#create_sso_account (method)">#create_sso_account</a></span>, <span class='object_link'><a href="ApplicationController.html#format_js%3F-instance_method" title="ApplicationController#format_js? (method)">#format_js?</a></span>, <span class='object_link'><a href="ApplicationController.html#user_not_authorized-instance_method" title="ApplicationController#user_not_authorized (method)">#user_not_authorized</a></span></p>

  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Config/ContactCenterConcern.html" title="Config::ContactCenterConcern (module)">Config::ContactCenterConcern</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Config/ContactCenterConcern.html#contact_center_phone_number-instance_method" title="Config::ContactCenterConcern#contact_center_phone_number (method)">#contact_center_phone_number</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Config/AcaConcern.html" title="Config::AcaConcern (module)">Config::AcaConcern</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Config/AcaConcern.html#aca_qle_period-instance_method" title="Config::AcaConcern#aca_qle_period (method)">#aca_qle_period</a></span>, <span class='object_link'><a href="Config/AcaConcern.html#aca_shop_market_cobra_enrollment_period_in_months-instance_method" title="Config::AcaConcern#aca_shop_market_cobra_enrollment_period_in_months (method)">#aca_shop_market_cobra_enrollment_period_in_months</a></span>, <span class='object_link'><a href="Config/AcaConcern.html#aca_state_abbreviation-instance_method" title="Config::AcaConcern#aca_state_abbreviation (method)">#aca_state_abbreviation</a></span>, <span class='object_link'><a href="Config/AcaConcern.html#general_agency_is_enabled%3F-instance_method" title="Config::AcaConcern#general_agency_is_enabled? (method)">#general_agency_is_enabled?</a></span>, <span class='object_link'><a href="Config/AcaConcern.html#individual_market_is_enabled%3F-instance_method" title="Config::AcaConcern#individual_market_is_enabled? (method)">#individual_market_is_enabled?</a></span>, <span class='object_link'><a href="Config/AcaConcern.html#redirect_unless_general_agency_is_enabled%3F-instance_method" title="Config::AcaConcern#redirect_unless_general_agency_is_enabled? (method)">#redirect_unless_general_agency_is_enabled?</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Config/SiteConcern.html" title="Config::SiteConcern (module)">Config::SiteConcern</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Config/SiteConcern.html#site_create_routes-instance_method" title="Config::SiteConcern#site_create_routes (method)">#site_create_routes</a></span>, <span class='object_link'><a href="Config/SiteConcern.html#site_redirect_on_timeout_route-instance_method" title="Config::SiteConcern#site_redirect_on_timeout_route (method)">#site_redirect_on_timeout_route</a></span>, <span class='object_link'><a href="Config/SiteConcern.html#site_short_name-instance_method" title="Config::SiteConcern#site_short_name (method)">#site_short_name</a></span>, <span class='object_link'><a href="Config/SiteConcern.html#site_sign_in_routes-instance_method" title="Config::SiteConcern#site_sign_in_routes (method)">#site_sign_in_routes</a></span>, <span class='object_link'><a href="Config/SiteConcern.html#site_uses_default_devise_path%3F-instance_method" title="Config::SiteConcern#site_uses_default_devise_path? (method)">#site_uses_default_devise_path?</a></span></p>

  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="login-instance_method">
  
    #<strong>login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>def init</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_request'>request</span> <span class='op'>=</span> <span class='const'>OneLogin</span><span class='op'>::</span><span class='const'>RubySaml</span><span class='op'>::</span><span class='const'>Authrequest</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_redirect_to'>redirect_to</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_saml_settings'>saml_settings</span><span class='rparen'>)</span><span class='rparen'>)</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/saml_controller.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_login'>login</span>
  <span class='id identifier rubyid_relay_state'>relay_state</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RelayState</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_response'>response</span>          <span class='op'>=</span> <span class='const'>OneLogin</span><span class='op'>::</span><span class='const'>RubySaml</span><span class='op'>::</span><span class='const'>Response</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:SAMLResponse</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:allowed_clock_drift</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='period'>.</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span> <span class='op'>=</span> <span class='id identifier rubyid_saml_settings'>saml_settings</span>

  <span class='id identifier rubyid_sign_out'>sign_out</span> <span class='id identifier rubyid_current_user'>current_user</span> <span class='kw'>if</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_is_valid?'>is_valid?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_name_id'>name_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_name_id'>name_id</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>

    <span class='id identifier rubyid_oim_user'>oim_user</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>oim_id:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_quote'>quote</span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_oim_user'>oim_user</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='id identifier rubyid_oim_user'>oim_user</span><span class='period'>.</span><span class='id identifier rubyid_idp_verified'>idp_verified</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_oim_user'>oim_user</span><span class='period'>.</span><span class='id identifier rubyid_oim_id'>oim_id</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_name_id'>name_id</span>
      <span class='id identifier rubyid_oim_user'>oim_user</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="IdpAccountManager.html" title="IdpAccountManager (class)">IdpAccountManager</a></span></span><span class='period'>.</span><span class='id identifier rubyid_update_navigation_flag'><span class='object_link'><a href="IdpAccountManager.html#update_navigation_flag-class_method" title="IdpAccountManager.update_navigation_flag (method)">update_navigation_flag</a></span></span><span class='lparen'>(</span>
        <span class='id identifier rubyid_oim_user'>oim_user</span><span class='period'>.</span><span class='id identifier rubyid_oim_id'>oim_id</span><span class='comma'>,</span>
        <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='op'>::</span><span class='const'><span class='object_link'><a href="IdpAccountManager.html" title="IdpAccountManager (class)">IdpAccountManager</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IdpAccountManager.html#ENROLL_NAVIGATION_FLAG-constant" title="IdpAccountManager::ENROLL_NAVIGATION_FLAG (constant)">ENROLL_NAVIGATION_FLAG</a></span></span>
      <span class='rparen'>)</span>
      <span class='id identifier rubyid_sign_in'>sign_in</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='comma'>,</span> <span class='id identifier rubyid_oim_user'>oim_user</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_relay_state'>relay_state</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
        <span class='id identifier rubyid_oim_user'>oim_user</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='label'>last_portal_visited:</span> <span class='id identifier rubyid_relay_state'>relay_state</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_relay_state'>relay_state</span><span class='comma'>,</span> <span class='label'>flash:</span> <span class='lbrace'>{</span><span class='label'>notice:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Signed in Successfully.</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
      <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_oim_user'>oim_user</span><span class='period'>.</span><span class='id identifier rubyid_last_portal_visited'>last_portal_visited</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
        <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_oim_user'>oim_user</span><span class='period'>.</span><span class='id identifier rubyid_last_portal_visited'>last_portal_visited</span><span class='comma'>,</span> <span class='label'>flash:</span> <span class='lbrace'>{</span><span class='label'>notice:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Signed in Successfully.</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_oim_user'>oim_user</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='label'>last_portal_visited:</span> <span class='id identifier rubyid_search_insured_consumer_role_index_path'>search_insured_consumer_role_index_path</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_search_insured_consumer_role_index_path'>search_insured_consumer_role_index_path</span><span class='comma'>,</span> <span class='label'>flash:</span> <span class='lbrace'>{</span><span class='label'>notice:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Signed in Successfully.</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_new_password'>new_password</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate_valid_password'>generate_valid_password</span>
      <span class='id identifier rubyid_new_email'>new_email</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_headless'>headless</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>email:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_quote'>quote</span><span class='lparen'>(</span><span class='id identifier rubyid_new_email'>new_email</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
      <span class='id identifier rubyid_headless'>headless</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span> <span class='kw'>if</span> <span class='id identifier rubyid_headless'>headless</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_headless'>headless</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='id identifier rubyid_new_user'>new_user</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>email:</span> <span class='id identifier rubyid_new_email'>new_email</span><span class='comma'>,</span> <span class='label'>password:</span> <span class='id identifier rubyid_new_password'>new_password</span><span class='comma'>,</span> <span class='label'>idp_verified:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>oim_id:</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_name_id'>name_id</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="IdpAccountManager.html" title="IdpAccountManager (class)">IdpAccountManager</a></span></span><span class='period'>.</span><span class='id identifier rubyid_update_navigation_flag'><span class='object_link'><a href="IdpAccountManager.html#update_navigation_flag-class_method" title="IdpAccountManager.update_navigation_flag (method)">update_navigation_flag</a></span></span><span class='lparen'>(</span>
        <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_name_id'>name_id</span><span class='comma'>,</span>
        <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='op'>::</span><span class='const'><span class='object_link'><a href="IdpAccountManager.html" title="IdpAccountManager (class)">IdpAccountManager</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IdpAccountManager.html#ENROLL_NAVIGATION_FLAG-constant" title="IdpAccountManager::ENROLL_NAVIGATION_FLAG (constant)">ENROLL_NAVIGATION_FLAG</a></span></span>
      <span class='rparen'>)</span>
      <span class='id identifier rubyid_sign_in'>sign_in</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='comma'>,</span> <span class='id identifier rubyid_new_user'>new_user</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_relay_state'>relay_state</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
        <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='label'>last_portal_visited:</span> <span class='id identifier rubyid_search_insured_consumer_role_index_path'>search_insured_consumer_role_index_path</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_search_insured_consumer_role_index_path'>search_insured_consumer_role_index_path</span><span class='comma'>,</span> <span class='label'>flash:</span> <span class='lbrace'>{</span><span class='label'>notice:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Signed in Successfully.</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='label'>last_portal_visited:</span> <span class='id identifier rubyid_relay_state'>relay_state</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_relay_state'>relay_state</span><span class='comma'>,</span> <span class='label'>flash:</span> <span class='lbrace'>{</span><span class='label'>notice:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Signed in Successfully.</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_name_id'>name_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ERROR: SAMLResponse has missing required mail attribute</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:severity</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>critical</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_render'>render</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>public/403.html</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>status:</span> <span class='int'>403</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ERROR: SAMLResponse assertion errors </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:severity</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_render'>render</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>public/403.html</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>status:</span> <span class='int'>403</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logout-instance_method">
  
    #<strong>logout</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/saml_controller.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logout'>logout</span>
  <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='const'><span class='object_link'><a href="SamlInformation.html" title="SamlInformation (class)">SamlInformation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_saml_logout_url'>saml_logout_url</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="navigate_to_assistance-instance_method">
  
    #<strong>navigate_to_assistance</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This action is invoked only when going to curam from the account page.
Going to curam during the initial flow is triggered differently. What we do
here is set the navigation flag and send to the right location.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/saml_controller.rb', line 73</span>

<span class='kw'>def</span> <span class='id identifier rubyid_navigate_to_assistance'>navigate_to_assistance</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

    <span class='op'>::</span><span class='const'><span class='object_link'><a href="IdpAccountManager.html" title="IdpAccountManager (class)">IdpAccountManager</a></span></span><span class='period'>.</span><span class='id identifier rubyid_update_navigation_flag'><span class='object_link'><a href="IdpAccountManager.html#update_navigation_flag-class_method" title="IdpAccountManager.update_navigation_flag (method)">update_navigation_flag</a></span></span><span class='lparen'>(</span>
      <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_oim_id'>oim_id</span><span class='comma'>,</span>
      <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
      <span class='op'>::</span><span class='const'><span class='object_link'><a href="IdpAccountManager.html" title="IdpAccountManager (class)">IdpAccountManager</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IdpAccountManager.html#CURAM_NAVIGATION_FLAG-constant" title="IdpAccountManager::CURAM_NAVIGATION_FLAG (constant)">CURAM_NAVIGATION_FLAG</a></span></span>
    <span class='rparen'>)</span>
    <span class='comment'># redirect_to destroy_user_session_path
</span>    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='const'><span class='object_link'><a href="SamlInformation.html" title="SamlInformation (class)">SamlInformation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_curam_landing_page_url'>curam_landing_page_url</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='const'><span class='object_link'><a href="SamlInformation.html" title="SamlInformation (class)">SamlInformation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_iam_login_url'>iam_login_url</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Oct 11 09:50:02 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.2.3).
</div>

    </div>
  </body>
</html>