<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: EmployerProfile
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "EmployerProfile";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo;
    
    
    <span class="title">EmployerProfile</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: EmployerProfile
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">EmployerProfile</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd>Acapi::Notifiers</dd>
  </dl>
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>AASM, Acapi::Notifiers, <span class='object_link'><a href="ApplicationHelper.html" title="ApplicationHelper (module)">ApplicationHelper</a></span>, Concerns::Observable, <span class='object_link'><a href="Config/AcaModelConcern.html" title="Config::AcaModelConcern (module)">Config::AcaModelConcern</a></span>, <span class='object_link'><a href="ModelEvents/EmployerProfile.html" title="ModelEvents::EmployerProfile (module)">ModelEvents::EmployerProfile</a></span>, Mongoid::Document, Mongoid::Timestamps, <span class='object_link'><a href="ScheduledEventService.html" title="ScheduledEventService (module)">ScheduledEventService</a></span>, <span class='object_link'><a href="SetCurrentUser.html" title="SetCurrentUser (module)">SetCurrentUser</a></span>, <span class='object_link'><a href="StateTransitionPublisher.html" title="StateTransitionPublisher (module)">StateTransitionPublisher</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/employer_profile.rb</dd>
  </dl>
  
</div>


  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="BINDER_PREMIUM_PAID_EVENT_NAME-constant" class="">BINDER_PREMIUM_PAID_EVENT_NAME =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.binder_premium_paid</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="EMPLOYER_PROFILE_UPDATED_EVENT_NAME-constant" class="">EMPLOYER_PROFILE_UPDATED_EVENT_NAME =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.updated</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="INITIAL_APPLICATION_ELIGIBLE_EVENT_TAG-constant" class="">INITIAL_APPLICATION_ELIGIBLE_EVENT_TAG =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>benefit_coverage_initial_application_eligible</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="INITIAL_EMPLOYER_TRANSMIT_EVENT-constant" class="">INITIAL_EMPLOYER_TRANSMIT_EVENT =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.benefit_coverage_initial_application_eligible</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="RENEWAL_APPLICATION_ELIGIBLE_EVENT_TAG-constant" class="">RENEWAL_APPLICATION_ELIGIBLE_EVENT_TAG =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>benefit_coverage_renewal_application_eligible</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="RENEWAL_EMPLOYER_TRANSMIT_EVENT-constant" class="">RENEWAL_EMPLOYER_TRANSMIT_EVENT =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.benefit_coverage_renewal_application_eligible</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="RENEWAL_APPLICATION_CARRIER_DROP_EVENT_TAG-constant" class="">RENEWAL_APPLICATION_CARRIER_DROP_EVENT_TAG =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>benefit_coverage_renewal_carrier_dropped</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="RENEWAL_EMPLOYER_CARRIER_DROP_EVENT-constant" class="">RENEWAL_EMPLOYER_CARRIER_DROP_EVENT =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.benefit_coverage_renewal_carrier_dropped</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="ACTIVE_STATES-constant" class="">ACTIVE_STATES =
        
      </dt>
      <dd><pre class="code"><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>applicant</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>registered</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eligible</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>binder_paid</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>enrolled</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span></pre></dd>
    
      <dt id="INACTIVE_STATES-constant" class="">INACTIVE_STATES =
        
      </dt>
      <dd><pre class="code"><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>suspended</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ineligible</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span></pre></dd>
    
      <dt id="PROFILE_SOURCE_KINDS-constant" class="">PROFILE_SOURCE_KINDS =
        
      </dt>
      <dd><pre class="code"><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>self_serve</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>conversion</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span></pre></dd>
    
      <dt id="INVOICE_VIEW_INITIAL-constant" class="">INVOICE_VIEW_INITIAL =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>published</span><span class='words_sep'> </span><span class='tstring_content'>enrolling</span><span class='words_sep'> </span><span class='tstring_content'>enrolled</span><span class='words_sep'> </span><span class='tstring_content'>active</span><span class='words_sep'> </span><span class='tstring_content'>suspended</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="INVOICE_VIEW_RENEWING-constant" class="">INVOICE_VIEW_RENEWING =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>renewing_published</span><span class='words_sep'> </span><span class='tstring_content'>renewing_enrolling</span><span class='words_sep'> </span><span class='tstring_content'>renewing_enrolled</span><span class='words_sep'> </span><span class='tstring_content'>renewing_draft</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="ENROLLED_STATE-constant" class="">ENROLLED_STATE =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>enrolled</span><span class='words_sep'> </span><span class='tstring_content'>suspended</span><span class='words_sep'>)</span></pre></dd>
    
  </dl>



  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="ModelEvents/EmployerProfile.html" title="ModelEvents::EmployerProfile (module)">ModelEvents::EmployerProfile</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ModelEvents/EmployerProfile.html#OTHER_EVENTS-constant" title="ModelEvents::EmployerProfile::OTHER_EVENTS (constant)">ModelEvents::EmployerProfile::OTHER_EVENTS</a></span>, <span class='object_link'><a href="ModelEvents/EmployerProfile.html#REGISTERED_EVENTS-constant" title="ModelEvents::EmployerProfile::REGISTERED_EVENTS (constant)">ModelEvents::EmployerProfile::REGISTERED_EVENTS</a></span></p>


  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#broker_role_id-instance_method" title="#broker_role_id (instance method)">#<strong>broker_role_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute broker_role_id.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#advance_day-class_method" title="advance_day (class method)">.<strong>advance_day</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all-class_method" title="all (class method)">.<strong>all</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_hbx_id-class_method" title="by_hbx_id (class method)">.<strong>by_hbx_id</strong>(an_hbx_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find-class_method" title="find (class method)">.<strong>find</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_broker_agency_profile-class_method" title="find_by_broker_agency_profile (class method)">.<strong>find_by_broker_agency_profile</strong>(broker_agency_profile)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_fein-class_method" title="find_by_fein (class method)">.<strong>find_by_fein</strong>(fein)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_general_agency_profile-class_method" title="find_by_general_agency_profile (class method)">.<strong>find_by_general_agency_profile</strong>(general_agency_profile)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_writing_agent-class_method" title="find_by_writing_agent (class method)">.<strong>find_by_writing_agent</strong>(writing_agent)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_census_employee_by_person-class_method" title="find_census_employee_by_person (class method)">.<strong>find_census_employee_by_person</strong>(person)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first-class_method" title="first (class method)">.<strong>first</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initial_employers_enrolled_plan_year_state-class_method" title="initial_employers_enrolled_plan_year_state (class method)">.<strong>initial_employers_enrolled_plan_year_state</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last-class_method" title="last (class method)">.<strong>last</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_embedded-class_method" title="list_embedded (class method)">.<strong>list_embedded</strong>(parent_list)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organizations_eligible_for_renewal-class_method" title="organizations_eligible_for_renewal (class method)">.<strong>organizations_eligible_for_renewal</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organizations_for_force_publish-class_method" title="organizations_for_force_publish (class method)">.<strong>organizations_for_force_publish</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organizations_for_open_enrollment_begin-class_method" title="organizations_for_open_enrollment_begin (class method)">.<strong>organizations_for_open_enrollment_begin</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organizations_for_open_enrollment_end-class_method" title="organizations_for_open_enrollment_end (class method)">.<strong>organizations_for_open_enrollment_end</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organizations_for_plan_year_begin-class_method" title="organizations_for_plan_year_begin (class method)">.<strong>organizations_for_plan_year_begin</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organizations_for_plan_year_end-class_method" title="organizations_for_plan_year_end (class method)">.<strong>organizations_for_plan_year_end</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organizations_for_termination-class_method" title="organizations_for_termination (class method)">.<strong>organizations_for_termination</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#renewal_employers_reminder_to_publish-class_method" title="renewal_employers_reminder_to_publish (class method)">.<strong>renewal_employers_reminder_to_publish</strong>(start_on)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transmit_scheduled_employers-class_method" title="transmit_scheduled_employers (class method)">.<strong>transmit_scheduled_employers</strong>(new_date, feins = [])  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_status_to_binder_paid-class_method" title="update_status_to_binder_paid (class method)">.<strong>update_status_to_binder_paid</strong>(organization_ids)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>def is_eligible_to_shop?   registered? or published_plan_year.enrolling?
end.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_and_renewing_published-instance_method" title="#active_and_renewing_published (instance method)">#<strong>active_and_renewing_published</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_broker-instance_method" title="#active_broker (instance method)">#<strong>active_broker</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_broker_agency_account-instance_method" title="#active_broker_agency_account (instance method)">#<strong>active_broker_agency_account</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_broker_agency_legal_name-instance_method" title="#active_broker_agency_legal_name (instance method)">#<strong>active_broker_agency_legal_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_general_agency_account-instance_method" title="#active_general_agency_account (instance method)">#<strong>active_general_agency_account</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_general_agency_legal_name-instance_method" title="#active_general_agency_legal_name (instance method)">#<strong>active_general_agency_legal_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_or_published_plan_year-instance_method" title="#active_or_published_plan_year (instance method)">#<strong>active_or_published_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_plan_year-instance_method" title="#active_plan_year (instance method)">#<strong>active_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#billing_plan_year-instance_method" title="#billing_plan_year (instance method)">#<strong>billing_plan_year</strong>(billing_date = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#binder_criteria_satisfied%3F-instance_method" title="#binder_criteria_satisfied? (instance method)">#<strong>binder_criteria_satisfied?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#broadcast_employer_update-instance_method" title="#broadcast_employer_update (instance method)">#<strong>broadcast_employer_update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#broker_agency_profile-instance_method" title="#broker_agency_profile (instance method)">#<strong>broker_agency_profile</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#broker_fired_confirmation_to_broker-instance_method" title="#broker_fired_confirmation_to_broker (instance method)">#<strong>broker_fired_confirmation_to_broker</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_plan_year_from_quote-instance_method" title="#build_plan_year_from_quote (instance method)">#<strong>build_plan_year_from_quote</strong>(quote_claim_code, import_census_employee = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#census_employees-instance_method" title="#census_employees (instance method)">#<strong>census_employees</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#conversion_employer%3F-instance_method" title="#conversion_employer? (instance method)">#<strong>conversion_employer?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#covered_employee_roles-instance_method" title="#covered_employee_roles (instance method)">#<strong>covered_employee_roles</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_benefit_group-instance_method" title="#default_benefit_group (instance method)">#<strong>default_benefit_group</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#draft_plan_year-instance_method" title="#draft_plan_year (instance method)">#<strong>draft_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dt_display_plan_year-instance_method" title="#dt_display_plan_year (instance method)">#<strong>dt_display_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#earliest_plan_year_start_on_date-instance_method" title="#earliest_plan_year_start_on_date (instance method)">#<strong>earliest_plan_year_start_on_date</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#employee_roles-instance_method" title="#employee_roles (instance method)">#<strong>employee_roles</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#employer_broker_fired-instance_method" title="#employer_broker_fired (instance method)">#<strong>employer_broker_fired</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrollment_ineligible_period_expired%3F-instance_method" title="#enrollment_ineligible_period_expired? (instance method)">#<strong>enrollment_ineligible_period_expired?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enrollments_for_billing-instance_method" title="#enrollments_for_billing (instance method)">#<strong>enrollments_for_billing</strong>(billing_date = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_plan_year-instance_method" title="#find_plan_year (instance method)">#<strong>find_plan_year</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_plan_year_by_effective_date-instance_method" title="#find_plan_year_by_effective_date (instance method)">#<strong>find_plan_year_by_effective_date</strong>(target_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fire_broker_agency-instance_method" title="#fire_broker_agency (instance method)">#<strong>fire_broker_agency</strong>(terminate_on = today)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fire_general_agency!-instance_method" title="#fire_general_agency! (instance method)">#<strong>fire_general_agency!</strong>(terminate_on = TimeKeeper.datetime_of_record)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#general_agency_profile-instance_method" title="#general_agency_profile (instance method)">#<strong>general_agency_profile</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_and_deliver_checkbook_urls_for_employees-instance_method" title="#generate_and_deliver_checkbook_urls_for_employees (instance method)">#<strong>generate_and_deliver_checkbook_urls_for_employees</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_checkbook_notices-instance_method" title="#generate_checkbook_notices (instance method)">#<strong>generate_checkbook_notices</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_active_state%3F-instance_method" title="#has_active_state? (instance method)">#<strong>has_active_state?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_next_month_plan_year%3F-instance_method" title="#has_next_month_plan_year? (instance method)">#<strong>has_next_month_plan_year?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hashed_active_general_agency_legal_name-instance_method" title="#hashed_active_general_agency_legal_name (instance method)">#<strong>hashed_active_general_agency_legal_name</strong>(gaps)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>for General Agency.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hire_broker_agency-instance_method" title="#hire_broker_agency (instance method)">#<strong>hire_broker_agency</strong>(new_broker_agency, start_on = today)  &#x21d2; Object </a>
    

    
      (also: #broker_agency_profile=)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>for broker agency.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hire_general_agency-instance_method" title="#hire_general_agency (instance method)">#<strong>hire_general_agency</strong>(new_general_agency, broker_role_id = nil, start_on = TimeKeeper.datetime_of_record)  &#x21d2; Object </a>
    

    
      (also: #general_agency_profile=)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_attestation_eligible%3F-instance_method" title="#is_attestation_eligible? (instance method)">#<strong>is_attestation_eligible?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_conversion%3F-instance_method" title="#is_conversion? (instance method)">#<strong>is_conversion?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_converting%3F-instance_method" title="#is_converting? (instance method)">#<strong>is_converting?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_converting_with_renewal_state%3F-instance_method" title="#is_converting_with_renewal_state? (instance method)">#<strong>is_converting_with_renewal_state?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>It will check whether employer is regular or convesion It will add
additional check on conversion employers with plan year is in
PlanYear::RENEWING.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_eligible_to_enroll%3F-instance_method" title="#is_eligible_to_enroll? (instance method)">#<strong>is_eligible_to_enroll?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_new_employer%3F-instance_method" title="#is_new_employer? (instance method)">#<strong>is_new_employer?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_primary_office_local%3F-instance_method" title="#is_primary_office_local? (instance method)">#<strong>is_primary_office_local?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_renewal_carrier_drop%3F-instance_method" title="#is_renewal_carrier_drop? (instance method)">#<strong>is_renewal_carrier_drop?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_renewal_transmission_eligible%3F-instance_method" title="#is_renewal_transmission_eligible? (instance method)">#<strong>is_renewal_transmission_eligible?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_renewing_employer%3F-instance_method" title="#is_renewing_employer? (instance method)">#<strong>is_renewing_employer?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_transmit_xml_button_disabled%3F-instance_method" title="#is_transmit_xml_button_disabled? (instance method)">#<strong>is_transmit_xml_button_disabled?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_zip_outside%3F-instance_method" title="#is_zip_outside? (instance method)">#<strong>is_zip_outside?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>It will provide whether employer_profile zip code is inside MA or not if
zip_code is inside MA returns true else returns false.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_plan_year-instance_method" title="#latest_plan_year (instance method)">#<strong>latest_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_workflow_state_transition-instance_method" title="#latest_workflow_state_transition (instance method)">#<strong>latest_workflow_state_transition</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#match_employer-instance_method" title="#match_employer (instance method)">#<strong>match_employer</strong>(current_user)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#memoize_active_broker-instance_method" title="#memoize_active_broker (instance method)">#<strong>memoize_active_broker</strong>(active_broker_memo)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#non_owner_participation_criteria_met%3F-instance_method" title="#non_owner_participation_criteria_met? (instance method)">#<strong>non_owner_participation_criteria_met?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify_binder_paid-instance_method" title="#notify_binder_paid (instance method)">#<strong>notify_binder_paid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify_broker_added-instance_method" title="#notify_broker_added (instance method)">#<strong>notify_broker_added</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify_broker_terminated-instance_method" title="#notify_broker_terminated (instance method)">#<strong>notify_broker_terminated</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify_general_agent_added-instance_method" title="#notify_general_agent_added (instance method)">#<strong>notify_general_agent_added</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify_general_agent_terminated-instance_method" title="#notify_general_agent_terminated (instance method)">#<strong>notify_general_agent_terminated</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify_initial_binder_paid-instance_method" title="#notify_initial_binder_paid (instance method)">#<strong>notify_initial_binder_paid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#owners-instance_method" title="#owners (instance method)">#<strong>owners</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>business owners.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent-instance_method" title="#parent (instance method)">#<strong>parent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#participation_count-instance_method" title="#participation_count (instance method)">#<strong>participation_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#plan_year_drafts-instance_method" title="#plan_year_drafts (instance method)">#<strong>plan_year_drafts</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#plan_years_with_drafts_statuses-instance_method" title="#plan_years_with_drafts_statuses (instance method)">#<strong>plan_years_with_drafts_statuses</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#previous_states-instance_method" title="#previous_states (instance method)">#<strong>previous_states</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#published_plan_year-instance_method" title="#published_plan_year (instance method)">#<strong>published_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rating_area-instance_method" title="#rating_area (instance method)">#<strong>rating_area</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#renewing_plan_year-instance_method" title="#renewing_plan_year (instance method)">#<strong>renewing_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#renewing_plan_year_drafts-instance_method" title="#renewing_plan_year_drafts (instance method)">#<strong>renewing_plan_year_drafts</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#renewing_published_plan_year-instance_method" title="#renewing_published_plan_year (instance method)">#<strong>renewing_published_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#revert_plan_year-instance_method" title="#revert_plan_year (instance method)">#<strong>revert_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#roster_size-instance_method" title="#roster_size (instance method)">#<strong>roster_size</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>TODO - turn this in to counter_cache – see: <a
href="https://gist.github.com/andreychernih/1082313">gist.github.com/andreychernih/1082313</a>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#service_area_ids-instance_method" title="#service_area_ids (instance method)">#<strong>service_area_ids</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#service_areas-instance_method" title="#service_areas (instance method)">#<strong>service_areas</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#service_areas_available_on-instance_method" title="#service_areas_available_on (instance method)">#<strong>service_areas_available_on</strong>(date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show_plan_year-instance_method" title="#show_plan_year (instance method)">#<strong>show_plan_year</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#staff_roles-instance_method" title="#staff_roles (instance method)">#<strong>staff_roles</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>managing profile staff.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate-instance_method" title="#terminate (instance method)">#<strong>terminate</strong>(termination_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#today-instance_method" title="#today (instance method)">#<strong>today</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#today=-instance_method" title="#today= (instance method)">#<strong>today=</strong>(new_date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transmit_initial_eligible_event-instance_method" title="#transmit_initial_eligible_event (instance method)">#<strong>transmit_initial_eligible_event</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transmit_new_employer_if_immediate-instance_method" title="#transmit_new_employer_if_immediate (instance method)">#<strong>transmit_new_employer_if_immediate</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transmit_renewal_carrier_drop_event-instance_method" title="#transmit_renewal_carrier_drop_event (instance method)">#<strong>transmit_renewal_carrier_drop_event</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transmit_renewal_eligible_event-instance_method" title="#transmit_renewal_eligible_event (instance method)">#<strong>transmit_renewal_eligible_event</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trigger_notices-instance_method" title="#trigger_notices (instance method)">#<strong>trigger_notices</strong>(event)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trigger_shop_notices-instance_method" title="#trigger_shop_notices (instance method)">#<strong>trigger_shop_notices</strong>(event)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_document-instance_method" title="#upload_document (instance method)">#<strong>upload_document</strong>(file_path, file_name, subject, size)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#within_open_enrollment_for%3F-instance_method" title="#within_open_enrollment_for? (instance method)">#<strong>within_open_enrollment_for?</strong>(t_date, effective_date)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ApplicationHelper.html" title="ApplicationHelper (module)">ApplicationHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationHelper.html#active_dropdown_classes-instance_method" title="ApplicationHelper#active_dropdown_classes (method)">#active_dropdown_classes</a></span>, <span class='object_link'><a href="ApplicationHelper.html#active_menu_item-instance_method" title="ApplicationHelper#active_menu_item (method)">#active_menu_item</a></span>, <span class='object_link'><a href="ApplicationHelper.html#add_progress_class-instance_method" title="ApplicationHelper#add_progress_class (method)">#add_progress_class</a></span>, <span class='object_link'><a href="ApplicationHelper.html#asset_data_base64-instance_method" title="ApplicationHelper#asset_data_base64 (method)">#asset_data_base64</a></span>, <span class='object_link'><a href="ApplicationHelper.html#benefit_application_summarized_state-instance_method" title="ApplicationHelper#benefit_application_summarized_state (method)">#benefit_application_summarized_state</a></span>, <span class='object_link'><a href="ApplicationHelper.html#boolean_to_glyph-instance_method" title="ApplicationHelper#boolean_to_glyph (method)">#boolean_to_glyph</a></span>, <span class='object_link'><a href="ApplicationHelper.html#boolean_to_human-instance_method" title="ApplicationHelper#boolean_to_human (method)">#boolean_to_human</a></span>, <span class='object_link'><a href="ApplicationHelper.html#calculate_age_by_dob-instance_method" title="ApplicationHelper#calculate_age_by_dob (method)">#calculate_age_by_dob</a></span>, <span class='object_link'><a href="ApplicationHelper.html#calculate_participation_minimum-instance_method" title="ApplicationHelper#calculate_participation_minimum (method)">#calculate_participation_minimum</a></span>, <span class='object_link'><a href="ApplicationHelper.html#can_employee_shop%3F-instance_method" title="ApplicationHelper#can_employee_shop? (method)">#can_employee_shop?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#can_register_new_account-instance_method" title="ApplicationHelper#can_register_new_account (method)">#can_register_new_account</a></span>, <span class='object_link'><a href="ApplicationHelper.html#carrier_logo-instance_method" title="ApplicationHelper#carrier_logo (method)">#carrier_logo</a></span>, <span class='object_link'><a href="ApplicationHelper.html#convert_to_bool-instance_method" title="ApplicationHelper#convert_to_bool (method)">#convert_to_bool</a></span>, <span class='object_link'><a href="ApplicationHelper.html#copyright_notice-instance_method" title="ApplicationHelper#copyright_notice (method)">#copyright_notice</a></span>, <span class='object_link'><a href="ApplicationHelper.html#current_cost-instance_method" title="ApplicationHelper#current_cost (method)">#current_cost</a></span>, <span class='object_link'><a href="ApplicationHelper.html#date_col_name_for_broker_roaster-instance_method" title="ApplicationHelper#date_col_name_for_broker_roaster (method)">#date_col_name_for_broker_roaster</a></span>, <span class='object_link'><a href="ApplicationHelper.html#datepicker_control-instance_method" title="ApplicationHelper#datepicker_control (method)">#datepicker_control</a></span>, <span class='object_link'><a href="ApplicationHelper.html#dd_value-instance_method" title="ApplicationHelper#dd_value (method)">#dd_value</a></span>, <span class='object_link'><a href="ApplicationHelper.html#deductible_display-instance_method" title="ApplicationHelper#deductible_display (method)">#deductible_display</a></span>, <span class='object_link'><a href="ApplicationHelper.html#devise_mapping-instance_method" title="ApplicationHelper#devise_mapping (method)">#devise_mapping</a></span>, <span class='object_link'><a href="ApplicationHelper.html#digest_logos-instance_method" title="ApplicationHelper#digest_logos (method)">#digest_logos</a></span>, <span class='object_link'><a href="ApplicationHelper.html#disable_purchase%3F-instance_method" title="ApplicationHelper#disable_purchase? (method)">#disable_purchase?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#display_carrier_logo-instance_method" title="ApplicationHelper#display_carrier_logo (method)">#display_carrier_logo</a></span>, <span class='object_link'><a href="ApplicationHelper.html#display_carrier_pdf_logo-instance_method" title="ApplicationHelper#display_carrier_pdf_logo (method)">#display_carrier_pdf_logo</a></span>, <span class='object_link'><a href="ApplicationHelper.html#display_dental_metal_level-instance_method" title="ApplicationHelper#display_dental_metal_level (method)">#display_dental_metal_level</a></span>, <span class='object_link'><a href="ApplicationHelper.html#dob_in_words-instance_method" title="ApplicationHelper#dob_in_words (method)">#dob_in_words</a></span>, <span class='object_link'><a href="ApplicationHelper.html#draft_plan_year%3F-instance_method" title="ApplicationHelper#draft_plan_year? (method)">#draft_plan_year?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#eligibility_criteria-instance_method" title="ApplicationHelper#eligibility_criteria (method)">#eligibility_criteria</a></span>, <span class='object_link'><a href="ApplicationHelper.html#eligibility_criteria_for_export-instance_method" title="ApplicationHelper#eligibility_criteria_for_export (method)">#eligibility_criteria_for_export</a></span>, <span class='object_link'><a href="ApplicationHelper.html#enrollment_progress_bar-instance_method" title="ApplicationHelper#enrollment_progress_bar (method)">#enrollment_progress_bar</a></span>, <span class='object_link'><a href="ApplicationHelper.html#env_bucket_name-instance_method" title="ApplicationHelper#env_bucket_name (method)">#env_bucket_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#exchange_icon_path-instance_method" title="ApplicationHelper#exchange_icon_path (method)">#exchange_icon_path</a></span>, <span class='object_link'><a href="ApplicationHelper.html#extract_phone_number-instance_method" title="ApplicationHelper#extract_phone_number (method)">#extract_phone_number</a></span>, <span class='object_link'><a href="ApplicationHelper.html#favorite_class-instance_method" title="ApplicationHelper#favorite_class (method)">#favorite_class</a></span>, <span class='object_link'><a href="ApplicationHelper.html#find_plan_name-instance_method" title="ApplicationHelper#find_plan_name (method)">#find_plan_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#format_date-instance_method" title="ApplicationHelper#format_date (method)">#format_date</a></span>, <span class='object_link'><a href="ApplicationHelper.html#format_datetime-instance_method" title="ApplicationHelper#format_datetime (method)">#format_datetime</a></span>, <span class='object_link'><a href="ApplicationHelper.html#format_time_display-instance_method" title="ApplicationHelper#format_time_display (method)">#format_time_display</a></span>, <span class='object_link'><a href="ApplicationHelper.html#generate_breadcrumbs-instance_method" title="ApplicationHelper#generate_breadcrumbs (method)">#generate_breadcrumbs</a></span>, <span class='object_link'><a href="ApplicationHelper.html#get_dependents-instance_method" title="ApplicationHelper#get_dependents (method)">#get_dependents</a></span>, <span class='object_link'><a href="ApplicationHelper.html#get_header_text-instance_method" title="ApplicationHelper#get_header_text (method)">#get_header_text</a></span>, <span class='object_link'><a href="ApplicationHelper.html#get_key_and_bucket-instance_method" title="ApplicationHelper#get_key_and_bucket (method)">#get_key_and_bucket</a></span>, <span class='object_link'><a href="ApplicationHelper.html#get_portals_text-instance_method" title="ApplicationHelper#get_portals_text (method)">#get_portals_text</a></span>, <span class='object_link'><a href="ApplicationHelper.html#group_xml_transmitted_message-instance_method" title="ApplicationHelper#group_xml_transmitted_message (method)">#group_xml_transmitted_message</a></span>, <span class='object_link'><a href="ApplicationHelper.html#has_new_hire_enrollment_period%3F-instance_method" title="ApplicationHelper#has_new_hire_enrollment_period? (method)">#has_new_hire_enrollment_period?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#incarceration_cannot_purchase-instance_method" title="ApplicationHelper#incarceration_cannot_purchase (method)">#incarceration_cannot_purchase</a></span>, <span class='object_link'><a href="ApplicationHelper.html#is_new_paper_application%3F-instance_method" title="ApplicationHelper#is_new_paper_application? (method)">#is_new_paper_application?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#is_readonly-instance_method" title="ApplicationHelper#is_readonly (method)">#is_readonly</a></span>, <span class='object_link'><a href="ApplicationHelper.html#is_under_open_enrollment%3F-instance_method" title="ApplicationHelper#is_under_open_enrollment? (method)">#is_under_open_enrollment?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#ivl_enrollment_effective_date-instance_method" title="ApplicationHelper#ivl_enrollment_effective_date (method)">#ivl_enrollment_effective_date</a></span>, <span class='object_link'><a href="ApplicationHelper.html#json_for_plan_shopping_member_groups-instance_method" title="ApplicationHelper#json_for_plan_shopping_member_groups (method)">#json_for_plan_shopping_member_groups</a></span>, <span class='object_link'><a href="ApplicationHelper.html#link_to_add_fields-instance_method" title="ApplicationHelper#link_to_add_fields (method)">#link_to_add_fields</a></span>, <span class='object_link'><a href="ApplicationHelper.html#load_captcha_widget%3F-instance_method" title="ApplicationHelper#load_captcha_widget? (method)">#load_captcha_widget?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#make_binder_checkbox_disabled-instance_method" title="ApplicationHelper#make_binder_checkbox_disabled (method)">#make_binder_checkbox_disabled</a></span>, <span class='object_link'><a href="ApplicationHelper.html#may_update_census_employee%3F-instance_method" title="ApplicationHelper#may_update_census_employee? (method)">#may_update_census_employee?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#menu_tab_class-instance_method" title="ApplicationHelper#menu_tab_class (method)">#menu_tab_class</a></span>, <span class='object_link'><a href="ApplicationHelper.html#mixed_case-instance_method" title="ApplicationHelper#mixed_case (method)">#mixed_case</a></span>, <span class='object_link'><a href="ApplicationHelper.html#name_to_listing-instance_method" title="ApplicationHelper#name_to_listing (method)">#name_to_listing</a></span>, <span class='object_link'><a href="ApplicationHelper.html#no_rates_error-instance_method" title="ApplicationHelper#no_rates_error (method)">#no_rates_error</a></span>, <span class='object_link'><a href="ApplicationHelper.html#non_owner_participation_rule-instance_method" title="ApplicationHelper#non_owner_participation_rule (method)">#non_owner_participation_rule</a></span>, <span class='object_link'><a href="ApplicationHelper.html#notice_eligible_enrolles-instance_method" title="ApplicationHelper#notice_eligible_enrolles (method)">#notice_eligible_enrolles</a></span>, <span class='object_link'><a href="ApplicationHelper.html#number_to_fein-instance_method" title="ApplicationHelper#number_to_fein (method)">#number_to_fein</a></span>, <span class='object_link'><a href="ApplicationHelper.html#number_to_obscured_fein-instance_method" title="ApplicationHelper#number_to_obscured_fein (method)">#number_to_obscured_fein</a></span>, <span class='object_link'><a href="ApplicationHelper.html#number_to_obscured_ssn-instance_method" title="ApplicationHelper#number_to_obscured_ssn (method)">#number_to_obscured_ssn</a></span>, <span class='object_link'><a href="ApplicationHelper.html#number_to_ssn-instance_method" title="ApplicationHelper#number_to_ssn (method)">#number_to_ssn</a></span>, <span class='object_link'><a href="ApplicationHelper.html#override_backlink-instance_method" title="ApplicationHelper#override_backlink (method)">#override_backlink</a></span>, <span class='object_link'><a href="ApplicationHelper.html#parse_ethnicity-instance_method" title="ApplicationHelper#parse_ethnicity (method)">#parse_ethnicity</a></span>, <span class='object_link'><a href="ApplicationHelper.html#participation_rule-instance_method" title="ApplicationHelper#participation_rule (method)">#participation_rule</a></span>, <span class='object_link'><a href="ApplicationHelper.html#plan_match_dc-instance_method" title="ApplicationHelper#plan_match_dc (method)">#plan_match_dc</a></span>, <span class='object_link'><a href="ApplicationHelper.html#prepend_child_glyph_to_name-instance_method" title="ApplicationHelper#prepend_child_glyph_to_name (method)">#prepend_child_glyph_to_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#prepend_fa_icon-instance_method" title="ApplicationHelper#prepend_fa_icon (method)">#prepend_fa_icon</a></span>, <span class='object_link'><a href="ApplicationHelper.html#prepend_female_glyph_to_name-instance_method" title="ApplicationHelper#prepend_female_glyph_to_name (method)">#prepend_female_glyph_to_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#prepend_glyph_to_name-instance_method" title="ApplicationHelper#prepend_glyph_to_name (method)">#prepend_glyph_to_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#prepend_glyph_to_text-instance_method" title="ApplicationHelper#prepend_glyph_to_text (method)">#prepend_glyph_to_text</a></span>, <span class='object_link'><a href="ApplicationHelper.html#prepend_male_glyph_to_name-instance_method" title="ApplicationHelper#prepend_male_glyph_to_name (method)">#prepend_male_glyph_to_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#previous_year-instance_method" title="ApplicationHelper#previous_year (method)">#previous_year</a></span>, <span class='object_link'><a href="ApplicationHelper.html#purchase_or_confirm-instance_method" title="ApplicationHelper#purchase_or_confirm (method)">#purchase_or_confirm</a></span>, <span class='object_link'><a href="ApplicationHelper.html#qualify_qle_notice-instance_method" title="ApplicationHelper#qualify_qle_notice (method)">#qualify_qle_notice</a></span>, <span class='object_link'><a href="ApplicationHelper.html#rates_available%3F-instance_method" title="ApplicationHelper#rates_available? (method)">#rates_available?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#relationship_options-instance_method" title="ApplicationHelper#relationship_options (method)">#relationship_options</a></span>, <span class='object_link'><a href="ApplicationHelper.html#render_flash-instance_method" title="ApplicationHelper#render_flash (method)">#render_flash</a></span>, <span class='object_link'><a href="ApplicationHelper.html#resource-instance_method" title="ApplicationHelper#resource (method)">#resource</a></span>, <span class='object_link'><a href="ApplicationHelper.html#resource_name-instance_method" title="ApplicationHelper#resource_name (method)">#resource_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#retrieve_inbox_path-instance_method" title="ApplicationHelper#retrieve_inbox_path (method)">#retrieve_inbox_path</a></span>, <span class='object_link'><a href="ApplicationHelper.html#retrieve_show_path-instance_method" title="ApplicationHelper#retrieve_show_path (method)">#retrieve_show_path</a></span>, <span class='object_link'><a href="ApplicationHelper.html#select_dropdown-instance_method" title="ApplicationHelper#select_dropdown (method)">#select_dropdown</a></span>, <span class='object_link'><a href="ApplicationHelper.html#show_default_ga%3F-instance_method" title="ApplicationHelper#show_default_ga? (method)">#show_default_ga?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#show_oop_pdf_link-instance_method" title="ApplicationHelper#show_oop_pdf_link (method)">#show_oop_pdf_link</a></span>, <span class='object_link'><a href="ApplicationHelper.html#sortable-instance_method" title="ApplicationHelper#sortable (method)">#sortable</a></span>, <span class='object_link'><a href="ApplicationHelper.html#table_empty_to_human-instance_method" title="ApplicationHelper#table_empty_to_human (method)">#table_empty_to_human</a></span>, <span class='object_link'><a href="ApplicationHelper.html#transaction_status_to_label-instance_method" title="ApplicationHelper#transaction_status_to_label (method)">#transaction_status_to_label</a></span>, <span class='object_link'><a href="ApplicationHelper.html#trigger_notice_observer-instance_method" title="ApplicationHelper#trigger_notice_observer (method)">#trigger_notice_observer</a></span>, <span class='object_link'><a href="ApplicationHelper.html#user_first_name_last_name_and_suffix-instance_method" title="ApplicationHelper#user_first_name_last_name_and_suffix (method)">#user_first_name_last_name_and_suffix</a></span>, <span class='object_link'><a href="ApplicationHelper.html#user_full_name-instance_method" title="ApplicationHelper#user_full_name (method)">#user_full_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#version_for_record-instance_method" title="ApplicationHelper#version_for_record (method)">#version_for_record</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ModelEvents/EmployerProfile.html" title="ModelEvents::EmployerProfile (module)">ModelEvents::EmployerProfile</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ModelEvents/EmployerProfile.html#is_transition_matching%3F-instance_method" title="ModelEvents::EmployerProfile#is_transition_matching? (method)">#is_transition_matching?</a></span>, <span class='object_link'><a href="ModelEvents/EmployerProfile.html#notify_on_save-instance_method" title="ModelEvents::EmployerProfile#notify_on_save (method)">#notify_on_save</a></span>, <span class='object_link'><a href="ModelEvents/EmployerProfile.html#trigger_model_event-instance_method" title="ModelEvents::EmployerProfile#trigger_model_event (method)">#trigger_model_event</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="StateTransitionPublisher.html" title="StateTransitionPublisher (module)">StateTransitionPublisher</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="StateTransitionPublisher.html#included-class_method" title="StateTransitionPublisher.included (method)">included</a></span>, <span class='object_link'><a href="StateTransitionPublisher.html#publish_transition-instance_method" title="StateTransitionPublisher#publish_transition (method)">#publish_transition</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SetCurrentUser.html" title="SetCurrentUser (module)">SetCurrentUser</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SetCurrentUser.html#included-class_method" title="SetCurrentUser.included (method)">included</a></span>, <span class='object_link'><a href="SetCurrentUser.html#save_user-instance_method" title="SetCurrentUser#save_user (method)">#save_user</a></span>, <span class='object_link'><a href="SetCurrentUser.html#update_user-instance_method" title="SetCurrentUser#update_user (method)">#update_user</a></span></p>

  
  
  
  
  
  
  
  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="broker_role_id=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="broker_role_id-instance_method">
  
    #<strong>broker_role_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute broker_role_id</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 16</span>

<span class='kw'>def</span> <span class='id identifier rubyid_broker_role_id'>broker_role_id</span>
  <span class='ivar'>@broker_role_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="advance_day-class_method">
  
    .<strong>advance_day</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 664</span>

<span class='kw'>def</span> <span class='id identifier rubyid_advance_day'>advance_day</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_test?'>test?</span>
    <span class='id identifier rubyid_plan_year_renewal_factory'>plan_year_renewal_factory</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Factories.html" title="Factories (module)">Factories</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Factories/PlanYearRenewalFactory.html" title="Factories::PlanYearRenewalFactory (class)">PlanYearRenewalFactory</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Factories/PlanYearRenewalFactory.html#initialize-instance_method" title="Factories::PlanYearRenewalFactory#initialize (method)">new</a></span></span>
    <span class='id identifier rubyid_organizations_eligible_for_renewal'>organizations_eligible_for_renewal</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_organization'>organization</span><span class='op'>|</span>
      <span class='id identifier rubyid_plan_year_renewal_factory'>plan_year_renewal_factory</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
      <span class='id identifier rubyid_plan_year_renewal_factory'>plan_year_renewal_factory</span><span class='period'>.</span><span class='id identifier rubyid_is_congress'>is_congress</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='comment'># TODO handle congress differently
</span>      <span class='id identifier rubyid_plan_year_renewal_factory'>plan_year_renewal_factory</span><span class='period'>.</span><span class='id identifier rubyid_renew'>renew</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Factories.html" title="Factories (module)">Factories</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Factories/EmployerOpenEnrollmentFactory.html" title="Factories::EmployerOpenEnrollmentFactory (class)">EmployerOpenEnrollmentFactory</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Factories/EmployerOpenEnrollmentFactory.html#initialize-instance_method" title="Factories::EmployerOpenEnrollmentFactory#initialize (method)">new</a></span></span>
    <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span><span class='period'>.</span><span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_new_date'>new_date</span>

    <span class='id identifier rubyid_organizations_for_open_enrollment_begin'>organizations_for_open_enrollment_begin</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_organization'>organization</span><span class='op'>|</span>
      <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
      <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span><span class='period'>.</span><span class='id identifier rubyid_begin_open_enrollment'>begin_open_enrollment</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_organizations_for_open_enrollment_end'>organizations_for_open_enrollment_end</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_organization'>organization</span><span class='op'>|</span>
      <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
      <span class='id identifier rubyid_open_enrollment_factory'>open_enrollment_factory</span><span class='period'>.</span><span class='id identifier rubyid_end_open_enrollment'>end_open_enrollment</span>
    <span class='kw'>end</span>
<span class='comment'>#DC LOW ENROLLMENT NOTICE
</span>    <span class='comment'># organizations_for_low_enrollment_notice(new_date).each do |organization|
</span>    <span class='comment'>#   begin
</span>    <span class='comment'>#     plan_year = organization.employer_profile.plan_years.where(:aasm_state.in =&gt; [&quot;enrolling&quot;, &quot;renewing_enrolling&quot;]).first
</span>    <span class='comment'>#     #exclude congressional employees
</span>    <span class='comment'>#     next if ((plan_year.benefit_groups.any?{|bg| bg.is_congress?}) || (plan_year.effective_date.yday == 1))
</span>    <span class='comment'>#     if plan_year.enrollment_ratio &lt; Settings.aca.shop_market.employee_participation_ratio_minimum
</span>    <span class='comment'>#       organization.employer_profile.trigger_notices(&quot;low_enrollment_notice_for_employer&quot;)
</span>    <span class='comment'>#     end
</span>    <span class='comment'>#   rescue Exception =&gt; e
</span>    <span class='comment'>#     Rails.logger.error { &quot;Unable to deliver Low Enrollment Notice to #{organization.legal_name} due to #{e}&quot; }
</span>    <span class='comment'>#   end
</span>    <span class='comment'># end
</span><span class='comment'>#DC Publish plan year reminder notice
</span>    <span class='comment'># start_on = new_date.next_month.beginning_of_month
</span>    <span class='comment'># if new_date.day == Settings.aca.shop_market.renewal_application.publish_due_day_of_month-7
</span>    <span class='comment'>#   renewal_employers_reminder_to_publish(start_on).each do |organization|
</span>    <span class='comment'>#     begin
</span>    <span class='comment'>#       organization.employer_profile.trigger_notices(&quot;renewal_employer_first_reminder_to_publish_plan_year&quot;)
</span>    <span class='comment'>#     rescue Exception =&gt; e
</span>    <span class='comment'>#       Rails.logger.error { &quot;Unable to deliver first reminder notice to publish plan year to renewing employer #{organization.legal_name} due to #{e}&quot; }
</span>    <span class='comment'>#     end
</span>    <span class='comment'>#   end
</span>    <span class='comment'># elsif new_date.day == Settings.aca.shop_market.renewal_application.publish_due_day_of_month-6
</span>    <span class='comment'>#   renewal_employers_reminder_to_publish(start_on).each do |organization|
</span>    <span class='comment'>#     begin
</span>    <span class='comment'>#       organization.employer_profile.trigger_notices(&quot;renewal_employer_second_reminder_to_publish_plan_year&quot;)
</span>    <span class='comment'>#     rescue Exception =&gt; e
</span>    <span class='comment'>#       Rails.logger.error { &quot;Unable to deliver second reminder notice to publish plan year to renewing employer #{organization.legal_name} due to #{e}&quot; }
</span>    <span class='comment'>#     end
</span>    <span class='comment'>#   end
</span>    <span class='comment'># elsif new_date.day == Settings.aca.shop_market.renewal_application.publish_due_day_of_month-2
</span>    <span class='comment'>#   renewal_employers_reminder_to_publish(start_on).each do |organization|
</span>    <span class='comment'>#     begin
</span>    <span class='comment'>#       organization.employer_profile.trigger_notices(&quot;renewal_employer_final_reminder_to_publish_plan_year&quot;)
</span>    <span class='comment'>#     rescue Exception =&gt; e
</span>    <span class='comment'>#       Rails.logger.error { &quot;Unable to deliver final reminder notice to publish plan year to renewing employer #{organization.legal_name} due to #{e}&quot; }
</span>    <span class='comment'>#     end
</span>    <span class='comment'>#   end
</span>    <span class='comment'># end
</span>    <span class='id identifier rubyid_employer_enroll_factory'>employer_enroll_factory</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Factories.html" title="Factories (module)">Factories</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Factories/EmployerEnrollFactory.html" title="Factories::EmployerEnrollFactory (class)">EmployerEnrollFactory</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Factories/EmployerEnrollFactory.html#initialize-instance_method" title="Factories::EmployerEnrollFactory#initialize (method)">new</a></span></span>
    <span class='id identifier rubyid_employer_enroll_factory'>employer_enroll_factory</span><span class='period'>.</span><span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_new_date'>new_date</span>

    <span class='id identifier rubyid_organizations_for_plan_year_begin'>organizations_for_plan_year_begin</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_organization'>organization</span><span class='op'>|</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>START START FOR </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_employer_enroll_factory'>employer_enroll_factory</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
        <span class='id identifier rubyid_employer_enroll_factory'>employer_enroll_factory</span><span class='period'>.</span><span class='id identifier rubyid_begin'>begin</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PROCESSED START FOR </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error found for employer - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> during plan year begin</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_organizations_for_plan_year_end'>organizations_for_plan_year_end</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_organization'>organization</span><span class='op'>|</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>START END FOR </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_employer_enroll_factory'>employer_enroll_factory</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
        <span class='id identifier rubyid_employer_enroll_factory'>employer_enroll_factory</span><span class='period'>.</span><span class='id identifier rubyid_end'>end</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PROCESSED END FOR </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error found for employer - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> during plan year end</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span> <span class='op'>==</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_renewal_application'>renewal_application</span><span class='period'>.</span><span class='id identifier rubyid_force_publish_day_of_month'>force_publish_day_of_month</span>
      <span class='id identifier rubyid_organizations_for_force_publish'>organizations_for_force_publish</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_organization'>organization</span><span class='op'>|</span>
        <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>renewing_draft</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_force_publish!'>force_publish!</span> <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_may_force_publish?'>may_force_publish?</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_organizations_for_termination'>organizations_for_termination</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_organization'>organization</span><span class='op'>|</span>
      <span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
      <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>termination_pending</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:terminated_on</span><span class='period'>.</span><span class='id identifier rubyid_lt'>lt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
      <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_terminate!'>terminate!</span> <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_may_terminate?'>may_terminate?</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_aca_shop_market_transmit_scheduled_employers'>aca_shop_market_transmit_scheduled_employers</span>
      <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_prev_day'>prev_day</span><span class='period'>.</span><span class='id identifier rubyid_mday'>mday</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id identifier rubyid_aca_shop_market_employer_transmission_day_of_month'>aca_shop_market_employer_transmission_day_of_month</span>
        <span class='id identifier rubyid_transmit_scheduled_employers'>transmit_scheduled_employers</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_prev_day'>prev_day</span><span class='period'>.</span><span class='id identifier rubyid_mday'>mday</span> <span class='op'>==</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_quiet_period'>quiet_period</span><span class='period'>.</span><span class='id identifier rubyid_mday'>mday</span>
      <span class='id identifier rubyid_effective_on'>effective_on</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_prev_day'>prev_day</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span> <span class='op'>-</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span><span class='id identifier rubyid_quiet_period'>quiet_period</span><span class='period'>.</span><span class='id identifier rubyid_month_offset'>month_offset</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='symbol'>:db</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.initial_employer_quiet_period_ended</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:effective_on</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_effective_on'>effective_on</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Employer activities that take place monthly - on first of month
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='id identifier rubyid_orgs'>orgs</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_exists'>exists</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.employer_profile_account._id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_not_in'>not_in</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.employer_profile_account.aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>canceled</span><span class='words_sep'> </span><span class='tstring_content'>terminated</span><span class='words_sep'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_orgs'>orgs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_org'>org</span><span class='op'>|</span>
      <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile_account'>employer_profile_account</span><span class='period'>.</span><span class='id identifier rubyid_advance_billing_period!'>advance_billing_period!</span> <span class='kw'>if</span> <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile_account'>employer_profile_account</span><span class='period'>.</span><span class='id identifier rubyid_may_advance_billing_period?'>may_advance_billing_period?</span>
      <span class='comment'># if org.employer_profile.active_plan_year.present?
</span>      <span class='comment'>#   Factories::EmployerRenewal(org.employer_profile) if org.employer_profile.today == (org.employer_profile.active_plan_year.end_on - 3.months + 1.day)
</span>      <span class='comment'># end
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Find employers with events today and trigger their respective workflow states
</span>  <span class='id identifier rubyid_appeal_period'>appeal_period</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span>
                      <span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span>
                      <span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span>
                      <span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span>
                      <span class='id identifier rubyid_appeal_period_after_application_denial'>appeal_period_after_application_denial</span><span class='period'>.</span>
                      <span class='id identifier rubyid_to_hash'>to_hash</span>
                    <span class='rparen'>)</span>

  <span class='comment'># Negate period value to query past date
</span>  <span class='id identifier rubyid_appeal_period'>appeal_period</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_appeal_period'>appeal_period</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span> <span class='op'>*</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_ineligible_period'>ineligible_period</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span>
                          <span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span>
                          <span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span>
                          <span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span>
                          <span class='id identifier rubyid_ineligible_period_after_application_denial'>ineligible_period_after_application_denial</span><span class='period'>.</span>
                          <span class='id identifier rubyid_to_hash'>to_hash</span>
                        <span class='rparen'>)</span>

  <span class='comment'># Negate period value to query past date
</span>  <span class='id identifier rubyid_ineligible_period'>ineligible_period</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_ineligible_period'>ineligible_period</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span> <span class='op'>*</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_orgs'>orgs</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_or'>or</span><span class='lparen'>(</span>
    <span class='lbrace'>{</span><span class='symbol'>:employer_profile.plan_years.start_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='symbol'>:employer_profile.plan_years.end_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='symbol'>:employer_profile.plan_years.open_enrollment_start_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='symbol'>:employer_profile.plan_years.open_enrollment_end_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='symbol'>:employer_profile.workflow_state_transitions</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_elem_match'>elem_match</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$and</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span>
          <span class='lbrace'>{</span><span class='symbol'>:transition_at</span><span class='period'>.</span><span class='id identifier rubyid_gte'>gte</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_advance'>advance</span><span class='lparen'>(</span><span class='id identifier rubyid_ineligible_period'>ineligible_period</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span> <span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span>
          <span class='lbrace'>{</span><span class='symbol'>:transition_at</span><span class='period'>.</span><span class='id identifier rubyid_lte'>lte</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_advance'>advance</span><span class='lparen'>(</span><span class='id identifier rubyid_ineligible_period'>ineligible_period</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='comma'>,</span>
          <span class='lbrace'>{</span><span class='symbol'>:to_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ineligible</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
        <span class='rbracket'>]</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='rparen'>)</span>

  <span class='id identifier rubyid_orgs'>orgs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_org'>org</span><span class='op'>|</span>
    <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='id identifier rubyid_new_date'>new_date</span>
    <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_advance_date!'>advance_date!</span> <span class='kw'>if</span> <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_may_advance_date?'>may_advance_date?</span>
    <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_published_plan_year'>published_plan_year</span>
    <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_advance_date!'>advance_date!</span> <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_may_advance_date?'>may_advance_date?</span>
    <span class='id identifier rubyid_plan_year'>plan_year</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all-class_method">
  
    .<strong>all</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


528
529
530</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 528</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all'>all</span>
  <span class='id identifier rubyid_list_embedded'>list_embedded</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_exists'>exists</span><span class='lparen'>(</span><span class='label'>employer_profile:</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='symbol'>:legal_name</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_hbx_id-class_method">
  
    .<strong>by_hbx_id</strong>(an_hbx_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1079
1080
1081
1082
1083</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1079</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_hbx_id'>by_hbx_id</span><span class='lparen'>(</span><span class='id identifier rubyid_an_hbx_id'>an_hbx_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_org'>org</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>hbx_id:</span> <span class='id identifier rubyid_an_hbx_id'>an_hbx_id</span><span class='comma'>,</span> <span class='label'>employer_profile:</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$exists</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
  <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find-class_method">
  
    .<strong>find</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


540
541
542
543
544
545
546</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 540</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_organizations'>organizations</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>employer_profile._id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='const'>BSON</span><span class='op'>::</span><span class='const'>ObjectId</span><span class='period'>.</span><span class='id identifier rubyid_from_string'>from_string</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_organizations'>organizations</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='id identifier rubyid_organizations'>organizations</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>rescue</span>
  <span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can not find employer_profile with id </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:severity</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_by_broker_agency_profile-class_method">
  
    .<strong>find_by_broker_agency_profile</strong>(broker_agency_profile)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


553
554
555
556
557</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 553</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_by_broker_agency_profile'>find_by_broker_agency_profile</span><span class='lparen'>(</span><span class='id identifier rubyid_broker_agency_profile'>broker_agency_profile</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected BrokerAgencyProfile</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_broker_agency_profile'>broker_agency_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="BrokerAgencyProfile.html" title="BrokerAgencyProfile (class)">BrokerAgencyProfile</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_orgs'>orgs</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_by_broker_agency_profile'>by_broker_agency_profile</span><span class='lparen'>(</span><span class='id identifier rubyid_broker_agency_profile'>broker_agency_profile</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_orgs'>orgs</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:employer_profile</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_by_fein-class_method">
  
    .<strong>find_by_fein</strong>(fein)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


548
549
550
551</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 548</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_by_fein'>find_by_fein</span><span class='lparen'>(</span><span class='id identifier rubyid_fein'>fein</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_organization'>organization</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>fein:</span> <span class='id identifier rubyid_fein'>fein</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_by_general_agency_profile-class_method">
  
    .<strong>find_by_general_agency_profile</strong>(general_agency_profile)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


559
560
561
562
563</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 559</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_by_general_agency_profile'>find_by_general_agency_profile</span><span class='lparen'>(</span><span class='id identifier rubyid_general_agency_profile'>general_agency_profile</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected GeneralAgencyProfile</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_general_agency_profile'>general_agency_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="GeneralAgencyProfile.html" title="GeneralAgencyProfile (class)">GeneralAgencyProfile</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_orgs'>orgs</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_by_general_agency_profile'>by_general_agency_profile</span><span class='lparen'>(</span><span class='id identifier rubyid_general_agency_profile'>general_agency_profile</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_orgs'>orgs</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:employer_profile</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_by_writing_agent-class_method">
  
    .<strong>find_by_writing_agent</strong>(writing_agent)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


565
566
567
568
569</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 565</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_by_writing_agent'>find_by_writing_agent</span><span class='lparen'>(</span><span class='id identifier rubyid_writing_agent'>writing_agent</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected BrokerRole</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_writing_agent'>writing_agent</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="BrokerRole.html" title="BrokerRole (class)">BrokerRole</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_orgs'>orgs</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_by_broker_role'>by_broker_role</span><span class='lparen'>(</span><span class='id identifier rubyid_writing_agent'>writing_agent</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_orgs'>orgs</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:employer_profile</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_census_employee_by_person-class_method">
  
    .<strong>find_census_employee_by_person</strong>(person)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


571
572
573
574</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 571</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_census_employee_by_person'>find_census_employee_by_person</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_ssn'>ssn</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>||</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='const'><span class='object_link'><a href="CensusEmployee.html" title="CensusEmployee (class)">CensusEmployee</a></span></span><span class='period'>.</span><span class='id identifier rubyid_matchable'>matchable</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_ssn'>ssn</span><span class='comma'>,</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first-class_method">
  
    .<strong>first</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


532
533
534</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 532</span>

<span class='kw'>def</span> <span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="initial_employers_enrolled_plan_year_state-class_method">
  
    .<strong>initial_employers_enrolled_plan_year_state</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


615
616
617
618
619
620
621</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 615</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initial_employers_enrolled_plan_year_state'>initial_employers_enrolled_plan_year_state</span>
  <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span>
    <span class='lbrace'>{</span> <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>enrolled</span><span class='tstring_end'>&quot;</span></span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last-class_method">
  
    .<strong>last</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


536
537
538</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 536</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last'>last</span>
  <span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="list_embedded-class_method">
  
    .<strong>list_embedded</strong>(parent_list)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


524
525
526</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 524</span>

<span class='kw'>def</span> <span class='id identifier rubyid_list_embedded'>list_embedded</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_list'>parent_list</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_parent_list'>parent_list</span><span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_list'>list</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_instance'>parent_instance</span><span class='op'>|</span> <span class='id identifier rubyid_list'>list</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_parent_instance'>parent_instance</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organizations_eligible_for_renewal-class_method">
  
    .<strong>organizations_eligible_for_renewal</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


623
624
625
626
627
628
629
630
631</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 623</span>

<span class='kw'>def</span> <span class='id identifier rubyid_organizations_eligible_for_renewal'>organizations_eligible_for_renewal</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_months_prior_to_effective'>months_prior_to_effective</span> <span class='op'>=</span> <span class='const'>Settings</span><span class='period'>.</span><span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span><span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span><span class='id identifier rubyid_renewal_application'>renewal_application</span><span class='period'>.</span><span class='id identifier rubyid_earliest_start_prior_to_effective_on'>earliest_start_prior_to_effective_on</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span>
  <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span>
    <span class='lbrace'>{</span> <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='symbol'>:start_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span> <span class='op'>+</span> <span class='id identifier rubyid_months_prior_to_effective'>months_prior_to_effective</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span>
      <span class='symbol'>:aasm_state</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="PlanYear.html" title="PlanYear (class)">PlanYear</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="PlanYear.html#PUBLISHED-constant" title="PlanYear::PUBLISHED (constant)">PUBLISHED</a></span></span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organizations_for_force_publish-class_method">
  
    .<strong>organizations_for_force_publish</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


633
634
635
636
637
638
639
640
641</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 633</span>

<span class='kw'>def</span> <span class='id identifier rubyid_organizations_for_force_publish'>organizations_for_force_publish</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span>
    <span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span>
    <span class='lbrace'>{</span> <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='symbol'>:start_on</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_next_month'>next_month</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span><span class='comma'>,</span>
      <span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>renewing_draft</span><span class='tstring_end'>&#39;</span></span>
      <span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organizations_for_open_enrollment_begin-class_method">
  
    .<strong>organizations_for_open_enrollment_begin</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


576
577
578
579
580
581
582
583
584</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 576</span>

<span class='kw'>def</span> <span class='id identifier rubyid_organizations_for_open_enrollment_begin'>organizations_for_open_enrollment_begin</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span>
      <span class='lbrace'>{</span> <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
       <span class='symbol'>:open_enrollment_start_on</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_lte'>lte</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='comma'>,</span>
       <span class='symbol'>:open_enrollment_end_on</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_gte'>gte</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='comma'>,</span>
       <span class='symbol'>:aasm_state</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>published</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>renewing_published</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
     <span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organizations_for_open_enrollment_end-class_method">
  
    .<strong>organizations_for_open_enrollment_end</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


586
587
588
589
590
591
592
593
594</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 586</span>

<span class='kw'>def</span> <span class='id identifier rubyid_organizations_for_open_enrollment_end'>organizations_for_open_enrollment_end</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span>
      <span class='lbrace'>{</span> <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
       <span class='symbol'>:open_enrollment_end_on</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_lt'>lt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='comma'>,</span>
       <span class='symbol'>:start_on</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_gt'>gt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='comma'>,</span>
       <span class='symbol'>:aasm_state</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>published</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>renewing_published</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enrolling</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>renewing_enrolling</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
     <span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organizations_for_plan_year_begin-class_method">
  
    .<strong>organizations_for_plan_year_begin</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


596
597
598
599
600
601
602
603
604</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 596</span>

<span class='kw'>def</span> <span class='id identifier rubyid_organizations_for_plan_year_begin'>organizations_for_plan_year_begin</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span>
    <span class='lbrace'>{</span> <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='symbol'>:start_on</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_lte'>lte</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='comma'>,</span>
      <span class='symbol'>:end_on</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_gt'>gt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='comma'>,</span>
      <span class='symbol'>:aasm_state</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="PlanYear.html" title="PlanYear (class)">PlanYear</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="PlanYear.html#PUBLISHED-constant" title="PlanYear::PUBLISHED (constant)">PUBLISHED</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="PlanYear.html" title="PlanYear (class)">PlanYear</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="PlanYear.html#RENEWING_PUBLISHED_STATE-constant" title="PlanYear::RENEWING_PUBLISHED_STATE (constant)">RENEWING_PUBLISHED_STATE</a></span></span> <span class='op'>-</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>active</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organizations_for_plan_year_end-class_method">
  
    .<strong>organizations_for_plan_year_end</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


606
607
608
609
610
611
612
613</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 606</span>

<span class='kw'>def</span> <span class='id identifier rubyid_organizations_for_plan_year_end'>organizations_for_plan_year_end</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span>
    <span class='lbrace'>{</span> <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='symbol'>:end_on</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_lt'>lt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='comma'>,</span>
      <span class='symbol'>:aasm_state</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="PlanYear.html" title="PlanYear (class)">PlanYear</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="PlanYear.html#PUBLISHED-constant" title="PlanYear::PUBLISHED (constant)">PUBLISHED</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="PlanYear.html" title="PlanYear (class)">PlanYear</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="PlanYear.html#RENEWING_PUBLISHED_STATE-constant" title="PlanYear::RENEWING_PUBLISHED_STATE (constant)">RENEWING_PUBLISHED_STATE</a></span></span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organizations_for_termination-class_method">
  
    .<strong>organizations_for_termination</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


643
644
645
646
647
648
649
650
651
652</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 643</span>

<span class='kw'>def</span> <span class='id identifier rubyid_organizations_for_termination'>organizations_for_termination</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span>
    <span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>termination_pending</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='symbol'>:terminate_on</span><span class='period'>.</span><span class='id identifier rubyid_lt'>lt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_date'>new_date</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="renewal_employers_reminder_to_publish-class_method">
  
    .<strong>renewal_employers_reminder_to_publish</strong>(start_on)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


654
655
656
657
658
659
660
661
662</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 654</span>

<span class='kw'>def</span> <span class='id identifier rubyid_renewal_employers_reminder_to_publish'>renewal_employers_reminder_to_publish</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span>
    <span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span>
    <span class='lbrace'>{</span> <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='symbol'>:start_on</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span>
      <span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>renewing_draft</span><span class='tstring_end'>&#39;</span></span>
      <span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transmit_scheduled_employers-class_method">
  
    .<strong>transmit_scheduled_employers</strong>(new_date, feins = [])  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 835</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_transmit_scheduled_employers'>transmit_scheduled_employers</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='comma'>,</span> <span class='id identifier rubyid_feins'>feins</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>=</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_next_month'>next_month</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span>
  <span class='id identifier rubyid_employer_collection'>employer_collection</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span>
  <span class='id identifier rubyid_employer_collection'>employer_collection</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:fein</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_feins'>feins</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_feins'>feins</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>

  <span class='id identifier rubyid_employer_collection'>employer_collection</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
    <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:start_on</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_prev_year'>prev_year</span><span class='comma'>,</span> <span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>active</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_org'>org</span><span class='op'>|</span>

    <span class='id identifier rubyid_employer_profile'>employer_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span>
    <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_transmit_renewal_eligible_event'>transmit_renewal_eligible_event</span> <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_renewal_transmission_eligible?'>is_renewal_transmission_eligible?</span>
    <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_transmit_renewal_carrier_drop_event'>transmit_renewal_carrier_drop_event</span> <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_renewal_carrier_drop?'>is_renewal_carrier_drop?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_employer_collection'>employer_collection</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_profile.plan_years</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
    <span class='symbol'>:$elemMatch</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:start_on</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span> <span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enrolled</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:employer_profile.aasm_state</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>binder_paid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_org'>org</span><span class='op'>|</span>

    <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_transmit_initial_eligible_event'>transmit_initial_eligible_event</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_status_to_binder_paid-class_method">
  
    .<strong>update_status_to_binder_paid</strong>(organization_ids)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>def is_eligible_to_shop?</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_registered?'>registered?</span> <span class='kw'>or</span> <span class='id identifier rubyid_published_plan_year'>published_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_enrolling?'>enrolling?</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


999
1000
1001
1002
1003
1004
1005</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 999</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_status_to_binder_paid'>update_status_to_binder_paid</span><span class='lparen'>(</span><span class='id identifier rubyid_organization_ids'>organization_ids</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_organization_ids'>organization_ids</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_org'>org</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_binder_credited!'>binder_credited!</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="active_and_renewing_published-instance_method">
  
    #<strong>active_and_renewing_published</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299
300
301
302
303
304</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_and_renewing_published'>active_and_renewing_published</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_active_plan_year'>active_plan_year</span>  <span class='kw'>if</span> <span class='id identifier rubyid_active_plan_year'>active_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_renewing_published_plan_year'>renewing_published_plan_year</span>  <span class='kw'>if</span> <span class='id identifier rubyid_renewing_published_plan_year'>renewing_published_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_broker-instance_method">
  
    #<strong>active_broker</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 192</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_broker'>active_broker</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_writing_agent_id'>writing_agent_id</span>
    <span class='const'><span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>broker_role._id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='const'>BSON</span><span class='op'>::</span><span class='const'>ObjectId</span><span class='period'>.</span><span class='id identifier rubyid_from_string'>from_string</span><span class='lparen'>(</span><span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_writing_agent_id'>writing_agent_id</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_broker_agency_account-instance_method">
  
    #<strong>active_broker_agency_account</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span>
  <span class='kw'>return</span> <span class='ivar'>@active_broker_agency_account</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@active_broker_agency_account</span>
  <span class='ivar'>@active_broker_agency_account</span> <span class='op'>=</span> <span class='id identifier rubyid_broker_agency_accounts'>broker_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_account'>account</span><span class='op'>|</span> <span class='id identifier rubyid_account'>account</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_broker_agency_legal_name-instance_method">
  
    #<strong>active_broker_agency_legal_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 198</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_broker_agency_legal_name'>active_broker_agency_legal_name</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span>
    <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_ba_name'>ba_name</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_general_agency_account-instance_method">
  
    #<strong>active_general_agency_account</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_general_agency_account'>active_general_agency_account</span>
  <span class='id identifier rubyid_general_agency_accounts'>general_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_general_agency_legal_name-instance_method">
  
    #<strong>active_general_agency_legal_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 217</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_general_agency_legal_name'>active_general_agency_legal_name</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_active_general_agency_account'>active_general_agency_account</span>
    <span class='id identifier rubyid_active_general_agency_account'>active_general_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_ga_name'>ga_name</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_or_published_plan_year-instance_method">
  
    #<strong>active_or_published_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 295</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_or_published_plan_year'>active_or_published_plan_year</span>
   <span class='id identifier rubyid_published_plan_year'>published_plan_year</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_plan_year-instance_method">
  
    #<strong>active_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273
274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 271</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_plan_year'>active_plan_year</span>
  <span class='ivar'>@active_plan_year</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@active_plan_year</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_published_plan_years_by_date'>published_plan_years_by_date</span><span class='lparen'>(</span><span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='ivar'>@active_plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_year'>plan_year</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="billing_plan_year-instance_method">
  
    #<strong>billing_plan_year</strong>(billing_date = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 353</span>

<span class='kw'>def</span> <span class='id identifier rubyid_billing_plan_year'>billing_plan_year</span><span class='lparen'>(</span><span class='id identifier rubyid_billing_date'>billing_date</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_billing_report_date'>billing_report_date</span> <span class='op'>=</span> <span class='id identifier rubyid_billing_date'>billing_date</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_next_month'>next_month</span>
  <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_find_plan_year_by_effective_date'>find_plan_year_by_effective_date</span><span class='lparen'>(</span><span class='id identifier rubyid_billing_report_date'>billing_report_date</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_billing_date'>billing_date</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_published'>published</span> <span class='op'>+</span> <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_renewing_published_state'>renewing_published_state</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_py'>py</span><span class='op'>|</span> <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_billing_report_date'>billing_report_date</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment_contains?'>open_enrollment_contains?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
        <span class='id identifier rubyid_billing_report_date'>billing_report_date</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_find_plan_year_by_effective_date'>find_plan_year_by_effective_date</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_billing_report_date'>billing_report_date</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_published'>published</span> <span class='op'>+</span> <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_renewing_published_state'>renewing_published_state</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_py'>py</span><span class='op'>|</span> <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_billing_report_date'>billing_report_date</span> <span class='rbrace'>}</span>
        <span class='id identifier rubyid_billing_report_date'>billing_report_date</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='comma'>,</span> <span class='id identifier rubyid_billing_report_date'>billing_report_date</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="binder_criteria_satisfied?-instance_method">
  
    #<strong>binder_criteria_satisfied?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


412
413
414
415
416</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 412</span>

<span class='kw'>def</span> <span class='id identifier rubyid_binder_criteria_satisfied?'>binder_criteria_satisfied?</span>
  <span class='id identifier rubyid_show_plan_year'>show_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span>
  <span class='id identifier rubyid_participation_count'>participation_count</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span>
  <span class='id identifier rubyid_non_owner_participation_criteria_met?'>non_owner_participation_criteria_met?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="broadcast_employer_update-instance_method">
  
    #<strong>broadcast_employer_update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


959
960
961
962
963</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 959</span>

<span class='kw'>def</span> <span class='id identifier rubyid_broadcast_employer_update'>broadcast_employer_update</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_previous_states'>previous_states</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:binder_paid</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span> <span class='op'>==</span> <span class='symbol'>:binder_paid</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#EMPLOYER_PROFILE_UPDATED_EVENT_NAME-constant" title="EmployerProfile::EMPLOYER_PROFILE_UPDATED_EVENT_NAME (constant)">EMPLOYER_PROFILE_UPDATED_EVENT_NAME</a></span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:employer_id</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="broker_agency_profile-instance_method">
  
    #<strong>broker_agency_profile</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 182</span>

<span class='kw'>def</span> <span class='id identifier rubyid_broker_agency_profile'>broker_agency_profile</span>
  <span class='kw'>return</span> <span class='ivar'>@broker_agency_profile</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@broker_agency_profile</span>
  <span class='ivar'>@broker_agency_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_broker_agency_profile'>broker_agency_profile</span> <span class='kw'>if</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="broker_fired_confirmation_to_broker-instance_method">
  
    #<strong>broker_fired_confirmation_to_broker</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_broker_fired_confirmation_to_broker'>broker_fired_confirmation_to_broker</span>
  <span class='id identifier rubyid_trigger_notices'>trigger_notices</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>broker_fired_confirmation_to_broker</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_plan_year_from_quote-instance_method">
  
    #<strong>build_plan_year_from_quote</strong>(quote_claim_code, import_census_employee = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 441</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_plan_year_from_quote'>build_plan_year_from_quote</span><span class='lparen'>(</span><span class='id identifier rubyid_quote_claim_code'>quote_claim_code</span><span class='comma'>,</span> <span class='id identifier rubyid_import_census_employee'>import_census_employee</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_quote'>quote</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Quote.html" title="Quote (class)">Quote</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>claim_code</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_quote_claim_code'>quote_claim_code</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>published</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

  <span class='comment'># Perform quote link if claim_code is valid
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_quote'>quote</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_quote_claim_code'>quote_claim_code</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_quote'>quote</span><span class='period'>.</span><span class='id identifier rubyid_published?'>published?</span>

    <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='lbrace'>{</span>
      <span class='label'>start_on:</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>+</span> <span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span><span class='comma'>,</span> <span class='label'>end_on:</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>+</span> <span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span> <span class='op'>+</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='comma'>,</span>
      <span class='label'>open_enrollment_start_on:</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='comma'>,</span> <span class='label'>open_enrollment_end_on:</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span> <span class='op'>+</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span> <span class='op'>+</span> <span class='int'>9</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='comma'>,</span>
      <span class='label'>fte_count:</span> <span class='id identifier rubyid_quote'>quote</span><span class='period'>.</span><span class='id identifier rubyid_member_count'>member_count</span>
      <span class='rbrace'>}</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_benefit_group_mapping'>benefit_group_mapping</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='comment'># Build each quote benefit group from quote
</span>    <span class='id identifier rubyid_quote'>quote</span><span class='period'>.</span><span class='id identifier rubyid_quote_benefit_groups'>quote_benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='op'>|</span>
      <span class='id identifier rubyid_benefit_group'>benefit_group</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>plan_option_kind:</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_plan_option_kind'>plan_option_kind</span><span class='comma'>,</span> <span class='label'>title:</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='label'>description:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Linked from Quote with claim code </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_quote_claim_code'>quote_claim_code</span> <span class='rbrace'>}</span><span class='rparen'>)</span>

      <span class='comment'># map quote benefit group to newly created plan year benefit group so it can be assigned to census employees if imported
</span>      <span class='id identifier rubyid_benefit_group_mapping'>benefit_group_mapping</span><span class='lbracket'>[</span><span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>

      <span class='comment'># Assign benefit group plan information (HEALTH)
</span>      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_lowest_cost_plan_id'>lowest_cost_plan_id</span> <span class='op'>=</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_published_lowest_cost_plan'>published_lowest_cost_plan</span>
      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_reference_plan_id'>reference_plan_id</span> <span class='op'>=</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_published_reference_plan'>published_reference_plan</span>
      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_highest_cost_plan_id'>highest_cost_plan_id</span> <span class='op'>=</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_published_highest_cost_plan'>published_highest_cost_plan</span>
      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_elected_plan_ids'>elected_plan_ids</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_published_reference_plan'>published_reference_plan</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_dental_plan_option_kind'>dental_plan_option_kind</span> <span class='op'>=</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_dental_plan_option_kind'>dental_plan_option_kind</span>
      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_relationship_benefits'>relationship_benefits</span> <span class='op'>=</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_quote_relationship_benefits'>quote_relationship_benefits</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='symbol'>:offered</span><span class='comma'>,</span><span class='symbol'>:relationship</span><span class='comma'>,</span> <span class='symbol'>:premium_pct</span><span class='rparen'>)</span><span class='rbrace'>}</span>

      <span class='comment'># Assign benefit group plan information (DENTAL )
</span>      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_dental_reference_plan_id'>dental_reference_plan_id</span> <span class='op'>=</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_published_dental_reference_plan'>published_dental_reference_plan</span>
      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_elected_dental_plan_ids'>elected_dental_plan_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_elected_dental_plan_ids'>elected_dental_plan_ids</span>

      <span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_dental_relationship_benefits'>dental_relationship_benefits</span> <span class='op'>=</span> <span class='id identifier rubyid_quote_benefit_group'>quote_benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_quote_dental_relationship_benefits'>quote_dental_relationship_benefits</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='symbol'>:offered</span><span class='comma'>,</span><span class='symbol'>:relationship</span><span class='comma'>,</span> <span class='symbol'>:premium_pct</span><span class='rparen'>)</span><span class='rbrace'>}</span>

    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>

      <span class='id identifier rubyid_quote'>quote</span><span class='period'>.</span><span class='id identifier rubyid_claim!'>claim!</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_import_census_employee'>import_census_employee</span> <span class='op'>==</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_quote'>quote</span><span class='period'>.</span><span class='id identifier rubyid_quote_households'>quote_households</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_qhh'>qhh</span><span class='op'>|</span>
          <span class='id identifier rubyid_qhh_employee'>qhh_employee</span> <span class='op'>=</span> <span class='id identifier rubyid_qhh'>qhh</span><span class='period'>.</span><span class='id identifier rubyid_employee'>employee</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_qhh'>qhh</span><span class='period'>.</span><span class='id identifier rubyid_employee'>employee</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
              <span class='id identifier rubyid_quote_employee'>quote_employee</span> <span class='op'>=</span> <span class='id identifier rubyid_qhh'>qhh</span><span class='period'>.</span><span class='id identifier rubyid_employee'>employee</span>
              <span class='id identifier rubyid_ce'>ce</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="CensusEmployee.html" title="CensusEmployee (class)">CensusEmployee</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="CensusEmployee.html#initialize-instance_method" title="CensusEmployee#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>employer_profile_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>first_name</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_quote_employee'>quote_employee</span><span class='period'>.</span><span class='id identifier rubyid_first_name'>first_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>last_name</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_quote_employee'>quote_employee</span><span class='period'>.</span><span class='id identifier rubyid_last_name'>last_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dob</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_quote_employee'>quote_employee</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hired_on</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
              <span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_find_or_create_benefit_group_assignment'>find_or_create_benefit_group_assignment</span><span class='lparen'>(</span><span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_benefit_group_mapping'>benefit_group_mapping</span><span class='lbracket'>[</span><span class='id identifier rubyid_qhh'>qhh</span><span class='period'>.</span><span class='id identifier rubyid_quote_benefit_group_id'>quote_benefit_group_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='rparen'>)</span>

              <span class='id identifier rubyid_qhh'>qhh</span><span class='period'>.</span><span class='id identifier rubyid_dependents'>dependents</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_qhh_dependent'>qhh_dependent</span><span class='op'>|</span>
                <span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_census_dependents'>census_dependents</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="CensusDependent.html" title="CensusDependent (class)">CensusDependent</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
                  <span class='label'>last_name:</span> <span class='id identifier rubyid_qhh_dependent'>qhh_dependent</span><span class='period'>.</span><span class='id identifier rubyid_last_name'>last_name</span><span class='comma'>,</span> <span class='label'>first_name:</span> <span class='id identifier rubyid_qhh_dependent'>qhh_dependent</span><span class='period'>.</span><span class='id identifier rubyid_first_name'>first_name</span><span class='comma'>,</span> <span class='label'>dob:</span> <span class='id identifier rubyid_qhh_dependent'>qhh_dependent</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span><span class='comma'>,</span> <span class='label'>employee_relationship:</span> <span class='id identifier rubyid_qhh_dependent'>qhh_dependent</span><span class='period'>.</span><span class='id identifier rubyid_employee_relationship'>employee_relationship</span>
                  <span class='rparen'>)</span>
              <span class='kw'>end</span>
              <span class='id identifier rubyid_ce'>ce</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span><span class='lparen'>(</span><span class='symbol'>:validate</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='kw'>return</span> <span class='kw'>true</span>

    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="census_employees-instance_method">
  
    #<strong>census_employees</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_census_employees'>census_employees</span>
  <span class='const'><span class='object_link'><a href="CensusEmployee.html" title="CensusEmployee (class)">CensusEmployee</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_employer_profile'>find_by_employer_profile</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="conversion_employer?-instance_method">
  
    #<strong>conversion_employer?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1075
1076
1077</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1075</span>

<span class='kw'>def</span> <span class='id identifier rubyid_conversion_employer?'>conversion_employer?</span>
  <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_converted_from_carrier_at'>converted_from_carrier_at</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="covered_employee_roles-instance_method">
  
    #<strong>covered_employee_roles</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_covered_employee_roles'>covered_employee_roles</span>
  <span class='id identifier rubyid_covered_ee_ids'>covered_ee_ids</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="CensusEmployee.html" title="CensusEmployee (class)">CensusEmployee</a></span></span><span class='period'>.</span><span class='id identifier rubyid_by_employer_profile_id'>by_employer_profile_id</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_covered'>covered</span><span class='period'>.</span><span class='id identifier rubyid_only'>only</span><span class='lparen'>(</span><span class='symbol'>:employee_role_id</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="EmployeeRole.html" title="EmployeeRole (class)">EmployeeRole</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ids_in'><span class='object_link'><a href="EmployeeRole.html#ids_in-class_method" title="EmployeeRole.ids_in (method)">ids_in</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_covered_ee_ids'>covered_ee_ids</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_benefit_group-instance_method">
  
    #<strong>default_benefit_group</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


861
862
863
864
865</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 861</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_benefit_group'>default_benefit_group</span>
  <span class='id identifier rubyid_plan_year_with_default'>plan_year_with_default</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>benefit_groups.default</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_plan_year_with_default'>plan_year_with_default</span>
  <span class='id identifier rubyid_plan_year_with_default'>plan_year_with_default</span><span class='period'>.</span><span class='id identifier rubyid_benefit_groups'>benefit_groups</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_bg'>bg</span><span class='op'>|</span> <span class='id identifier rubyid_bg'>bg</span><span class='period'>.</span><span class='id identifier rubyid_default'>default</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="draft_plan_year-instance_method">
  
    #<strong>draft_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_draft_plan_year'>draft_plan_year</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_py'>py</span><span class='op'>|</span> <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>draft</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dt_display_plan_year-instance_method">
  
    #<strong>dt_display_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 306</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dt_display_plan_year'>dt_display_plan_year</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_ne'>ne</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>canceled</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:start_on</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>||</span> <span class='id identifier rubyid_latest_plan_year'>latest_plan_year</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="earliest_plan_year_start_on_date-instance_method">
  
    #<strong>earliest_plan_year_start_on_date</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


344
345
346
347
348
349
350
351</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 344</span>

<span class='kw'>def</span> <span class='id identifier rubyid_earliest_plan_year_start_on_date'>earliest_plan_year_start_on_date</span>
 <span class='id identifier rubyid_plan_years'>plan_years</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_published_or_renewing_published'>published_or_renewing_published</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expired</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>terminated</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
 <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_py'>py</span><span class='op'>|</span> <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_can_be_migrated?'>can_be_migrated?</span> <span class='rbrace'>}</span>
 <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_test'>test</span><span class='op'>|</span> <span class='id identifier rubyid_test'>test</span><span class='lbracket'>[</span><span class='symbol'>:start_on</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
 <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
   <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span>
 <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="employee_roles-instance_method">
  
    #<strong>employee_roles</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 256</span>

<span class='kw'>def</span> <span class='id identifier rubyid_employee_roles'>employee_roles</span>
  <span class='kw'>return</span> <span class='ivar'>@employee_roles</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@employee_roles</span>
  <span class='ivar'>@employee_roles</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="EmployeeRole.html" title="EmployeeRole (class)">EmployeeRole</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_employer_profile'><span class='object_link'><a href="EmployeeRole.html#find_by_employer_profile-class_method" title="EmployeeRole.find_by_employer_profile (method)">find_by_employer_profile</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="employer_broker_fired-instance_method">
  
    #<strong>employer_broker_fired</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 176</span>

<span class='kw'>def</span> <span class='id identifier rubyid_employer_broker_fired'>employer_broker_fired</span>
  <span class='id identifier rubyid_trigger_notices'>trigger_notices</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>employer_broker_fired</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrollment_ineligible_period_expired?-instance_method">
  
    #<strong>enrollment_ineligible_period_expired?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


980
981
982
983
984
985
986
987
988
989
990
991
992
993</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 980</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrollment_ineligible_period_expired?'>enrollment_ineligible_period_expired?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_latest_workflow_state_transition'>latest_workflow_state_transition</span><span class='period'>.</span><span class='id identifier rubyid_to_state'>to_state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ineligible</span><span class='tstring_end'>&quot;</span></span>
    <span class='lparen'>(</span><span class='id identifier rubyid_latest_workflow_state_transition'>latest_workflow_state_transition</span><span class='period'>.</span><span class='id identifier rubyid_transition_at'>transition_at</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_advance'>advance</span><span class='lparen'>(</span><span class='const'>Settings</span><span class='period'>.</span>
                                                                        <span class='id identifier rubyid_aca'>aca</span><span class='period'>.</span>
                                                                        <span class='id identifier rubyid_shop_market'>shop_market</span><span class='period'>.</span>
                                                                        <span class='id identifier rubyid_initial_application'>initial_application</span><span class='period'>.</span>
                                                                        <span class='id identifier rubyid_ineligible_period_after_application_denial'>ineligible_period_after_application_denial</span><span class='period'>.</span>
                                                                        <span class='id identifier rubyid_to_hash'>to_hash</span>
                                                                      <span class='rparen'>)</span>
                                                                    <span class='rparen'>)</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span>
  <span class='kw'>else</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enrollments_for_billing-instance_method">
  
    #<strong>enrollments_for_billing</strong>(billing_date = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


380
381
382
383
384
385
386
387
388
389
390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 380</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enrollments_for_billing'>enrollments_for_billing</span><span class='lparen'>(</span><span class='id identifier rubyid_billing_date'>billing_date</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_plan_year'>plan_year</span><span class='comma'>,</span> <span class='id identifier rubyid_billing_report_date'>billing_report_date</span> <span class='op'>=</span> <span class='id identifier rubyid_billing_plan_year'>billing_plan_year</span><span class='lparen'>(</span><span class='id identifier rubyid_billing_date'>billing_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments_by_month'>hbx_enrollments_by_month</span><span class='lparen'>(</span><span class='id identifier rubyid_billing_report_date'>billing_report_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
    <span class='comment'># hbx_enrollments.reject!{|enrollment| !enrollment.census_employee.is_active?}
</span>  <span class='kw'>end</span>

  <span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_plan_year-instance_method">
  
    #<strong>find_plan_year</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 392</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_plan_year'>find_plan_year</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_plan_year_by_effective_date-instance_method">
  
    #<strong>find_plan_year_by_effective_date</strong>(target_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338
339
340
341
342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 336</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_plan_year_by_effective_date'>find_plan_year_by_effective_date</span><span class='lparen'>(</span><span class='id identifier rubyid_target_date'>target_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_published'>published</span> <span class='op'>+</span> <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_renewing_published_state'>renewing_published_state</span> <span class='op'>+</span> <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>aasm_state:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expired</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_py'>py</span><span class='op'>|</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span><span class='op'>..</span><span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_end_on'>end_on</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_cover?'>cover?</span><span class='lparen'>(</span><span class='id identifier rubyid_target_date'>target_date</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='lparen'>(</span><span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_external_plan_year?'>external_plan_year?</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_renewing_published_plan_year'>renewing_published_plan_year</span> <span class='op'>:</span> <span class='id identifier rubyid_plan_year'>plan_year</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fire_broker_agency-instance_method">
  
    #<strong>fire_broker_agency</strong>(terminate_on = today)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fire_broker_agency'>fire_broker_agency</span><span class='lparen'>(</span><span class='id identifier rubyid_terminate_on'>terminate_on</span> <span class='op'>=</span> <span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span>
  <span class='const'>SponsoredBenefits</span><span class='op'>::</span><span class='const'>Organizations</span><span class='op'>::</span><span class='const'>BrokerAgencyProfile</span><span class='period'>.</span><span class='id identifier rubyid_unassign_broker'>unassign_broker</span><span class='lparen'>(</span><span class='label'>broker_agency:</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_broker_agency_profile'>broker_agency_profile</span><span class='comma'>,</span> <span class='label'>employer:</span> <span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_organization'>organization</span>
  <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_end_on'>end_on</span> <span class='op'>=</span> <span class='id identifier rubyid_terminate_on'>terminate_on</span>
  <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_is_active'>is_active</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
  <span class='id identifier rubyid_trigger_notice_observer'>trigger_notice_observer</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>broker_fired_confirmation_to_employer</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_notify_broker_terminated'>notify_broker_terminated</span>
  <span class='id identifier rubyid_trigger_notice_observer'>trigger_notice_observer</span><span class='lparen'>(</span><span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_broker_agency_profile'>broker_agency_profile</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>broker_agency_fired_confirmation</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_trigger_notice_observer'>trigger_notice_observer</span><span class='lparen'>(</span><span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_broker_agency_profile'>broker_agency_profile</span><span class='period'>.</span><span class='id identifier rubyid_primary_broker_role'>primary_broker_role</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>broker_fired_confirmation_to_broker</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fire_general_agency!-instance_method">
  
    #<strong>fire_general_agency!</strong>(terminate_on = TimeKeeper.datetime_of_record)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250
251
252
253</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 248</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fire_general_agency!'>fire_general_agency!</span><span class='lparen'>(</span><span class='id identifier rubyid_terminate_on'>terminate_on</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_datetime_of_record'><span class='object_link'><a href="TimeKeeper.html#datetime_of_record-class_method" title="TimeKeeper.datetime_of_record (method)">datetime_of_record</a></span></span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_active_general_agency_account'>active_general_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='id identifier rubyid_general_agency_accounts'>general_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_update_all'>update_all</span><span class='lparen'>(</span><span class='label'>aasm_state:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inactive</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>end_on:</span> <span class='id identifier rubyid_terminate_on'>terminate_on</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_notify_general_agent_terminated'>notify_general_agent_terminated</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_trigger_notices'>trigger_notices</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>general_agency_terminated</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="general_agency_profile-instance_method">
  
    #<strong>general_agency_profile</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 227</span>

<span class='kw'>def</span> <span class='id identifier rubyid_general_agency_profile'>general_agency_profile</span>
  <span class='kw'>return</span> <span class='ivar'>@general_agency_profile</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@general_agency_profile</span>
  <span class='ivar'>@general_agency_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_active_general_agency_account'>active_general_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_general_agency_profile'>general_agency_profile</span> <span class='kw'>if</span> <span class='id identifier rubyid_active_general_agency_account'>active_general_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_and_deliver_checkbook_urls_for_employees-instance_method">
  
    #<strong>generate_and_deliver_checkbook_urls_for_employees</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1089
1090
1091
1092
1093</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1089</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_and_deliver_checkbook_urls_for_employees'>generate_and_deliver_checkbook_urls_for_employees</span>
  <span class='id identifier rubyid_census_employees'>census_employees</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_census_employee'>census_employee</span><span class='op'>|</span>
    <span class='id identifier rubyid_census_employee'>census_employee</span><span class='period'>.</span><span class='id identifier rubyid_generate_and_deliver_checkbook_url'>generate_and_deliver_checkbook_url</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_checkbook_notices-instance_method">
  
    #<strong>generate_checkbook_notices</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1095
1096
1097</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1095</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_checkbook_notices'>generate_checkbook_notices</span>
  <span class='const'><span class='object_link'><a href="ShopNoticesNotifierJob.html" title="ShopNoticesNotifierJob (class)">ShopNoticesNotifierJob</a></span></span><span class='period'>.</span><span class='id identifier rubyid_perform_later'>perform_later</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>out_of_pocker_url_notifier</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_active_state?-instance_method">
  
    #<strong>has_active_state?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 156</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_active_state?'>has_active_state?</span>
  <span class='const'><span class='object_link'><a href="#ACTIVE_STATES-constant" title="EmployerProfile::ACTIVE_STATES (constant)">ACTIVE_STATES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_next_month_plan_year?-instance_method">
  
    #<strong>has_next_month_plan_year?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1015
1016
1017</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1015</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_next_month_plan_year?'>has_next_month_plan_year?</span>
  <span class='id identifier rubyid_show_plan_year'>show_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_show_plan_year'>show_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>==</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span><span class='period'>.</span><span class='id identifier rubyid_next_month'>next_month</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_month'>beginning_of_month</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hashed_active_general_agency_legal_name-instance_method">
  
    #<strong>hashed_active_general_agency_legal_name</strong>(gaps)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>for General Agency</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


211
212
213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 211</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hashed_active_general_agency_legal_name'>hashed_active_general_agency_legal_name</span> <span class='id identifier rubyid_gaps'>gaps</span>
  <span class='kw'>return</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_account'>account</span> <span class='op'>=</span> <span class='id identifier rubyid_active_general_agency_account'>active_general_agency_account</span>
  <span class='id identifier rubyid_gap'>gap</span> <span class='op'>=</span> <span class='id identifier rubyid_gaps'>gaps</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_gap'>gap</span><span class='op'>|</span> <span class='id identifier rubyid_gap'>gap</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_account'>account</span><span class='period'>.</span><span class='id identifier rubyid_general_agency_profile_id'>general_agency_profile_id</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_gap'>gap</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_gap'>gap</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hire_broker_agency-instance_method">
  
    #<strong>hire_broker_agency</strong>(new_broker_agency, start_on = today)  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='broker_agency_profile=-instance_method'>broker_agency_profile=</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>for broker agency</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hire_broker_agency'>hire_broker_agency</span><span class='lparen'>(</span><span class='id identifier rubyid_new_broker_agency'>new_broker_agency</span><span class='comma'>,</span> <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>=</span> <span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span>
  <span class='const'>SponsoredBenefits</span><span class='op'>::</span><span class='const'>Organizations</span><span class='op'>::</span><span class='const'>BrokerAgencyProfile</span><span class='period'>.</span><span class='id identifier rubyid_assign_employer'>assign_employer</span><span class='lparen'>(</span><span class='label'>broker_agency:</span> <span class='id identifier rubyid_new_broker_agency'>new_broker_agency</span><span class='comma'>,</span> <span class='label'>employer:</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='label'>office_locations:</span> <span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_office_locations'>office_locations</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_organization'>organization</span>
  <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>=</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_terminate_on'>terminate_on</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_end_of_day'>end_of_day</span>
    <span class='id identifier rubyid_fire_broker_agency'>fire_broker_agency</span><span class='lparen'>(</span><span class='id identifier rubyid_terminate_on'>terminate_on</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_fire_general_agency!'>fire_general_agency!</span><span class='lparen'>(</span><span class='id identifier rubyid_terminate_on'>terminate_on</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_broker_agency_accounts'>broker_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='label'>broker_agency_profile:</span> <span class='id identifier rubyid_new_broker_agency'>new_broker_agency</span><span class='comma'>,</span> <span class='label'>writing_agent_id:</span> <span class='id identifier rubyid_broker_role_id'>broker_role_id</span><span class='comma'>,</span> <span class='label'>start_on:</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='rparen'>)</span>
  <span class='ivar'>@broker_agency_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_new_broker_agency'>new_broker_agency</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hire_general_agency-instance_method">
  
    #<strong>hire_general_agency</strong>(new_general_agency, broker_role_id = nil, start_on = TimeKeeper.datetime_of_record)  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='general_agency_profile=-instance_method'>general_agency_profile=</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


232
233
234
235
236
237
238
239
240
241
242
243
244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 232</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hire_general_agency'>hire_general_agency</span><span class='lparen'>(</span><span class='id identifier rubyid_new_general_agency'>new_general_agency</span><span class='comma'>,</span> <span class='id identifier rubyid_broker_role_id'>broker_role_id</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_start_on'>start_on</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_datetime_of_record'><span class='object_link'><a href="TimeKeeper.html#datetime_of_record-class_method" title="TimeKeeper.datetime_of_record (method)">datetime_of_record</a></span></span><span class='rparen'>)</span>

  <span class='comment'># commented out the start_on and terminate_on
</span>  <span class='comment'># which is same as broker calculation, However it will cause problem
</span>  <span class='comment'># start_on later than end_on
</span>  <span class='comment'>#
</span>  <span class='comment'>#start_on = start_on.to_date.beginning_of_day
</span>  <span class='comment'>#if active_general_agency_account.present?
</span>  <span class='comment'>#  terminate_on = (start_on - 1.day).end_of_day
</span>  <span class='comment'>#  fire_general_agency!(terminate_on)
</span>  <span class='comment'>#end
</span>  <span class='id identifier rubyid_fire_general_agency!'>fire_general_agency!</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_datetime_of_record'><span class='object_link'><a href="TimeKeeper.html#datetime_of_record-class_method" title="TimeKeeper.datetime_of_record (method)">datetime_of_record</a></span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_active_general_agency_account'>active_general_agency_account</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_general_agency_accounts'>general_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='label'>general_agency_profile:</span> <span class='id identifier rubyid_new_general_agency'>new_general_agency</span><span class='comma'>,</span> <span class='label'>start_on:</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span> <span class='label'>broker_role_id:</span> <span class='id identifier rubyid_broker_role_id'>broker_role_id</span><span class='rparen'>)</span>
  <span class='ivar'>@general_agency_profile</span> <span class='op'>=</span> <span class='id identifier rubyid_new_general_agency'>new_general_agency</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_attestation_eligible?-instance_method">
  
    #<strong>is_attestation_eligible?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1174
1175
1176
1177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1174</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_attestation_eligible?'>is_attestation_eligible?</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='id identifier rubyid_enforce_employer_attestation?'>enforce_employer_attestation?</span>
  <span class='id identifier rubyid_employer_attestation'>employer_attestation</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_employer_attestation'>employer_attestation</span><span class='period'>.</span><span class='id identifier rubyid_is_eligible?'>is_eligible?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_conversion?-instance_method">
  
    #<strong>is_conversion?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 318</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_conversion?'>is_conversion?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_profile_source'>profile_source</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>conversion</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_converting?-instance_method">
  
    #<strong>is_converting?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


322
323
324</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 322</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_converting?'>is_converting?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_conversion?'>is_conversion?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_published_plan_year'>published_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_published_plan_year'>published_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_is_conversion'>is_conversion</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_converting_with_renewal_state?-instance_method">
  
    #<strong>is_converting_with_renewal_state?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>It will check whether employer is regular or convesion It will add
additional check on conversion employers with plan year is in
PlanYear::RENEWING</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>@return true if employer is conversion employer &amp;&amp; plan year is
renewal related states @return false other wise</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 332</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_converting_with_renewal_state?'>is_converting_with_renewal_state?</span>
  <span class='id identifier rubyid_is_converting?'>is_converting?</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="PlanYear.html" title="PlanYear (class)">PlanYear</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="PlanYear.html#RENEWING-constant" title="PlanYear::RENEWING (constant)">RENEWING</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_published_plan_year'>published_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_eligible_to_enroll?-instance_method">
  
    #<strong>is_eligible_to_enroll?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1019
1020
1021</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1019</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_eligible_to_enroll?'>is_eligible_to_enroll?</span>
  <span class='id identifier rubyid_published_plan_year'>published_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_enrolling?'>enrolling?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_new_employer?-instance_method">
  
    #<strong>is_new_employer?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1007
1008
1009</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1007</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_new_employer?'>is_new_employer?</span>
  <span class='op'>!</span><span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='comment'>#&amp;&amp; TimeKeeper.date_of_record &gt; 10
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_primary_office_local?-instance_method">
  
    #<strong>is_primary_office_local?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


430
431
432</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 430</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_primary_office_local?'>is_primary_office_local?</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_primary_office_location'>primary_office_location</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='id identifier rubyid_aca_state_abbreviation'>aca_state_abbreviation</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_renewal_carrier_drop?-instance_method">
  
    #<strong>is_renewal_carrier_drop?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


513
514
515
516
517
518
519</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 513</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_renewal_carrier_drop?'>is_renewal_carrier_drop?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_is_renewal_transmission_eligible?'>is_renewal_transmission_eligible?</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_active_plan_year'>active_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_carriers_offered'>carriers_offered</span> <span class='op'>-</span> <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_carriers_offered'>carriers_offered</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_active_plan_year'>active_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_dental_carriers_offered'>dental_carriers_offered</span> <span class='op'>-</span> <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_dental_carriers_offered'>dental_carriers_offered</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
  <span class='kw'>else</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_renewal_transmission_eligible?-instance_method">
  
    #<strong>is_renewal_transmission_eligible?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


509
510
511</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 509</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_renewal_transmission_eligible?'>is_renewal_transmission_eligible?</span>
  <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_renewing_enrolled?'>renewing_enrolled?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_renewing_employer?-instance_method">
  
    #<strong>is_renewing_employer?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1011
1012
1013</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1011</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_renewing_employer?'>is_renewing_employer?</span>
   <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='comment'>#&amp;&amp; TimeKeeper.date_of_record.day &gt; 13
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_transmit_xml_button_disabled?-instance_method">
  
    #<strong>is_transmit_xml_button_disabled?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


404
405
406
407
408
409
410</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 404</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_transmit_xml_button_disabled?'>is_transmit_xml_button_disabled?</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_binder_criteria_satisfied?'>binder_criteria_satisfied?</span>
  <span class='kw'>else</span>
    <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_binder_paid?'>binder_paid?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_zip_outside?-instance_method">
  
    #<strong>is_zip_outside?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>It will provide whether employer_profile zip code is inside MA or not if
zip_code is inside MA returns true else returns false</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>boolean</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


437
438
439</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 437</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_zip_outside?'>is_zip_outside?</span>
  <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="RatingArea.html" title="RatingArea (class)">RatingArea</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:zip_code</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_primary_office_location'>primary_office_location</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_plan_year-instance_method">
  
    #<strong>latest_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 278</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest_plan_year'>latest_plan_year</span>
  <span class='kw'>return</span> <span class='ivar'>@latest_plan_year</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@latest_plan_year</span>
  <span class='ivar'>@latest_plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:start_on</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_only'>only</span><span class='lparen'>(</span><span class='symbol'>:plan_years</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_workflow_state_transition-instance_method">
  
    #<strong>latest_workflow_state_transition</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


976
977
978</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 976</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest_workflow_state_transition'>latest_workflow_state_transition</span>
  <span class='id identifier rubyid_workflow_state_transitions'>workflow_state_transitions</span><span class='period'>.</span><span class='id identifier rubyid_order_by'>order_by</span><span class='lparen'>(</span><span class='symbol'>:transition_at</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="match_employer-instance_method">
  
    #<strong>match_employer</strong>(current_user)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_match_employer'>match_employer</span><span class='lparen'>(</span><span class='id identifier rubyid_current_user'>current_user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_staff_roles'>staff_roles</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_staff'>staff</span><span class='op'>|</span> <span class='id identifier rubyid_staff'>staff</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_person_id'>person_id</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="memoize_active_broker-instance_method">
  
    #<strong>memoize_active_broker</strong>(active_broker_memo)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 204</span>

<span class='kw'>def</span> <span class='id identifier rubyid_memoize_active_broker'>memoize_active_broker</span> <span class='id identifier rubyid_active_broker_memo'>active_broker_memo</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_account'>account</span> <span class='op'>=</span> <span class='id identifier rubyid_active_broker_agency_account'>active_broker_agency_account</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_memo'>memo</span> <span class='op'>=</span> <span class='id identifier rubyid_active_broker_memo'>active_broker_memo</span><span class='lbracket'>[</span><span class='id identifier rubyid_account'>account</span><span class='period'>.</span><span class='id identifier rubyid_broker_agency_profile_id'>broker_agency_profile_id</span><span class='rbracket'>]</span> <span class='kw'>then</span> <span class='kw'>return</span> <span class='id identifier rubyid_memo'>memo</span> <span class='kw'>end</span>
  <span class='id identifier rubyid_active_broker_memo'>active_broker_memo</span><span class='lbracket'>[</span><span class='id identifier rubyid_account'>account</span><span class='period'>.</span><span class='id identifier rubyid_broker_agency_profile'>broker_agency_profile</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_active_broker'>active_broker</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="non_owner_participation_criteria_met?-instance_method">
  
    #<strong>non_owner_participation_criteria_met?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


422
423
424</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 422</span>

<span class='kw'>def</span> <span class='id identifier rubyid_non_owner_participation_criteria_met?'>non_owner_participation_criteria_met?</span>
  <span class='id identifier rubyid_show_plan_year'>show_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_assigned_census_employees_without_owner'>assigned_census_employees_without_owner</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_binder_paid-instance_method">
  
    #<strong>notify_binder_paid</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1023
1024
1025</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1023</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_binder_paid'>notify_binder_paid</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#BINDER_PREMIUM_PAID_EVENT_NAME-constant" title="EmployerProfile::BINDER_PREMIUM_PAID_EVENT_NAME (constant)">BINDER_PREMIUM_PAID_EVENT_NAME</a></span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:employer_id</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_broker_added-instance_method">
  
    #<strong>notify_broker_added</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1045
1046
1047
1048
1049
1050</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1045</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_broker_added'>notify_broker_added</span>
  <span class='id identifier rubyid_changed_fields'>changed_fields</span> <span class='op'>=</span> <span class='id identifier rubyid_broker_agency_accounts'>broker_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:changed_attributes</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:keys</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_changed_fields'>changed_fields</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span>  <span class='id identifier rubyid_changed_fields'>changed_fields</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>start_on</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.broker_added</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>employer_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='comma'>,</span> <span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>broker_added</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_broker_terminated-instance_method">
  
    #<strong>notify_broker_terminated</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1052
1053
1054</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1052</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_broker_terminated'>notify_broker_terminated</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.broker_terminated</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>employer_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='comma'>,</span> <span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>broker_terminated</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_general_agent_added-instance_method">
  
    #<strong>notify_general_agent_added</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1056
1057
1058
1059
1060
1061</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1056</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_general_agent_added'>notify_general_agent_added</span>
  <span class='id identifier rubyid_changed_fields'>changed_fields</span> <span class='op'>=</span> <span class='id identifier rubyid_general_agency_accounts'>general_agency_accounts</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:changed_attributes</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:keys</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_changed_fields'>changed_fields</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_changed_fields'>changed_fields</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>start_on</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.general_agent_added</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>employer_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='comma'>,</span> <span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>general_agent_added</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_general_agent_terminated-instance_method">
  
    #<strong>notify_general_agent_terminated</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


261
262
263</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 261</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_general_agent_terminated'>notify_general_agent_terminated</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.general_agent_terminated</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>employer_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='comma'>,</span> <span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>general_agent_terminated</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_initial_binder_paid-instance_method">
  
    #<strong>notify_initial_binder_paid</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1027
1028
1029</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1027</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_initial_binder_paid'>notify_initial_binder_paid</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.employer.benefit_coverage_initial_binder_paid</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>employer_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='comma'>,</span> <span class='label'>event_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>benefit_coverage_initial_binder_paid</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="owners-instance_method">
  
    #<strong>owners</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>business owners</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 121</span>

<span class='kw'>def</span> <span class='id identifier rubyid_owners'>owners</span> <span class='comment'>#business owners
</span>  <span class='id identifier rubyid_staff_roles'>staff_roles</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:employee_roles</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:any?</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_ee'>ee</span><span class='op'>|</span> <span class='id identifier rubyid_ee'>ee</span><span class='period'>.</span><span class='id identifier rubyid_census_employee'>census_employee</span><span class='period'>.</span><span class='id identifier rubyid_is_business_owner?'>is_business_owner?</span> <span class='rbrace'>}</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parent-instance_method">
  
    #<strong>parent</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parent'>parent</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>undefined parent Organization</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_organization?'>organization?</span>
  <span class='id identifier rubyid_organization'>organization</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="participation_count-instance_method">
  
    #<strong>participation_count</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


418
419
420</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 418</span>

<span class='kw'>def</span> <span class='id identifier rubyid_participation_count'>participation_count</span>
  <span class='id identifier rubyid_show_plan_year'>show_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_additional_required_participants_count'>additional_required_participants_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="plan_year_drafts-instance_method">
  
    #<strong>plan_year_drafts</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 310</span>

<span class='kw'>def</span> <span class='id identifier rubyid_plan_year_drafts'>plan_year_drafts</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_py'>py</span><span class='op'>|</span> <span class='id identifier rubyid_set'>set</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_py'>py</span> <span class='kw'>if</span> <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>draft</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_set'>set</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="plan_years_with_drafts_statuses-instance_method">
  
    #<strong>plan_years_with_drafts_statuses</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


314
315
316</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 314</span>

<span class='kw'>def</span> <span class='id identifier rubyid_plan_years_with_drafts_statuses'>plan_years_with_drafts_statuses</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_draft'>draft</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="previous_states-instance_method">
  
    #<strong>previous_states</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


965
966
967</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 965</span>

<span class='kw'>def</span> <span class='id identifier rubyid_previous_states'>previous_states</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_workflow_state_transitions'>workflow_state_transitions</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:from_state</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="published_plan_year-instance_method">
  
    #<strong>published_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


287
288
289</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 287</span>

<span class='kw'>def</span> <span class='id identifier rubyid_published_plan_year'>published_plan_year</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_published'>published</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rating_area-instance_method">
  
    #<strong>rating_area</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1107
1108
1109
1110
1111
1112
1113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rating_area'>rating_area</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_use_simple_employer_calculation_model?'>use_simple_employer_calculation_model?</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_primary_office_location'>primary_office_location</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_primary_office_location'>primary_office_location</span>
  <span class='const'><span class='object_link'><a href="RatingArea.html" title="RatingArea (class)">RatingArea</a></span></span><span class='period'>.</span><span class='id identifier rubyid_rating_area_for'><span class='object_link'><a href="RatingArea.html#rating_area_for-class_method" title="RatingArea.rating_area_for (method)">rating_area_for</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_office_location'>primary_office_location</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="renewing_plan_year-instance_method">
  
    #<strong>renewing_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


400
401
402</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 400</span>

<span class='kw'>def</span> <span class='id identifier rubyid_renewing_plan_year'>renewing_plan_year</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_renewing'>renewing</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="renewing_plan_year_drafts-instance_method">
  
    #<strong>renewing_plan_year_drafts</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


426
427
428</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 426</span>

<span class='kw'>def</span> <span class='id identifier rubyid_renewing_plan_year_drafts'>renewing_plan_year_drafts</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_py'>py</span><span class='op'>|</span> <span class='id identifier rubyid_set'>set</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_py'>py</span> <span class='kw'>if</span> <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_aasm_state'>aasm_state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renewing_draft</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_set'>set</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="renewing_published_plan_year-instance_method">
  
    #<strong>renewing_published_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


396
397
398</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 396</span>

<span class='kw'>def</span> <span class='id identifier rubyid_renewing_published_plan_year'>renewing_published_plan_year</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_renewing_published_state'>renewing_published_state</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="revert_plan_year-instance_method">
  
    #<strong>revert_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


857
858
859</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 857</span>

<span class='kw'>def</span> <span class='id identifier rubyid_revert_plan_year'>revert_plan_year</span>
  <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_revert'>revert</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="roster_size-instance_method">
  
    #<strong>roster_size</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>TODO - turn this in to counter_cache – see: <a
href="https://gist.github.com/andreychernih/1082313">gist.github.com/andreychernih/1082313</a></p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


266
267
268
269</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 266</span>

<span class='kw'>def</span> <span class='id identifier rubyid_roster_size'>roster_size</span>
  <span class='kw'>return</span> <span class='ivar'>@roster_size</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@roster_size</span>
  <span class='ivar'>@roster_size</span> <span class='op'>=</span> <span class='id identifier rubyid_census_employees'>census_employees</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="service_area_ids-instance_method">
  
    #<strong>service_area_ids</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1131
1132
1133
1134
1135
1136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1131</span>

<span class='kw'>def</span> <span class='id identifier rubyid_service_area_ids'>service_area_ids</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_use_simple_employer_calculation_model?'>use_simple_employer_calculation_model?</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_service_areas'>service_areas</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_service_area'>service_area</span><span class='op'>|</span> <span class='id identifier rubyid_service_area'>service_area</span><span class='period'>.</span><span class='id identifier rubyid_service_area_id'>service_area_id</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="service_areas-instance_method">
  
    #<strong>service_areas</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1115
1116
1117
1118
1119
1120
1121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1115</span>

<span class='kw'>def</span> <span class='id identifier rubyid_service_areas'>service_areas</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_use_simple_employer_calculation_model?'>use_simple_employer_calculation_model?</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_primary_office_location'>primary_office_location</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_primary_office_location'>primary_office_location</span>
  <span class='const'><span class='object_link'><a href="CarrierServiceArea.html" title="CarrierServiceArea (class)">CarrierServiceArea</a></span></span><span class='period'>.</span><span class='id identifier rubyid_service_areas_for'><span class='object_link'><a href="CarrierServiceArea.html#service_areas_for-class_method" title="CarrierServiceArea.service_areas_for (method)">service_areas_for</a></span></span><span class='lparen'>(</span><span class='label'>office_location:</span> <span class='id identifier rubyid_primary_office_location'>primary_office_location</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="service_areas_available_on-instance_method">
  
    #<strong>service_areas_available_on</strong>(date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1123
1124
1125
1126
1127
1128
1129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_service_areas_available_on'>service_areas_available_on</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_use_simple_employer_calculation_model?'>use_simple_employer_calculation_model?</span>
    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_primary_office_location'>primary_office_location</span> <span class='op'>=</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_primary_office_location'>primary_office_location</span>
  <span class='const'><span class='object_link'><a href="CarrierServiceArea.html" title="CarrierServiceArea (class)">CarrierServiceArea</a></span></span><span class='period'>.</span><span class='id identifier rubyid_service_areas_available_on'><span class='object_link'><a href="CarrierServiceArea.html#service_areas_available_on-class_method" title="CarrierServiceArea.service_areas_available_on (method)">service_areas_available_on</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_office_location'>primary_office_location</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="show_plan_year-instance_method">
  
    #<strong>show_plan_year</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_show_plan_year'>show_plan_year</span>
  <span class='id identifier rubyid_renewing_published_plan_year'>renewing_published_plan_year</span> <span class='op'>||</span> <span class='id identifier rubyid_active_plan_year'>active_plan_year</span> <span class='op'>||</span> <span class='id identifier rubyid_published_plan_year'>published_plan_year</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="staff_roles-instance_method">
  
    #<strong>staff_roles</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>managing profile staff</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_staff_roles'>staff_roles</span> <span class='comment'>#managing profile staff
</span>  <span class='const'><span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_staff_for_employer'><span class='object_link'><a href="Person.html#staff_for_employer-class_method" title="Person.staff_for_employer (method)">staff_for_employer</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="terminate-instance_method">
  
    #<strong>terminate</strong>(termination_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1179
1180
1181
1182
1183
1184
1185
1186
1187
1188
1189
1190
1191
1192
1193
1194
1195
1196
1197
1198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1179</span>

<span class='kw'>def</span> <span class='id identifier rubyid_terminate'>terminate</span><span class='lparen'>(</span><span class='id identifier rubyid_termination_date'>termination_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_plan_year'>plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_published_plan_year'>published_plan_year</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_termination_date'>termination_date</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span>
      <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_schedule_termination!'>schedule_termination!</span><span class='lparen'>(</span><span class='id identifier rubyid_termination_date'>termination_date</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_may_schedule_termination?'>may_schedule_termination?</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_termination_date'>termination_date</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span>
        <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_terminate!'>terminate!</span> <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_may_terminate?'>may_terminate?</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_cancel!'>cancel!</span> <span class='kw'>if</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_may_cancel?'>may_cancel?</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_renewal_plan_year'>renewal_plan_year</span> <span class='op'>=</span> <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:start_on</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_plan_year'>plan_year</span><span class='period'>.</span><span class='id identifier rubyid_start_on'>start_on</span><span class='period'>.</span><span class='id identifier rubyid_next_year'>next_year</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_renewal_plan_year'>renewal_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='id identifier rubyid_renewal_plan_year'>renewal_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_cancel!'>cancel!</span> <span class='kw'>if</span> <span class='id identifier rubyid_renewal_plan_year'>renewal_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_may_cancel?'>may_cancel?</span>
      <span class='id identifier rubyid_renewal_plan_year'>renewal_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_cancel_renewal!'>cancel_renewal!</span> <span class='kw'>if</span> <span class='id identifier rubyid_renewal_plan_year'>renewal_plan_year</span><span class='period'>.</span><span class='id identifier rubyid_may_cancel_renewal?'>may_cancel_renewal?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="today-instance_method">
  
    #<strong>today</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 138</span>

<span class='kw'>def</span> <span class='id identifier rubyid_today'>today</span>
  <span class='kw'>return</span> <span class='ivar'>@today</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='ivar'>@today</span>
  <span class='ivar'>@today</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeKeeper.html" title="TimeKeeper (class)">TimeKeeper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_date_of_record'><span class='object_link'><a href="TimeKeeper.html#date_of_record-class_method" title="TimeKeeper.date_of_record (method)">date_of_record</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="today=-instance_method">
  
    #<strong>today=</strong>(new_date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_today='>today=</span><span class='lparen'>(</span><span class='id identifier rubyid_new_date'>new_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected Date</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_new_date'>new_date</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Date</span><span class='rparen'>)</span>
  <span class='ivar'>@today</span> <span class='op'>=</span> <span class='id identifier rubyid_new_date'>new_date</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transmit_initial_eligible_event-instance_method">
  
    #<strong>transmit_initial_eligible_event</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1037
1038
1039</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1037</span>

<span class='kw'>def</span> <span class='id identifier rubyid_transmit_initial_eligible_event'>transmit_initial_eligible_event</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#INITIAL_EMPLOYER_TRANSMIT_EVENT-constant" title="EmployerProfile::INITIAL_EMPLOYER_TRANSMIT_EVENT (constant)">INITIAL_EMPLOYER_TRANSMIT_EVENT</a></span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>employer_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='comma'>,</span> <span class='label'>event_name:</span> <span class='const'><span class='object_link'><a href="#INITIAL_APPLICATION_ELIGIBLE_EVENT_TAG-constant" title="EmployerProfile::INITIAL_APPLICATION_ELIGIBLE_EVENT_TAG (constant)">INITIAL_APPLICATION_ELIGIBLE_EVENT_TAG</a></span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transmit_new_employer_if_immediate-instance_method">
  
    #<strong>transmit_new_employer_if_immediate</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1031
1032
1033
1034
1035</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1031</span>

<span class='kw'>def</span> <span class='id identifier rubyid_transmit_new_employer_if_immediate'>transmit_new_employer_if_immediate</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_transmit_employers_immediately?'>transmit_employers_immediately?</span>
    <span class='id identifier rubyid_transmit_initial_eligible_event'>transmit_initial_eligible_event</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transmit_renewal_carrier_drop_event-instance_method">
  
    #<strong>transmit_renewal_carrier_drop_event</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1071
1072
1073</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1071</span>

<span class='kw'>def</span> <span class='id identifier rubyid_transmit_renewal_carrier_drop_event'>transmit_renewal_carrier_drop_event</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#RENEWAL_EMPLOYER_CARRIER_DROP_EVENT-constant" title="EmployerProfile::RENEWAL_EMPLOYER_CARRIER_DROP_EVENT (constant)">RENEWAL_EMPLOYER_CARRIER_DROP_EVENT</a></span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>employer_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='comma'>,</span> <span class='label'>event_name:</span> <span class='const'><span class='object_link'><a href="#RENEWAL_APPLICATION_CARRIER_DROP_EVENT_TAG-constant" title="EmployerProfile::RENEWAL_APPLICATION_CARRIER_DROP_EVENT_TAG (constant)">RENEWAL_APPLICATION_CARRIER_DROP_EVENT_TAG</a></span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transmit_renewal_eligible_event-instance_method">
  
    #<strong>transmit_renewal_eligible_event</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1041
1042
1043</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1041</span>

<span class='kw'>def</span> <span class='id identifier rubyid_transmit_renewal_eligible_event'>transmit_renewal_eligible_event</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#RENEWAL_EMPLOYER_TRANSMIT_EVENT-constant" title="EmployerProfile::RENEWAL_EMPLOYER_TRANSMIT_EVENT (constant)">RENEWAL_EMPLOYER_TRANSMIT_EVENT</a></span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>employer_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='comma'>,</span> <span class='label'>event_name:</span> <span class='const'><span class='object_link'><a href="#RENEWAL_APPLICATION_ELIGIBLE_EVENT_TAG-constant" title="EmployerProfile::RENEWAL_APPLICATION_ELIGIBLE_EVENT_TAG (constant)">RENEWAL_APPLICATION_ELIGIBLE_EVENT_TAG</a></span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trigger_notices-instance_method">
  
    #<strong>trigger_notices</strong>(event)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1099
1100
1101
1102
1103
1104
1105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1099</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trigger_notices'>trigger_notices</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='const'><span class='object_link'><a href="ShopNoticesNotifierJob.html" title="ShopNoticesNotifierJob (class)">ShopNoticesNotifierJob</a></span></span><span class='period'>.</span><span class='id identifier rubyid_perform_later'>perform_later</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to deliver </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_humanize'>humanize</span><span class='embexpr_end'>}</span><span class='tstring_content'> notice </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> due to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trigger_shop_notices-instance_method">
  
    #<strong>trigger_shop_notices</strong>(event)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1200
1201
1202
1203
1204
1205
1206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1200</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trigger_shop_notices'>trigger_shop_notices</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_trigger_model_event'>trigger_model_event</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to deliver </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='embexpr_end'>}</span><span class='tstring_content'> notice </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> due to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_document-instance_method">
  
    #<strong>upload_document</strong>(file_path, file_name, subject, size)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1138
1139
1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152
1153
1154
1155
1156
1157
1158
1159
1160
1161
1162
1163
1164
1165
1166
1167
1168
1169
1170
1171
1172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 1138</span>

<span class='kw'>def</span> <span class='id identifier rubyid_upload_document'>upload_document</span><span class='lparen'>(</span><span class='id identifier rubyid_file_path'>file_path</span><span class='comma'>,</span><span class='id identifier rubyid_file_name'>file_name</span><span class='comma'>,</span><span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
  <span class='comment'>#doc_uri = Aws::S3Storage.save(file_path,&#39;id-verification&#39;)
</span>  <span class='comment'>#file = File.open(file_path, &quot;r:ISO-8859-1&quot;)
</span>
  <span class='id identifier rubyid_tmp_file'>tmp_file</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='embexpr_end'>}</span><span class='tstring_content'>/tmp/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_name'>file_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>while</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_tmp_file'>tmp_file</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tmp_file'>tmp_file</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='embexpr_end'>}</span><span class='tstring_content'>/tmp/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_name'>file_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_id'>id</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='comment'># Save to temp file
</span>  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_tmp_file'>tmp_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_file_path'>file_path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span><span class='lparen'>(</span><span class='id identifier rubyid_file_path'>file_path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_document'>document</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_documents'>documents</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_identifier'>identifier</span> <span class='op'>=</span> <span class='id identifier rubyid_tmp_file'>tmp_file</span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/pdf</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>=</span> <span class='id identifier rubyid_subject'>subject</span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span> <span class='op'>=</span><span class='id identifier rubyid_file_name'>file_name</span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_creator'>creator</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_legal_name'>legal_name</span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_publisher'>publisher</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EmployeeProfile</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pdf</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_language'>language</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>English</span><span class='tstring_end'>&#39;</span></span>
    <span class='comment'>#document.size =  size
</span>    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span>
    <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>

    <span class='comment'>#self.documents &lt;&lt; document
</span>    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>associated file </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_path'>file_path</span><span class='embexpr_end'>}</span><span class='tstring_content'> with the Employer Profile</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='id identifier rubyid_document'>document</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="within_open_enrollment_for?-instance_method">
  
    #<strong>within_open_enrollment_for?</strong>(t_date, effective_date)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


969
970
971
972
973
974</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/employer_profile.rb', line 969</span>

<span class='kw'>def</span> <span class='id identifier rubyid_within_open_enrollment_for?'>within_open_enrollment_for?</span><span class='lparen'>(</span><span class='id identifier rubyid_t_date'>t_date</span><span class='comma'>,</span> <span class='id identifier rubyid_effective_date'>effective_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_plan_years'>plan_years</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_py'>py</span><span class='op'>|</span>
    <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_open_enrollment_contains?'>open_enrollment_contains?</span><span class='lparen'>(</span><span class='id identifier rubyid_t_date'>t_date</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
      <span class='id identifier rubyid_py'>py</span><span class='period'>.</span><span class='id identifier rubyid_coverage_period_contains?'>coverage_period_contains?</span><span class='lparen'>(</span><span class='id identifier rubyid_effective_date'>effective_date</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Oct 11 09:50:00 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.2.3).
</div>

    </div>
  </body>
</html>