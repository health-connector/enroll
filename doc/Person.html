<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Person
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Person";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo;
    
    
    <span class="title">Person</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Person
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Person</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd><span class='object_link'><a href="Mongorder.html" title="Mongorder (module)">Mongorder</a></span></dd>
  </dl>
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>BenefitSponsors::Concerns::Observable, <span class='object_link'><a href="Config/AcaModelConcern.html" title="Config::AcaModelConcern (module)">Config::AcaModelConcern</a></span>, <span class='object_link'><a href="Config/SiteModelConcern.html" title="Config::SiteModelConcern (module)">Config::SiteModelConcern</a></span>, <span class='object_link'><a href="FullStrippedNames.html" title="FullStrippedNames (module)">FullStrippedNames</a></span>, Mongoid::Attributes::Dynamic, Mongoid::Document, Mongoid::History::Trackable, Mongoid::Timestamps, Mongoid::Versioning, <span class='object_link'><a href="Notify.html" title="Notify (module)">Notify</a></span>, <span class='object_link'><a href="SetCurrentUser.html" title="SetCurrentUser (module)">SetCurrentUser</a></span>, SponsoredBenefits::Concerns::Dob, SponsoredBenefits::Concerns::Ssn, <span class='object_link'><a href="UnsetableSparseFields.html" title="UnsetableSparseFields (module)">UnsetableSparseFields</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/person.rb</dd>
  </dl>
  
</div>


  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="GENDER_KINDS-constant" class="">GENDER_KINDS =
        <div class="docstring">
  <div class="discussion">
    
<p>validates_with Validations::DateRangeValidator</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='words_beg'>%W(</span><span class='tstring_content'>male</span><span class='words_sep'> </span><span class='tstring_content'>female</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="IDENTIFYING_INFO_ATTRIBUTES-constant" class="">IDENTIFYING_INFO_ATTRIBUTES =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>first_name</span><span class='words_sep'> </span><span class='tstring_content'>last_name</span><span class='words_sep'> </span><span class='tstring_content'>ssn</span><span class='words_sep'> </span><span class='tstring_content'>dob</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="ADDRESS_CHANGE_ATTRIBUTES-constant" class="">ADDRESS_CHANGE_ATTRIBUTES =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>addresses</span><span class='words_sep'> </span><span class='tstring_content'>phones</span><span class='words_sep'> </span><span class='tstring_content'>emails</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="RELATIONSHIP_CHANGE_ATTRIBUTES-constant" class="">RELATIONSHIP_CHANGE_ATTRIBUTES =
        
      </dt>
      <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>person_relationships</span><span class='words_sep'>)</span></pre></dd>
    
      <dt id="PERSON_CREATED_EVENT_NAME-constant" class="">PERSON_CREATED_EVENT_NAME =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.individual.created</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="PERSON_UPDATED_EVENT_NAME-constant" class="">PERSON_UPDATED_EVENT_NAME =
        
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acapi.info.events.individual.updated</span><span class='tstring_end'>&quot;</span></span></pre></dd>
    
      <dt id="VERIFICATION_TYPES-constant" class="">VERIFICATION_TYPES =
        
      </dt>
      <dd><pre class="code"><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Social Security Number</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>American Indian Status</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Citizenship</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Immigration status</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span></pre></dd>
    
  </dl>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#eligible_immigration_status-instance_method" title="#eligible_immigration_status (instance method)">#<strong>eligible_immigration_status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#indian_tribe_member-instance_method" title="#indian_tribe_member (instance method)">#<strong>indian_tribe_member</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_consumer_role-instance_method" title="#is_consumer_role (instance method)">#<strong>is_consumer_role</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute is_consumer_role.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_resident_role-instance_method" title="#is_resident_role (instance method)">#<strong>is_resident_role</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute is_resident_role.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#naturalized_citizen-instance_method" title="#naturalized_citizen (instance method)">#<strong>naturalized_citizen</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#us_citizen-instance_method" title="#us_citizen (instance method)">#<strong>us_citizen</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_employer_staff_role-class_method" title="add_employer_staff_role (class method)">.<strong>add_employer_staff_role</strong>(first_name, last_name, dob, email, employer_profile)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds employer staff role to person Returns status and message if failed
Returns status and person if successful.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#additional_exprs-class_method" title="additional_exprs (class method)">.<strong>additional_exprs</strong>(clean_str)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#brokers_or_agency_staff_with_status-class_method" title="brokers_or_agency_staff_with_status (class method)">.<strong>brokers_or_agency_staff_with_status</strong>(query, status)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deactivate_employer_staff_role-class_method" title="deactivate_employer_staff_role (class method)">.<strong>deactivate_employer_staff_role</strong>(person_id, employer_profile_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets employer staff role to inactive Returns false if person not found
Returns false if employer staff role not matches Returns true is role was
marked inactive.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_search_order-class_method" title="default_search_order (class method)">.<strong>default_search_order</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dob_change_implication_on_active_enrollments-class_method" title="dob_change_implication_on_active_enrollments (class method)">.<strong>dob_change_implication_on_active_enrollments</strong>(person, new_dob)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#employee_roles-class_method" title="employee_roles (class method)">.<strong>employee_roles</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Find all employee_roles.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_all_brokers_or_staff_members_by_agency-class_method" title="find_all_brokers_or_staff_members_by_agency (class method)">.<strong>find_all_brokers_or_staff_members_by_agency</strong>(broker_agency)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_all_staff_roles_by_employer_profile-class_method" title="find_all_staff_roles_by_employer_profile (class method)">.<strong>find_all_staff_roles_by_employer_profile</strong>(employer_profile)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#match_by_id_info-class_method" title="match_by_id_info (class method)">.<strong>match_by_id_info</strong>(options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return an instance list of active People who match identifying information
criteria.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#match_existing_person-class_method" title="match_existing_person (class method)">.<strong>match_existing_person</strong>(personish)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#person_has_an_active_enrollment%3F-class_method" title="person_has_an_active_enrollment? (class method)">.<strong>person_has_an_active_enrollment?</strong>(person)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sans_primary_broker-class_method" title="sans_primary_broker (class method)">.<strong>sans_primary_broker</strong>(broker_agency)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search_first_name_last_name_npn-class_method" title="search_first_name_last_name_npn (class method)">.<strong>search_first_name_last_name_npn</strong>(s_str, query = self)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search_hash-class_method" title="search_hash (class method)">.<strong>search_hash</strong>(s_str)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#staff_for_employer-class_method" title="staff_for_employer (class method)">.<strong>staff_for_employer</strong>(employer_profile)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#staff_for_employer_including_pending-class_method" title="staff_for_employer_including_pending (class method)">.<strong>staff_for_employer_including_pending</strong>(employer_profile)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_employee_roles-instance_method" title="#active_employee_roles (instance method)">#<strong>active_employee_roles</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_employer_staff_roles-instance_method" title="#active_employer_staff_roles (instance method)">#<strong>active_employer_staff_roles</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_general_agency_staff_roles-instance_method" title="#active_general_agency_staff_roles (instance method)">#<strong>active_general_agency_staff_roles</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_employee_home_address-instance_method" title="#add_employee_home_address (instance method)">#<strong>add_employee_home_address</strong>(existing_addresses)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_work_email-instance_method" title="#add_work_email (instance method)">#<strong>add_work_email</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#agent%3F-instance_method" title="#agent? (instance method)">#<strong>agent?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign_citizen_status-instance_method" title="#assign_citizen_status (instance method)">#<strong>assign_citizen_status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign_citizen_status_from_consumer_role-instance_method" title="#assign_citizen_status_from_consumer_role (instance method)">#<strong>assign_citizen_status_from_consumer_role</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_report_shop_qle%3F-instance_method" title="#can_report_shop_qle? (instance method)">#<strong>can_report_shop_qle?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_households-instance_method" title="#check_households (instance method)">#<strong>check_households</strong>(family)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_tax_households-instance_method" title="#check_tax_households (instance method)">#<strong>check_tax_households</strong>(family)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#completed_identity_verification%3F-instance_method" title="#completed_identity_verification? (instance method)">#<strong>completed_identity_verification?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#contact_addresses-instance_method" title="#contact_addresses (instance method)">#<strong>contact_addresses</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#contact_info-instance_method" title="#contact_info (instance method)">#<strong>contact_info</strong>(email_address, area_code, number, extension)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#contact_phones-instance_method" title="#contact_phones (instance method)">#<strong>contact_phones</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#date_of_birth=-instance_method" title="#date_of_birth= (instance method)">#<strong>date_of_birth=</strong>(val)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ensure_relationship_with-instance_method" title="#ensure_relationship_with (instance method)">#<strong>ensure_relationship_with</strong>(person, relationship)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#families-instance_method" title="#families (instance method)">#<strong>families</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_relationship_with-instance_method" title="#find_relationship_with (instance method)">#<strong>find_relationship_with</strong>(other_person)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first_name_last_name_and_suffix-instance_method" title="#first_name_last_name_and_suffix (instance method)">#<strong>first_name_last_name_and_suffix</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_name-instance_method" title="#full_name (instance method)">#<strong>full_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gender=-instance_method" title="#gender= (instance method)">#<strong>gender=</strong>(new_gender)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_family_search-instance_method" title="#generate_family_search (instance method)">#<strong>generate_family_search</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_hbx_id-instance_method" title="#generate_hbx_id (instance method)">#<strong>generate_hbx_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_active_consumer_role%3F-instance_method" title="#has_active_consumer_role? (instance method)">#<strong>has_active_consumer_role?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_active_employee_role%3F-instance_method" title="#has_active_employee_role? (instance method)">#<strong>has_active_employee_role?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_active_employee_role_for_census_employee%3F-instance_method" title="#has_active_employee_role_for_census_employee? (instance method)">#<strong>has_active_employee_role_for_census_employee?</strong>(census_employee)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_active_employer_staff_role%3F-instance_method" title="#has_active_employer_staff_role? (instance method)">#<strong>has_active_employer_staff_role?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_active_resident_role%3F-instance_method" title="#has_active_resident_role? (instance method)">#<strong>has_active_resident_role?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_employer_benefits%3F-instance_method" title="#has_employer_benefits? (instance method)">#<strong>has_employer_benefits?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_mailing_address%3F-instance_method" title="#has_mailing_address? (instance method)">#<strong>has_mailing_address?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_multiple_active_employers%3F-instance_method" title="#has_multiple_active_employers? (instance method)">#<strong>has_multiple_active_employers?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_multiple_roles%3F-instance_method" title="#has_multiple_roles? (instance method)">#<strong>has_multiple_roles?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#home_address-instance_method" title="#home_address (instance method)">#<strong>home_address</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#home_email-instance_method" title="#home_email (instance method)">#<strong>home_email</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#home_phone-instance_method" title="#home_phone (instance method)">#<strong>home_phone</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_active%3F-instance_method" title="#is_active? (instance method)">#<strong>is_active?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_aqhp%3F-instance_method" title="#is_aqhp? (instance method)">#<strong>is_aqhp?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_dc_resident%3F-instance_method" title="#is_dc_resident? (instance method)">#<strong>is_dc_resident?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mailing_address-instance_method" title="#mailing_address (instance method)">#<strong>mailing_address</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#main_phone-instance_method" title="#main_phone (instance method)">#<strong>main_phone</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mobile_phone-instance_method" title="#mobile_phone (instance method)">#<strong>mobile_phone</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify_created-instance_method" title="#notify_created (instance method)">#<strong>notify_created</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify_updated-instance_method" title="#notify_updated (instance method)">#<strong>notify_updated</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#person_relationship_for-instance_method" title="#person_relationship_for (instance method)">#<strong>person_relationship_for</strong>(other_person)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#primary_family-instance_method" title="#primary_family (instance method)">#<strong>primary_family</strong>  &#x21d2; Family </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the <span class='object_link'><a href="Family.html" title="Family (class)">Family</a></span> where this <span class='object_link'><a href="" title="Person (class)">Person</a></span> is the primary family member.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#relatives-instance_method" title="#relatives (instance method)">#<strong>relatives</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#residency_eligible%3F-instance_method" title="#residency_eligible? (instance method)">#<strong>residency_eligible?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_ridp_for_paper_application-instance_method" title="#set_ridp_for_paper_application (instance method)">#<strong>set_ridp_for_paper_application</strong>(session_var)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#strip_empty_fields-instance_method" title="#strip_empty_fields (instance method)">#<strong>strip_empty_fields</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_family_search_collection-instance_method" title="#update_family_search_collection (instance method)">#<strong>update_family_search_collection</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>before_save :notify_change def notify_change   notify_change_event(self,
“address_change”=&gt;ADDRESS_CHANGE_ATTRIBUTES,
“relation_change”=&gt;RELATIONSHIP_CHANGE_ATTRIBUTES) end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verification_types-instance_method" title="#verification_types (instance method)">#<strong>verification_types</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>collect all verification types user can have based on information he
provided.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#work_email-instance_method" title="#work_email (instance method)">#<strong>work_email</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#work_email_or_best-instance_method" title="#work_email_or_best (instance method)">#<strong>work_email_or_best</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#work_phone-instance_method" title="#work_phone (instance method)">#<strong>work_phone</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#work_phone_or_best-instance_method" title="#work_phone_or_best (instance method)">#<strong>work_phone_or_best</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Mongorder.html" title="Mongorder (module)">Mongorder</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Mongorder.html#build_search_order_expression-instance_method" title="Mongorder#build_search_order_expression (method)">build_search_order_expression</a></span>, <span class='object_link'><a href="Mongorder.html#search-instance_method" title="Mongorder#search (method)">search</a></span></p>

  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="FullStrippedNames.html" title="FullStrippedNames (module)">FullStrippedNames</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="FullStrippedNames.html#name_pfx=-instance_method" title="FullStrippedNames#name_pfx= (method)">#name_pfx=</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="StrippedNames.html" title="StrippedNames (module)">StrippedNames</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="StrippedNames.html#first_name=-instance_method" title="StrippedNames#first_name= (method)">#first_name=</a></span>, <span class='object_link'><a href="StrippedNames.html#last_name=-instance_method" title="StrippedNames#last_name= (method)">#last_name=</a></span>, <span class='object_link'><a href="StrippedNames.html#middle_name=-instance_method" title="StrippedNames#middle_name= (method)">#middle_name=</a></span>, <span class='object_link'><a href="StrippedNames.html#name_sfx=-instance_method" title="StrippedNames#name_sfx= (method)">#name_sfx=</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="UnsetableSparseFields.html" title="UnsetableSparseFields (module)">UnsetableSparseFields</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="UnsetableSparseFields.html#unset_sparse-instance_method" title="UnsetableSparseFields#unset_sparse (method)">#unset_sparse</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Notify.html" title="Notify (module)">Notify</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Notify.html#notify_change_event-instance_method" title="Notify#notify_change_event (method)">#notify_change_event</a></span>, <span class='object_link'><a href="Notify.html#payload-instance_method" title="Notify#payload (method)">#payload</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SetCurrentUser.html" title="SetCurrentUser (module)">SetCurrentUser</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SetCurrentUser.html#included-class_method" title="SetCurrentUser.included (method)">included</a></span>, <span class='object_link'><a href="SetCurrentUser.html#save_user-instance_method" title="SetCurrentUser#save_user (method)">#save_user</a></span>, <span class='object_link'><a href="SetCurrentUser.html#update_user-instance_method" title="SetCurrentUser#update_user (method)">#update_user</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="eligible_immigration_status=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="eligible_immigration_status-instance_method">
  
    #<strong>eligible_immigration_status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


790
791
792
793
794
795
796</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 790</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eligible_immigration_status'>eligible_immigration_status</span>
  <span class='kw'>return</span> <span class='ivar'>@eligible_immigration_status</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@eligible_immigration_status</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_us_citizen'>us_citizen</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='ivar'>@us_citizen</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_citizen_status'>citizen_status</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='ivar'>@eligible_immigration_status</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html" title="ConsumerRole (class)">ConsumerRole</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html#ALIEN_LAWFULLY_PRESENT_STATUS-constant" title="ConsumerRole::ALIEN_LAWFULLY_PRESENT_STATUS (constant)">ALIEN_LAWFULLY_PRESENT_STATUS</a></span></span> <span class='op'>==</span> <span class='id identifier rubyid_citizen_status'>citizen_status</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="indian_tribe_member=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="indian_tribe_member-instance_method">
  
    #<strong>indian_tribe_member</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


784
785
786
787
788</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 784</span>

<span class='kw'>def</span> <span class='id identifier rubyid_indian_tribe_member'>indian_tribe_member</span>
  <span class='kw'>return</span> <span class='ivar'>@indian_tribe_member</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@indian_tribe_member</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_citizen_status'>citizen_status</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='ivar'>@indian_tribe_member</span> <span class='op'>||=</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_tribal_id'>tribal_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_tribal_id'>tribal_id</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="is_consumer_role=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="is_consumer_role-instance_method">
  
    #<strong>is_consumer_role</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute is_consumer_role</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


743
744
745</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 743</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_consumer_role'>is_consumer_role</span>
  <span class='ivar'>@is_consumer_role</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="is_resident_role=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="is_resident_role-instance_method">
  
    #<strong>is_resident_role</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute is_resident_role</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


744
745
746</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 744</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_resident_role'>is_resident_role</span>
  <span class='ivar'>@is_resident_role</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="naturalized_citizen=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="naturalized_citizen-instance_method">
  
    #<strong>naturalized_citizen</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


778
779
780
781
782</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 778</span>

<span class='kw'>def</span> <span class='id identifier rubyid_naturalized_citizen'>naturalized_citizen</span>
  <span class='kw'>return</span> <span class='ivar'>@naturalized_citizen</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@naturalized_citizen</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_citizen_status'>citizen_status</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='ivar'>@naturalized_citizen</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html" title="ConsumerRole (class)">ConsumerRole</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html#NATURALIZED_CITIZEN_STATUS-constant" title="ConsumerRole::NATURALIZED_CITIZEN_STATUS (constant)">NATURALIZED_CITIZEN_STATUS</a></span></span> <span class='op'>==</span> <span class='id identifier rubyid_citizen_status'>citizen_status</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="us_citizen=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="us_citizen-instance_method">
  
    #<strong>us_citizen</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


772
773
774
775
776</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 772</span>

<span class='kw'>def</span> <span class='id identifier rubyid_us_citizen'>us_citizen</span>
  <span class='kw'>return</span> <span class='ivar'>@us_citizen</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@us_citizen</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_citizen_status'>citizen_status</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='ivar'>@us_citizen</span> <span class='op'>||=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html" title="ConsumerRole (class)">ConsumerRole</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html#US_CITIZEN_STATUS_KINDS-constant" title="ConsumerRole::US_CITIZEN_STATUS_KINDS (constant)">US_CITIZEN_STATUS_KINDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_citizen_status'>citizen_status</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_employer_staff_role-class_method">
  
    .<strong>add_employer_staff_role</strong>(first_name, last_name, dob, email, employer_profile)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds employer staff role to person Returns status and message if failed
Returns status and person if successful</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 700</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_employer_staff_role'>add_employer_staff_role</span><span class='lparen'>(</span><span class='id identifier rubyid_first_name'>first_name</span><span class='comma'>,</span> <span class='id identifier rubyid_last_name'>last_name</span><span class='comma'>,</span> <span class='id identifier rubyid_dob'>dob</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_person'>person</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>first_name:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_first_name'>first_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='label'>last_name:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_last_name'>last_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='label'>dob:</span> <span class='id identifier rubyid_dob'>dob</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Person count too high, please contact HBX Admin</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='int'>1</span>
  <span class='kw'>return</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Person does not exist on the HBX Exchange</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>0</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="EmployerProfile.html" title="EmployerProfile (class)">EmployerProfile</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_employer_staff_role'>employer_staff_role</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="EmployerStaffRole.html" title="EmployerStaffRole (class)">EmployerStaffRole</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='label'>person:</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span> <span class='label'>employer_profile_id:</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid__id'>_id</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_employer_staff_role'>employer_staff_role</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="EmployerStaffRole.html" title="EmployerStaffRole (class)">EmployerStaffRole</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='label'>person:</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span> <span class='label'>benefit_sponsor_employer_profile_id:</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid__id'>_id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_employer_staff_role'>employer_staff_role</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>

  <span class='kw'>return</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="additional_exprs-class_method">
  
    .<strong>additional_exprs</strong>(clean_str)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


549
550
551
552
553
554
555
556
557
558</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 549</span>

<span class='kw'>def</span> <span class='id identifier rubyid_additional_exprs'>additional_exprs</span><span class='lparen'>(</span><span class='id identifier rubyid_clean_str'>clean_str</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_additional_exprs'>additional_exprs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_clean_str'>clean_str</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_clean_str'>clean_str</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
    <span class='id identifier rubyid_first_re'>first_re</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_last_re'>last_re</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_additional_exprs'>additional_exprs</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_first_re'>first_re</span><span class='comma'>,</span> <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_last_re'>last_re</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_additional_exprs'>additional_exprs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="brokers_or_agency_staff_with_status-class_method">
  
    .<strong>brokers_or_agency_staff_with_status</strong>(query, status)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


654
655
656
657
658
659
660
661</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 654</span>

<span class='kw'>def</span> <span class='id identifier rubyid_brokers_or_agency_staff_with_status'>brokers_or_agency_staff_with_status</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_and'>and</span><span class='lparen'>(</span>
            <span class='const'><span class='object_link'><a href="" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_or'>or</span><span class='lparen'>(</span>
                      <span class='lbrace'>{</span> <span class='symbol'>:broker_agency_staff_roles.aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_status'>status</span> <span class='rbrace'>}</span><span class='comma'>,</span>
                      <span class='lbrace'>{</span> <span class='symbol'>:broker_role.aasm_state</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_status'>status</span> <span class='rbrace'>}</span>
                     <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_selector'>selector</span>
           <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deactivate_employer_staff_role-class_method">
  
    .<strong>deactivate_employer_staff_role</strong>(person_id, employer_profile_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets employer staff role to inactive Returns false if person not found
Returns false if employer staff role not matches Returns true is role was
marked inactive</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


721
722
723
724
725
726
727
728
729
730
731
732
733
734</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 721</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deactivate_employer_staff_role'>deactivate_employer_staff_role</span><span class='lparen'>(</span><span class='id identifier rubyid_person_id'>person_id</span><span class='comma'>,</span> <span class='id identifier rubyid_employer_profile_id'>employer_profile_id</span><span class='rparen'>)</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_person'>person</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_person_id'>person_id</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span>
    <span class='kw'>return</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Person not found</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_role'>role</span> <span class='op'>=</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_employer_staff_roles'>employer_staff_roles</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_role'>role</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_benefit_sponsor_employer_profile_id'>benefit_sponsor_employer_profile_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_employer_profile_id'>employer_profile_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>||</span> <span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_employer_profile_id'>employer_profile_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_employer_profile_id'>employer_profile_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_is_closed?'>is_closed?</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='symbol'>:aasm_state</span> <span class='op'>=&gt;</span> <span class='symbol'>:is_closed</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Employee Staff Role is inactive</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>No matching employer staff role</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_search_order-class_method">
  
    .<strong>default_search_order</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


532
533
534</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 532</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_search_order'>default_search_order</span>
  <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dob_change_implication_on_active_enrollments-class_method">
  
    .<strong>dob_change_implication_on_active_enrollments</strong>(person, new_dob)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 607</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dob_change_implication_on_active_enrollments'>dob_change_implication_on_active_enrollments</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='comma'>,</span> <span class='id identifier rubyid_new_dob'>new_dob</span><span class='rparen'>)</span>
  <span class='comment'># This method checks if there is a premium implication in all active enrollments when a persons DOB is changed.
</span>  <span class='comment'># Returns a hash with Key =&gt; HbxEnrollment ID and, Value =&gt; true if  enrollment has Premium Implication.
</span>  <span class='id identifier rubyid_premium_impication_for_enrollment'>premium_impication_for_enrollment</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_active_enrolled_hbxs'>active_enrolled_hbxs</span> <span class='op'>=</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_primary_family'>primary_family</span><span class='period'>.</span><span class='id identifier rubyid_active_household'>active_household</span><span class='period'>.</span><span class='id identifier rubyid_hbx_enrollments'>hbx_enrollments</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_enrolled_and_renewal'>enrolled_and_renewal</span>

  <span class='comment'># Iterate over each enrollment and check if there is a Premium Implication based on the following rule:
</span>  <span class='comment'># Rule: There are Implications when DOB changes makes anyone in the household a different age on the day coverage started UNLESS the
</span>  <span class='comment'>#       change is all within the 0-20 age range or all within the 61+ age range (20 &gt;= age &lt;= 61)
</span>  <span class='id identifier rubyid_active_enrolled_hbxs'>active_enrolled_hbxs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hbx'>hbx</span><span class='op'>|</span>
    <span class='id identifier rubyid_new_temp_person'>new_temp_person</span> <span class='op'>=</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='id identifier rubyid_new_temp_person'>new_temp_person</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_strptime'>strptime</span><span class='lparen'>(</span><span class='id identifier rubyid_new_dob'>new_dob</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%m/%d/%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_age'>new_age</span>     <span class='op'>=</span> <span class='id identifier rubyid_new_temp_person'>new_temp_person</span><span class='period'>.</span><span class='id identifier rubyid_age_on'>age_on</span><span class='lparen'>(</span><span class='id identifier rubyid_hbx'>hbx</span><span class='period'>.</span><span class='id identifier rubyid_effective_on'>effective_on</span><span class='rparen'>)</span>  <span class='comment'># age with the new DOB on the day coverage started
</span>    <span class='id identifier rubyid_current_age'>current_age</span> <span class='op'>=</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_age_on'>age_on</span><span class='lparen'>(</span><span class='id identifier rubyid_hbx'>hbx</span><span class='period'>.</span><span class='id identifier rubyid_effective_on'>effective_on</span><span class='rparen'>)</span>           <span class='comment'># age with the current DOB on the day coverage started
</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_new_age'>new_age</span> <span class='op'>==</span> <span class='id identifier rubyid_current_age'>current_age</span> <span class='comment'># No Change in age -&gt; No Premium Implication
</span>
    <span class='comment'># No Implication when the change is all within the 0-20 age range or all within the 61+ age range
</span>    <span class='kw'>if</span> <span class='lparen'>(</span> <span class='id identifier rubyid_current_age'>current_age</span><span class='period'>.</span><span class='id identifier rubyid_between?'>between?</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>20</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_new_age'>new_age</span><span class='period'>.</span><span class='id identifier rubyid_between?'>between?</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>20</span><span class='rparen'>)</span> <span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span> <span class='id identifier rubyid_current_age'>current_age</span> <span class='op'>&gt;=</span> <span class='int'>61</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_new_age'>new_age</span> <span class='op'>&gt;=</span> <span class='int'>61</span> <span class='rparen'>)</span>
      <span class='comment'>#premium_impication_for_enrollment[hbx.id] = false
</span>    <span class='kw'>else</span>
      <span class='id identifier rubyid_premium_impication_for_enrollment'>premium_impication_for_enrollment</span><span class='lbracket'>[</span><span class='id identifier rubyid_hbx'>hbx</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_premium_impication_for_enrollment'>premium_impication_for_enrollment</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="employee_roles-class_method">
  
    .<strong>employee_roles</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Find all employee_roles.  Since person has_many employee_roles, person may
show up employee_role.person may not be unique in returned set</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


574
575
576
577</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 574</span>

<span class='kw'>def</span> <span class='id identifier rubyid_employee_roles'>employee_roles</span>
  <span class='id identifier rubyid_people'>people</span> <span class='op'>=</span> <span class='id identifier rubyid_exists'>exists</span><span class='lparen'>(</span><span class='symbol'>:employee_roles.0</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_entries'>entries</span>
  <span class='id identifier rubyid_people'>people</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:employee_roles</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_all_brokers_or_staff_members_by_agency-class_method">
  
    .<strong>find_all_brokers_or_staff_members_by_agency</strong>(broker_agency)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


579
580
581
582</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 579</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_all_brokers_or_staff_members_by_agency'>find_all_brokers_or_staff_members_by_agency</span><span class='lparen'>(</span><span class='id identifier rubyid_broker_agency'>broker_agency</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_or'>or</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:broker_role.broker_agency_profile_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_broker_agency'>broker_agency</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span><span class='comma'>,</span>
            <span class='lbrace'>{</span><span class='symbol'>:broker_agency_staff_roles.broker_agency_profile_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_broker_agency'>broker_agency</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_all_staff_roles_by_employer_profile-class_method">
  
    .<strong>find_all_staff_roles_by_employer_profile</strong>(employer_profile)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


588
589
590
591</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 588</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_all_staff_roles_by_employer_profile'>find_all_staff_roles_by_employer_profile</span><span class='lparen'>(</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='rparen'>)</span>
  <span class='comment'>#where({&quot;$and&quot;=&gt;[{&quot;employer_staff_roles.employer_profile_id&quot;=&gt; employer_profile.id}, {&quot;employer_staff_roles.is_owner&quot;=&gt;true}]})
</span>  <span class='id identifier rubyid_staff_for_employer'>staff_for_employer</span><span class='lparen'>(</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="match_by_id_info-class_method">
  
    .<strong>match_by_id_info</strong>(options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return an instance list of active People who match identifying information
criteria</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 635</span>

<span class='kw'>def</span> <span class='id identifier rubyid_match_by_id_info'>match_by_id_info</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ssn_query'>ssn_query</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ssn</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_dob_query'>dob_query</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:dob</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_last_name'>last_name</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_first_name'>first_name</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must provide an ssn or first_name/last_name/dob or both</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_ssn_query'>ssn_query</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_dob_query'>dob_query</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>||</span> <span class='id identifier rubyid_last_name'>last_name</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>||</span> <span class='id identifier rubyid_first_name'>first_name</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_matches'>matches</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_matches'>matches</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='const'><span class='object_link'><a href="" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>encrypted_ssn:</span> <span class='id identifier rubyid_encrypt_ssn'>encrypt_ssn</span><span class='lparen'>(</span><span class='id identifier rubyid_ssn_query'>ssn_query</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>dob:</span> <span class='id identifier rubyid_dob_query'>dob_query</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span> <span class='kw'>unless</span> <span class='id identifier rubyid_ssn_query'>ssn_query</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='comment'>#matches.concat Person.where(last_name: last_name, dob: dob_query).active.to_a unless (dob_query.blank? || last_name.blank?)
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_first_name'>first_name</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_last_name'>last_name</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dob_query'>dob_query</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_first_exp'>first_exp</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_first_name'>first_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/i</span></span>
    <span class='id identifier rubyid_last_exp'>last_exp</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_last_name'>last_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/i</span></span>
    <span class='id identifier rubyid_matches'>matches</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='const'><span class='object_link'><a href="" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>dob:</span> <span class='id identifier rubyid_dob_query'>dob_query</span><span class='comma'>,</span> <span class='label'>last_name:</span> <span class='id identifier rubyid_last_exp'>last_exp</span><span class='comma'>,</span> <span class='label'>first_name:</span> <span class='id identifier rubyid_first_exp'>first_exp</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_person'>person</span><span class='op'>|</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_ssn'>ssn</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>||</span> <span class='id identifier rubyid_ssn_query'>ssn_query</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_matches'>matches</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="match_existing_person-class_method">
  
    .<strong>match_existing_person</strong>(personish)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


593
594
595
596</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 593</span>

<span class='kw'>def</span> <span class='id identifier rubyid_match_existing_person'>match_existing_person</span><span class='lparen'>(</span><span class='id identifier rubyid_personish'>personish</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_personish'>personish</span><span class='period'>.</span><span class='id identifier rubyid_ssn'>ssn</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='const'><span class='object_link'><a href="" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:encrypted_ssn</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_encrypt_ssn'>encrypt_ssn</span><span class='lparen'>(</span><span class='id identifier rubyid_personish'>personish</span><span class='period'>.</span><span class='id identifier rubyid_ssn'>ssn</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:dob</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_personish'>personish</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="person_has_an_active_enrollment?-class_method">
  
    .<strong>person_has_an_active_enrollment?</strong>(person)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


598
599
600
601
602
603
604
605</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 598</span>

<span class='kw'>def</span> <span class='id identifier rubyid_person_has_an_active_enrollment?'>person_has_an_active_enrollment?</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_primary_family'>primary_family</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_primary_family'>primary_family</span><span class='period'>.</span><span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_primary_family'>primary_family</span><span class='period'>.</span><span class='id identifier rubyid_enrollments'>enrollments</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enrollment'>enrollment</span><span class='op'>|</span>
      <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_enrollment'>enrollment</span><span class='period'>.</span><span class='id identifier rubyid_is_active'>is_active</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sans_primary_broker-class_method">
  
    .<strong>sans_primary_broker</strong>(broker_agency)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


584
585
586</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 584</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sans_primary_broker'>sans_primary_broker</span><span class='lparen'>(</span><span class='id identifier rubyid_broker_agency'>broker_agency</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:broker_role._id</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_nin'>nin</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_broker_agency'>broker_agency</span><span class='period'>.</span><span class='id identifier rubyid_primary_broker_role_id'>primary_broker_role_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search_first_name_last_name_npn-class_method">
  
    .<strong>search_first_name_last_name_npn</strong>(s_str, query = self)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


560
561
562
563
564
565
566
567
568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 560</span>

<span class='kw'>def</span> <span class='id identifier rubyid_search_first_name_last_name_npn'>search_first_name_last_name_npn</span><span class='lparen'>(</span><span class='id identifier rubyid_s_str'>s_str</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='op'>=</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_clean_str'>clean_str</span> <span class='op'>=</span> <span class='id identifier rubyid_s_str'>s_str</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
  <span class='id identifier rubyid_s_rex'>s_rex</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_s_str'>s_str</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$or</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='lbracket'>[</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>first_name</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_s_rex'>s_rex</span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>last_name</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_s_rex'>s_rex</span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>broker_role.npn</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_s_rex'>s_rex</span><span class='rbrace'>}</span>
      <span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_additional_exprs'>additional_exprs</span><span class='lparen'>(</span><span class='id identifier rubyid_clean_str'>clean_str</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search_hash-class_method">
  
    .<strong>search_hash</strong>(s_str)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


536
537
538
539
540
541
542
543
544
545
546
547</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 536</span>

<span class='kw'>def</span> <span class='id identifier rubyid_search_hash'>search_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_s_str'>s_str</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_clean_str'>clean_str</span> <span class='op'>=</span> <span class='id identifier rubyid_s_str'>s_str</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
  <span class='id identifier rubyid_s_rex'>s_rex</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_clean_str'>clean_str</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$or</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='lbracket'>[</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>first_name</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_s_rex'>s_rex</span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>last_name</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_s_rex'>s_rex</span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hbx_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_s_rex'>s_rex</span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>encrypted_ssn</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_encrypt_ssn'>encrypt_ssn</span><span class='lparen'>(</span><span class='id identifier rubyid_s_rex'>s_rex</span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_additional_exprs'>additional_exprs</span><span class='lparen'>(</span><span class='id identifier rubyid_clean_str'>clean_str</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="staff_for_employer-class_method">
  
    .<strong>staff_for_employer</strong>(employer_profile)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


663
664
665
666
667
668
669
670
671
672
673
674
675
676
677</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 663</span>

<span class='kw'>def</span> <span class='id identifier rubyid_staff_for_employer'>staff_for_employer</span><span class='lparen'>(</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="EmployerProfile.html" title="EmployerProfile (class)">EmployerProfile</a></span></span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_staff_roles</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$elemMatch</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
            <span class='label'>employer_profile_id:</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
            <span class='label'>aasm_state:</span> <span class='symbol'>:is_active</span><span class='rbrace'>}</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_staff_roles</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$elemMatch</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
            <span class='label'>benefit_sponsor_employer_profile_id:</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
            <span class='label'>aasm_state:</span> <span class='symbol'>:is_active</span><span class='rbrace'>}</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="staff_for_employer_including_pending-class_method">
  
    .<strong>staff_for_employer_including_pending</strong>(employer_profile)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 679</span>

<span class='kw'>def</span> <span class='id identifier rubyid_staff_for_employer_including_pending'>staff_for_employer_including_pending</span><span class='lparen'>(</span><span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="EmployerProfile.html" title="EmployerProfile (class)">EmployerProfile</a></span></span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_staff_roles</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$elemMatch</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
            <span class='label'>employer_profile_id:</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
            <span class='symbol'>:aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_ne'>ne</span> <span class='op'>=&gt;</span> <span class='symbol'>:is_closed</span>
        <span class='rbrace'>}</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:employer_staff_roles</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$elemMatch</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
            <span class='label'>benefit_sponsor_employer_profile_id:</span> <span class='id identifier rubyid_employer_profile'>employer_profile</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
            <span class='symbol'>:aasm_state</span><span class='period'>.</span><span class='id identifier rubyid_ne'>ne</span> <span class='op'>=&gt;</span> <span class='symbol'>:is_closed</span>
        <span class='rbrace'>}</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="active_employee_roles-instance_method">
  
    #<strong>active_employee_roles</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


492
493
494</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 492</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span>
  <span class='id identifier rubyid_employee_roles'>employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_employee_role'>employee_role</span><span class='op'>|</span> <span class='id identifier rubyid_employee_role'>employee_role</span><span class='period'>.</span><span class='id identifier rubyid_census_employee'>census_employee</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_employee_role'>employee_role</span><span class='period'>.</span><span class='id identifier rubyid_census_employee'>census_employee</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_employer_staff_roles-instance_method">
  
    #<strong>active_employer_staff_roles</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


504
505
506</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 504</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_employer_staff_roles'>active_employer_staff_roles</span>
  <span class='id identifier rubyid_employer_staff_roles'>employer_staff_roles</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='id identifier rubyid_employer_staff_roles'>employer_staff_roles</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active_general_agency_staff_roles-instance_method">
  
    #<strong>active_general_agency_staff_roles</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 248</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_general_agency_staff_roles'>active_general_agency_staff_roles</span>
  <span class='id identifier rubyid_general_agency_staff_roles'>general_agency_staff_roles</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:active?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_employee_home_address-instance_method">
  
    #<strong>add_employee_home_address</strong>(existing_addresses)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


259
260
261
262
263
264</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 259</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_employee_home_address'>add_employee_home_address</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_addresses'>existing_addresses</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_existing_addresses'>existing_addresses</span> <span class='kw'>unless</span> <span class='id identifier rubyid_employee_roles'>employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
  <span class='id identifier rubyid_employee_contact_address'>employee_contact_address</span> <span class='op'>=</span> <span class='id identifier rubyid_employee_roles'>employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:hired_on</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:census_employee</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:address</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_existing_addresses'>existing_addresses</span> <span class='kw'>unless</span> <span class='id identifier rubyid_employee_contact_address'>employee_contact_address</span>
  <span class='id identifier rubyid_existing_addresses'>existing_addresses</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='id identifier rubyid_employee_contact_address'>employee_contact_address</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_work_email-instance_method">
  
    #<strong>add_work_email</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


417
418
419
420
421
422
423
424</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 417</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_work_email'>add_work_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_existing_email'>existing_email</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>work</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_existing_email'>existing_email</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_emails'>emails</span> <span class='op'>&lt;&lt;</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="Email.html" title="Email (class)">Email</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:kind</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>work</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:address</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="agent?-instance_method">
  
    #<strong>agent?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


814
815
816
817</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 814</span>

<span class='kw'>def</span> <span class='id identifier rubyid_agent?'>agent?</span>
  <span class='id identifier rubyid_agent'>agent</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_csr_role'>csr_role</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assister_role'>assister_role</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_broker_role'>broker_role</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_staff_role'>hbx_staff_role</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_general_agency_staff_roles'>general_agency_staff_roles</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_agent'>agent</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assign_citizen_status-instance_method">
  
    #<strong>assign_citizen_status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


798
799
800
801
802
803
804
805
806
807
808
809
810
811
812</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 798</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assign_citizen_status'>assign_citizen_status</span>
  <span class='id identifier rubyid_new_status'>new_status</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_naturalized_citizen'>naturalized_citizen</span>
    <span class='id identifier rubyid_new_status'>new_status</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html" title="ConsumerRole (class)">ConsumerRole</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html#NATURALIZED_CITIZEN_STATUS-constant" title="ConsumerRole::NATURALIZED_CITIZEN_STATUS (constant)">NATURALIZED_CITIZEN_STATUS</a></span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_us_citizen'>us_citizen</span>
    <span class='id identifier rubyid_new_status'>new_status</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html" title="ConsumerRole (class)">ConsumerRole</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html#US_CITIZEN_STATUS-constant" title="ConsumerRole::US_CITIZEN_STATUS (constant)">US_CITIZEN_STATUS</a></span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_eligible_immigration_status'>eligible_immigration_status</span>
    <span class='id identifier rubyid_new_status'>new_status</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html" title="ConsumerRole (class)">ConsumerRole</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html#ALIEN_LAWFULLY_PRESENT_STATUS-constant" title="ConsumerRole::ALIEN_LAWFULLY_PRESENT_STATUS (constant)">ALIEN_LAWFULLY_PRESENT_STATUS</a></span></span>
  <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_eligible_immigration_status'>eligible_immigration_status</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_status'>new_status</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html" title="ConsumerRole (class)">ConsumerRole</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConsumerRole.html#NOT_LAWFULLY_PRESENT_STATUS-constant" title="ConsumerRole::NOT_LAWFULLY_PRESENT_STATUS (constant)">NOT_LAWFULLY_PRESENT_STATUS</a></span></span>
  <span class='kw'>elsif</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Citizenship status can&#39;t be nil.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_lawful_presence_determination'>lawful_presence_determination</span><span class='period'>.</span><span class='id identifier rubyid_assign_citizen_status'>assign_citizen_status</span><span class='lparen'>(</span><span class='id identifier rubyid_new_status'>new_status</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_new_status'>new_status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assign_citizen_status_from_consumer_role-instance_method">
  
    #<strong>assign_citizen_status_from_consumer_role</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


748
749
750
751
752</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 748</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assign_citizen_status_from_consumer_role'>assign_citizen_status_from_consumer_role</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_is_consumer_role'>is_consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='op'>==</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_assign_citizen_status'>assign_citizen_status</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_report_shop_qle?-instance_method">
  
    #<strong>can_report_shop_qle?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


480
481
482</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 480</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_report_shop_qle?'>can_report_shop_qle?</span>
  <span class='id identifier rubyid_employee_roles'>employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_census_employee'>census_employee</span><span class='period'>.</span><span class='id identifier rubyid_qle_30_day_eligible?'>qle_30_day_eligible?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_households-instance_method">
  
    #<strong>check_households</strong>(family)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_households'>check_households</span> <span class='id identifier rubyid_family'>family</span>
  <span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_households'>households</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_tax_households-instance_method">
  
    #<strong>check_tax_households</strong>(family)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 295</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_tax_households'>check_tax_households</span> <span class='id identifier rubyid_family'>family</span>
  <span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_households'>households</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_tax_households'>tax_households</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="completed_identity_verification?-instance_method">
  
    #<strong>completed_identity_verification?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299
300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_completed_identity_verification?'>completed_identity_verification?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user'>user</span>
  <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_identity_verified?'>identity_verified?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="contact_addresses-instance_method">
  
    #<strong>contact_addresses</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254
255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 252</span>

<span class='kw'>def</span> <span class='id identifier rubyid_contact_addresses'>contact_addresses</span>
  <span class='id identifier rubyid_existing_addresses'>existing_addresses</span> <span class='op'>=</span> <span class='id identifier rubyid_addresses'>addresses</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='id identifier rubyid_home_address'>home_address</span> <span class='op'>=</span> <span class='id identifier rubyid_existing_addresses'>existing_addresses</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_addy'>addy</span><span class='op'>|</span> <span class='id identifier rubyid_addy'>addy</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>home</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_existing_addresses'>existing_addresses</span> <span class='kw'>if</span> <span class='id identifier rubyid_home_address'>home_address</span>
  <span class='id identifier rubyid_add_employee_home_address'>add_employee_home_address</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_addresses'>existing_addresses</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="contact_info-instance_method">
  
    #<strong>contact_info</strong>(email_address, area_code, number, extension)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 819</span>

<span class='kw'>def</span> <span class='id identifier rubyid_contact_info'>contact_info</span><span class='lparen'>(</span><span class='id identifier rubyid_email_address'>email_address</span><span class='comma'>,</span> <span class='id identifier rubyid_area_code'>area_code</span><span class='comma'>,</span> <span class='id identifier rubyid_number'>number</span><span class='comma'>,</span> <span class='id identifier rubyid_extension'>extension</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_email_address'>email_address</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_mail'>mail</span><span class='op'>|</span><span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>work</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_email'>email</span>
      <span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='label'>address:</span> <span class='id identifier rubyid_email_address'>email_address</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_email'>email</span><span class='op'>=</span> <span class='const'><span class='object_link'><a href="Email.html" title="Email (class)">Email</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>kind:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>work</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>address:</span> <span class='id identifier rubyid_email_address'>email_address</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_append'>append</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='label'>emails:</span> <span class='id identifier rubyid_emails'>emails</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_save!'>save!</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_phone'>phone</span> <span class='op'>=</span> <span class='id identifier rubyid_phones'>phones</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>work</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_phone'>phone</span>
    <span class='id identifier rubyid_phone'>phone</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='label'>area_code:</span> <span class='id identifier rubyid_area_code'>area_code</span><span class='comma'>,</span> <span class='label'>number:</span> <span class='id identifier rubyid_number'>number</span><span class='comma'>,</span> <span class='label'>extension:</span> <span class='id identifier rubyid_extension'>extension</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_phone'>phone</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Phone.html" title="Phone (class)">Phone</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>kind:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>work</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>area_code:</span> <span class='id identifier rubyid_area_code'>area_code</span><span class='comma'>,</span> <span class='label'>number:</span> <span class='id identifier rubyid_number'>number</span><span class='comma'>,</span> <span class='label'>extension:</span> <span class='id identifier rubyid_extension'>extension</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_phones'>phones</span><span class='period'>.</span><span class='id identifier rubyid_append'>append</span><span class='lparen'>(</span><span class='id identifier rubyid_phone'>phone</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='label'>phones:</span> <span class='id identifier rubyid_phones'>phones</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_save!'>save!</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="contact_phones-instance_method">
  
    #<strong>contact_phones</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


266
267
268</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 266</span>

<span class='kw'>def</span> <span class='id identifier rubyid_contact_phones'>contact_phones</span>
  <span class='id identifier rubyid_phones'>phones</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_ph'>ph</span><span class='op'>|</span> <span class='id identifier rubyid_ph'>ph</span><span class='period'>.</span><span class='id identifier rubyid_full_phone_number'>full_phone_number</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="date_of_birth=-instance_method">
  
    #<strong>date_of_birth=</strong>(val)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 329</span>

<span class='kw'>def</span> <span class='id identifier rubyid_date_of_birth='>date_of_birth=</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_dob'>dob</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_strptime'>strptime</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%m/%d/%Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ensure_relationship_with-instance_method">
  
    #<strong>ensure_relationship_with</strong>(person, relationship)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


402
403
404
405
406
407
408
409
410
411
412
413
414
415</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 402</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ensure_relationship_with'>ensure_relationship_with</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='comma'>,</span> <span class='id identifier rubyid_relationship'>relationship</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='id identifier rubyid_existing_relationship'>existing_relationship</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_person_relationships'>person_relationships</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rel'>rel</span><span class='op'>|</span>
    <span class='id identifier rubyid_rel'>rel</span><span class='period'>.</span><span class='id identifier rubyid_relative_id'>relative_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_existing_relationship'>existing_relationship</span>
    <span class='id identifier rubyid_existing_relationship'>existing_relationship</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='symbol'>:kind</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_relationship'>relationship</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_person_relationships'>person_relationships</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="PersonRelationship.html" title="PersonRelationship (class)">PersonRelationship</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbrace'>{</span>
      <span class='symbol'>:kind</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_relationship'>relationship</span><span class='comma'>,</span>
      <span class='symbol'>:relative_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="families-instance_method">
  
    #<strong>families</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


346
347
348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 346</span>

<span class='kw'>def</span> <span class='id identifier rubyid_families'>families</span>
  <span class='const'><span class='object_link'><a href="Family.html" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_all_by_person'><span class='object_link'><a href="Family.html#find_all_by_person-class_method" title="Family.find_all_by_person (method)">find_all_by_person</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_relationship_with-instance_method">
  
    #<strong>find_relationship_with</strong>(other_person)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


388
389
390
391
392
393
394</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 388</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_relationship_with'>find_relationship_with</span><span class='lparen'>(</span><span class='id identifier rubyid_other_person'>other_person</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_other_person'>other_person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>self</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_person_relationship_for'>person_relationship_for</span><span class='lparen'>(</span><span class='id identifier rubyid_other_person'>other_person</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:kind</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first_name_last_name_and_suffix-instance_method">
  
    #<strong>first_name_last_name_and_suffix</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


354
355
356
357
358
359
360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 354</span>

<span class='kw'>def</span> <span class='id identifier rubyid_first_name_last_name_and_suffix'>first_name_last_name_and_suffix</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_first_name'>first_name</span><span class='comma'>,</span> <span class='id identifier rubyid_last_name'>last_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name_sfx'>name_sfx</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_name_sfx'>name_sfx</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ii</span><span class='tstring_end'>&quot;</span></span> <span class='op'>||</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>iii</span><span class='tstring_end'>&quot;</span></span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>iv</span><span class='tstring_end'>&quot;</span></span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>v</span><span class='tstring_end'>&quot;</span></span>
      <span class='lbracket'>[</span><span class='id identifier rubyid_first_name'>first_name</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span><span class='comma'>,</span> <span class='id identifier rubyid_last_name'>last_name</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span><span class='comma'>,</span> <span class='id identifier rubyid_name_sfx'>name_sfx</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='lbracket'>[</span><span class='id identifier rubyid_first_name'>first_name</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span><span class='comma'>,</span> <span class='id identifier rubyid_last_name'>last_name</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span><span class='comma'>,</span> <span class='id identifier rubyid_name_sfx'>name_sfx</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="full_name-instance_method">
  
    #<strong>full_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


350
351
352</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 350</span>

<span class='kw'>def</span> <span class='id identifier rubyid_full_name'>full_name</span>
  <span class='ivar'>@full_name</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_name_pfx'>name_pfx</span><span class='comma'>,</span> <span class='id identifier rubyid_first_name'>first_name</span><span class='comma'>,</span> <span class='id identifier rubyid_middle_name'>middle_name</span><span class='comma'>,</span> <span class='id identifier rubyid_last_name'>last_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name_sfx'>name_sfx</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gender=-instance_method">
  
    #<strong>gender=</strong>(new_gender)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


333
334
335</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 333</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gender='>gender=</span><span class='lparen'>(</span><span class='id identifier rubyid_new_gender'>new_gender</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:gender</span><span class='comma'>,</span> <span class='id identifier rubyid_new_gender'>new_gender</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_family_search-instance_method">
  
    #<strong>generate_family_search</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


842
843
844</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 842</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_family_search'>generate_family_search</span>
  <span class='op'>::</span><span class='const'><span class='object_link'><a href="MapReduce.html" title="MapReduce (module)">MapReduce</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="MapReduce/FamilySearchForPerson.html" title="MapReduce::FamilySearchForPerson (class)">FamilySearchForPerson</a></span></span><span class='period'>.</span><span class='id identifier rubyid_populate_for'><span class='object_link'><a href="MapReduce/FamilySearchForPerson.html#populate_for-class_method" title="MapReduce::FamilySearchForPerson.populate_for (method)">populate_for</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_hbx_id-instance_method">
  
    #<strong>generate_hbx_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 315</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_hbx_id'>generate_hbx_id</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:hbx_id</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="HbxIdGenerator.html" title="HbxIdGenerator (class)">HbxIdGenerator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate_member_id'><span class='object_link'><a href="HbxIdGenerator.html#generate_member_id-class_method" title="HbxIdGenerator.generate_member_id (method)">generate_member_id</a></span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_hbx_id'>hbx_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_active_consumer_role?-instance_method">
  
    #<strong>has_active_consumer_role?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


472
473
474</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 472</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_active_consumer_role?'>has_active_consumer_role?</span>
  <span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='kw'>and</span> <span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_active_employee_role?-instance_method">
  
    #<strong>has_active_employee_role?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


484
485
486</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 484</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_active_employee_role?'>has_active_employee_role?</span>
  <span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_active_employee_role_for_census_employee?-instance_method">
  
    #<strong>has_active_employee_role_for_census_employee?</strong>(census_employee)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


512
513
514
515
516</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 512</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_active_employee_role_for_census_employee?'>has_active_employee_role_for_census_employee?</span><span class='lparen'>(</span><span class='id identifier rubyid_census_employee'>census_employee</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_census_employee'>census_employee</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_employee_role'>employee_role</span><span class='op'>|</span> <span class='id identifier rubyid_employee_role'>employee_role</span><span class='period'>.</span><span class='id identifier rubyid_census_employee'>census_employee</span> <span class='op'>==</span> <span class='id identifier rubyid_census_employee'>census_employee</span> <span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_active_employer_staff_role?-instance_method">
  
    #<strong>has_active_employer_staff_role?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


500
501
502</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 500</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_active_employer_staff_role?'>has_active_employer_staff_role?</span>
  <span class='id identifier rubyid_employer_staff_roles'>employer_staff_roles</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='kw'>and</span> <span class='id identifier rubyid_employer_staff_roles'>employer_staff_roles</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_active_resident_role?-instance_method">
  
    #<strong>has_active_resident_role?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


476
477
478</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 476</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_active_resident_role?'>has_active_resident_role?</span>
  <span class='id identifier rubyid_resident_role'>resident_role</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='kw'>and</span> <span class='id identifier rubyid_resident_role'>resident_role</span><span class='period'>.</span><span class='id identifier rubyid_is_active?'>is_active?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_employer_benefits?-instance_method">
  
    #<strong>has_employer_benefits?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


488
489
490</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 488</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_employer_benefits?'>has_employer_benefits?</span>
  <span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_benefit_group'>benefit_group</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_mailing_address?-instance_method">
  
    #<strong>has_mailing_address?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


434
435
436</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 434</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_mailing_address?'>has_mailing_address?</span>
  <span class='id identifier rubyid_addresses'>addresses</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_adr'>adr</span><span class='op'>|</span> <span class='id identifier rubyid_adr'>adr</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mailing</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_multiple_active_employers?-instance_method">
  
    #<strong>has_multiple_active_employers?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


496
497
498</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 496</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_multiple_active_employers?'>has_multiple_active_employers?</span>
  <span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_multiple_roles?-instance_method">
  
    #<strong>has_multiple_roles?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


508
509
510</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 508</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_multiple_roles?'>has_multiple_roles?</span>
  <span class='id identifier rubyid_consumer_role'>consumer_role</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_active_employee_roles'>active_employee_roles</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="home_address-instance_method">
  
    #<strong>home_address</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


426
427
428</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 426</span>

<span class='kw'>def</span> <span class='id identifier rubyid_home_address'>home_address</span>
  <span class='id identifier rubyid_addresses'>addresses</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_adr'>adr</span><span class='op'>|</span> <span class='id identifier rubyid_adr'>adr</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>home</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="home_email-instance_method">
  
    #<strong>home_email</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


438
439
440</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 438</span>

<span class='kw'>def</span> <span class='id identifier rubyid_home_email'>home_email</span>
  <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_adr'>adr</span><span class='op'>|</span> <span class='id identifier rubyid_adr'>adr</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>home</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="home_phone-instance_method">
  
    #<strong>home_phone</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


459
460
461</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 459</span>

<span class='kw'>def</span> <span class='id identifier rubyid_home_phone'>home_phone</span>
  <span class='id identifier rubyid_phones'>phones</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_phone'>phone</span><span class='op'>|</span> <span class='id identifier rubyid_phone'>phone</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>home</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_active?-instance_method">
  
    #<strong>is_active?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_active?'>is_active?</span>
  <span class='id identifier rubyid_is_active'>is_active</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_aqhp?-instance_method">
  
    #<strong>is_aqhp?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


282
283
284
285
286
287
288
289</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 282</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_aqhp?'>is_aqhp?</span>
  <span class='id identifier rubyid_family'>family</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_primary_family'>primary_family</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_primary_family'>primary_family</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_family'>family</span>
    <span class='id identifier rubyid_check_households'>check_households</span><span class='lparen'>(</span><span class='id identifier rubyid_family'>family</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_check_tax_households'>check_tax_households</span><span class='lparen'>(</span><span class='id identifier rubyid_family'>family</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_dc_resident?-instance_method">
  
    #<strong>is_dc_resident?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


522
523
524
525
526
527
528
529</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 522</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_dc_resident?'>is_dc_resident?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_no_dc_address'>no_dc_address</span> <span class='op'>==</span> <span class='kw'>true</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_no_dc_address_reason'>no_dc_address_reason</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_no_dc_address'>no_dc_address</span> <span class='op'>==</span> <span class='kw'>true</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_no_dc_address_reason'>no_dc_address_reason</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

  <span class='id identifier rubyid_address_to_use'>address_to_use</span> <span class='op'>=</span> <span class='id identifier rubyid_addresses'>addresses</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:kind</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>home</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>home</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mailing</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_addresses'>addresses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_address'>address</span><span class='op'>|</span> <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_address'>address</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='id identifier rubyid_address_to_use'>address_to_use</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_address'>address</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='id identifier rubyid_aca_state_abbreviation'>aca_state_abbreviation</span><span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mailing_address-instance_method">
  
    #<strong>mailing_address</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


430
431
432</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 430</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mailing_address'>mailing_address</span>
  <span class='id identifier rubyid_addresses'>addresses</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_adr'>adr</span><span class='op'>|</span> <span class='id identifier rubyid_adr'>adr</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mailing</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span> <span class='op'>||</span> <span class='id identifier rubyid_home_address'>home_address</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="main_phone-instance_method">
  
    #<strong>main_phone</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


455
456
457</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 455</span>

<span class='kw'>def</span> <span class='id identifier rubyid_main_phone'>main_phone</span>
  <span class='id identifier rubyid_phones'>phones</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_phone'>phone</span><span class='op'>|</span> <span class='id identifier rubyid_phone'>phone</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>phone main</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mobile_phone-instance_method">
  
    #<strong>mobile_phone</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


463
464
465</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 463</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mobile_phone'>mobile_phone</span>
  <span class='id identifier rubyid_phones'>phones</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_phone'>phone</span><span class='op'>|</span> <span class='id identifier rubyid_phone'>phone</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mobile</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_created-instance_method">
  
    #<strong>notify_created</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_created'>notify_created</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#PERSON_CREATED_EVENT_NAME-constant" title="Person::PERSON_CREATED_EVENT_NAME (constant)">PERSON_CREATED_EVENT_NAME</a></span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:individual_id</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span> <span class='rbrace'>}</span> <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_updated-instance_method">
  
    #<strong>notify_updated</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 278</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_updated'>notify_updated</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#PERSON_UPDATED_EVENT_NAME-constant" title="Person::PERSON_UPDATED_EVENT_NAME (constant)">PERSON_UPDATED_EVENT_NAME</a></span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:individual_id</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hbx_id'>hbx_id</span> <span class='rbrace'>}</span> <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="person_relationship_for-instance_method">
  
    #<strong>person_relationship_for</strong>(other_person)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


396
397
398
399
400</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 396</span>

<span class='kw'>def</span> <span class='id identifier rubyid_person_relationship_for'>person_relationship_for</span><span class='lparen'>(</span><span class='id identifier rubyid_other_person'>other_person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_person_relationships'>person_relationships</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_person_relationship'>person_relationship</span><span class='op'>|</span>
    <span class='id identifier rubyid_person_relationship'>person_relationship</span><span class='period'>.</span><span class='id identifier rubyid_relative_id'>relative_id</span> <span class='op'>==</span> <span class='id identifier rubyid_other_person'>other_person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="primary_family-instance_method">
  
    #<strong>primary_family</strong>  &#x21d2; <tt><span class='object_link'><a href="Family.html" title="Family (class)">Family</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the <span class='object_link'><a href="Family.html" title="Family (class)">Family</a></span> where this <span class='object_link'><a href="" title="Person (class)">Person</a></span> is the primary family member</p>

<p>family itegrity ensures only one active family can be the primary for a
person</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Family.html" title="Family (class)">Family</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the family member who matches this person</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 342</span>

<span class='kw'>def</span> <span class='id identifier rubyid_primary_family'>primary_family</span>
  <span class='ivar'>@primary_family</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="Family.html" title="Family (class)">Family</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_primary_applicant_by_person'><span class='object_link'><a href="Family.html#find_primary_applicant_by_person-class_method" title="Family.find_primary_applicant_by_person (method)">find_primary_applicant_by_person</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relatives-instance_method">
  
    #<strong>relatives</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


382
383
384
385
386</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 382</span>

<span class='kw'>def</span> <span class='id identifier rubyid_relatives'>relatives</span>
  <span class='id identifier rubyid_person_relationships'>person_relationships</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p_rel'>p_rel</span><span class='op'>|</span>
    <span class='id identifier rubyid_p_rel'>p_rel</span><span class='period'>.</span><span class='id identifier rubyid_relative_id'>relative_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:relative</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="residency_eligible?-instance_method">
  
    #<strong>residency_eligible?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


518
519
520</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 518</span>

<span class='kw'>def</span> <span class='id identifier rubyid_residency_eligible?'>residency_eligible?</span>
  <span class='id identifier rubyid_no_dc_address'>no_dc_address</span> <span class='kw'>and</span> <span class='id identifier rubyid_no_dc_address_reason'>no_dc_address_reason</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_ridp_for_paper_application-instance_method">
  
    #<strong>set_ridp_for_paper_application</strong>(session_var)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


846
847
848
849
850</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 846</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_ridp_for_paper_application'>set_ridp_for_paper_application</span><span class='lparen'>(</span><span class='id identifier rubyid_session_var'>session_var</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_session_var'>session_var</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>paper</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ridp_by_paper_application'>ridp_by_paper_application</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="strip_empty_fields-instance_method">
  
    #<strong>strip_empty_fields</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


319
320
321
322
323
324
325
326
327</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 319</span>

<span class='kw'>def</span> <span class='id identifier rubyid_strip_empty_fields'>strip_empty_fields</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_encrypted_ssn'>encrypted_ssn</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_unset_sparse'>unset_sparse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>encrypted_ssn</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_unset_sparse'>unset_sparse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_family_search_collection-instance_method">
  
    #<strong>update_family_search_collection</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>before_save :notify_change def notify_change</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_notify_change_event'>notify_change_event</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>identifying_info</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='const'><span class='object_link'><a href="#IDENTIFYING_INFO_ATTRIBUTES-constant" title="Person::IDENTIFYING_INFO_ATTRIBUTES (constant)">IDENTIFYING_INFO_ATTRIBUTES</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>address_change</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='const'><span class='object_link'><a href="#ADDRESS_CHANGE_ATTRIBUTES-constant" title="Person::ADDRESS_CHANGE_ATTRIBUTES (constant)">ADDRESS_CHANGE_ATTRIBUTES</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>relation_change</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='const'><span class='object_link'><a href="#RELATIONSHIP_CHANGE_ATTRIBUTES-constant" title="Person::RELATIONSHIP_CHANGE_ATTRIBUTES (constant)">RELATIONSHIP_CHANGE_ATTRIBUTES</a></span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 311</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_family_search_collection'>update_family_search_collection</span>
  <span class='comment'>#  ViewFunctions::Person.run_after_save_search_update(self.id)
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="verification_types-instance_method">
  
    #<strong>verification_types</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>collect all verification types user can have based on information he
provided</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


369
370
371
372
373
374
375
376
377
378
379
380</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 369</span>

<span class='kw'>def</span> <span class='id identifier rubyid_verification_types'>verification_types</span>
  <span class='id identifier rubyid_verification_types'>verification_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_verification_types'>verification_types</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DC Residency</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_verification_types'>verification_types</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Social Security Number</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_ssn'>ssn</span>
  <span class='id identifier rubyid_verification_types'>verification_types</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>American Indian Status</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_tribal_id'>tribal_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_tribal_id'>tribal_id</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_us_citizen'>us_citizen</span>
    <span class='id identifier rubyid_verification_types'>verification_types</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Citizenship</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_verification_types'>verification_types</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Immigration status</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_verification_types'>verification_types</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="work_email-instance_method">
  
    #<strong>work_email</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


442
443
444</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 442</span>

<span class='kw'>def</span> <span class='id identifier rubyid_work_email'>work_email</span>
  <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_adr'>adr</span><span class='op'>|</span> <span class='id identifier rubyid_adr'>adr</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>work</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="work_email_or_best-instance_method">
  
    #<strong>work_email_or_best</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


446
447
448
449</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 446</span>

<span class='kw'>def</span> <span class='id identifier rubyid_work_email_or_best'>work_email_or_best</span>
  <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_adr'>adr</span><span class='op'>|</span> <span class='id identifier rubyid_adr'>adr</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>work</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span> <span class='op'>||</span> <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="work_phone-instance_method">
  
    #<strong>work_phone</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


451
452
453</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 451</span>

<span class='kw'>def</span> <span class='id identifier rubyid_work_phone'>work_phone</span>
  <span class='id identifier rubyid_phones'>phones</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_phone'>phone</span><span class='op'>|</span> <span class='id identifier rubyid_phone'>phone</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>work</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span> <span class='op'>||</span> <span class='id identifier rubyid_main_phone'>main_phone</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="work_phone_or_best-instance_method">
  
    #<strong>work_phone_or_best</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


467
468
469
470</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 467</span>

<span class='kw'>def</span> <span class='id identifier rubyid_work_phone_or_best'>work_phone_or_best</span>
  <span class='id identifier rubyid_best_phone'>best_phone</span>  <span class='op'>=</span> <span class='id identifier rubyid_work_phone'>work_phone</span> <span class='op'>||</span> <span class='id identifier rubyid_mobile_phone'>mobile_phone</span> <span class='op'>||</span> <span class='id identifier rubyid_home_phone'>home_phone</span>
  <span class='id identifier rubyid_best_phone'>best_phone</span> <span class='op'>?</span> <span class='id identifier rubyid_best_phone'>best_phone</span><span class='period'>.</span><span class='id identifier rubyid_full_phone_number'>full_phone_number</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Oct 11 09:49:36 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.2.3).
</div>

    </div>
  </body>
</html>